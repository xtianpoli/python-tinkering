<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Les éléments du langage &mdash; Introduction à la programmation en Python</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/custom_style.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Introduction à la programmation en Python" href="index.html" />
    <link rel="next" title="Modules et paquets" href="modules.html" />
    <link rel="prev" title="Quelques liens utiles" href="liens.html" /> 
  </head>
  <body>
   <!--  add javascript -->
   
   <script src="clipboard.min.js"></script>
   <script type="text/javascript">
     (function(){

     })();
   </script>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="modules.html" title="Modules et paquets"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="liens.html" title="Quelques liens utiles"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Introduction à la programmation en Python</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="les-elements-du-langage">
<h1>Les éléments du langage<a class="headerlink" href="#les-elements-du-langage" title="Permalink to this headline">¶</a></h1>
<div class="section" id="une-vue-d-ensemble">
<h2>Une vue d&#8217;ensemble<a class="headerlink" href="#une-vue-d-ensemble" title="Permalink to this headline">¶</a></h2>
<p>L&#8217;objectif de cette section est d&#8217;introduire de manière succincte et parfois juste intuitive certaines notions qui seront précisées dans les chapitres suivants.</p>
<div class="section" id="les-objets">
<h3>Les objets<a class="headerlink" href="#les-objets" title="Permalink to this headline">¶</a></h3>
<p>A ce stade on va se contenter de décrire les objets  <em>Python</em> d&#8217;une manière simplifiée et partielle, description sur laquelle on va revenir ultérieurement pour la parfaire.</p>
<p>On va considérer pour l&#8217;instant l&#8217;objet comme une entité ayant une structure composé de:</p>
<ul class="simple">
<li>données accessibles par des noms appelés <strong>attributs</strong> (Notation: <em>objet.attribut</em> )</li>
<li>comportements propres qui sont des fonctions attachées à l&#8217;objet appelés <strong>méthodes</strong> (exemple d&#8217;appel d&#8217;une méthode: <tt class="docutils literal"><span class="pre">&quot;abc&quot;.upper()</span></tt>)</li>
<li>un identifiant unique</li>
<li>un type (ou une classe)</li>
</ul>
<div class="section" id="quelques-objets">
<h4>Quelques objets...<a class="headerlink" href="#quelques-objets" title="Permalink to this headline">¶</a></h4>
<p>Pour illustration, un aperçu rapide et très partiel de quelques types de base (qui seront expliqués plus en détail dans un chapitre dédié).</p>
<p><strong>Un entier:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">id</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c"># possède un id</span>
<span class="go">9357408</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c"># possède un type</span>
<span class="go">&lt;class &#39;int&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dir</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c"># la primitive dir() fournit la liste des attributs et de méthodes</span>
<span class="go">[&#39;__abs__&#39;, &#39;__add__&#39;, &#39;__and__&#39;, &#39;__class__&#39;, &#39;__cmp__&#39;, &#39;__coerce__&#39;, &#39;__delattr__&#39;, &#39;__div__&#39;, &#39;__divmod__&#39;, &#39;__doc__&#39;, &#39;__float__&#39;, &#39;__floordiv__&#39;, &#39;__format__&#39;, &#39;__getattribute__&#39;, &#39;__getnewargs__&#39;, &#39;__hash__&#39;, &#39;__hex__&#39;, &#39;__index__&#39;, &#39;__init__&#39;, &#39;__int__&#39;, &#39;__invert__&#39;, &#39;__long__&#39;, &#39;__lshift__&#39;, &#39;__mod__&#39;, &#39;__mul__&#39;, &#39;__neg__&#39;, &#39;__new__&#39;, &#39;__nonzero__&#39;, &#39;__oct__&#39;, &#39;__or__&#39;, &#39;__pos__&#39;, &#39;__pow__&#39;, &#39;__radd__&#39;, &#39;__rand__&#39;, &#39;__rdiv__&#39;, &#39;__rdivmod__&#39;, &#39;__reduce__&#39;, &#39;__reduce_ex__&#39;, &#39;__repr__&#39;, &#39;__rfloordiv__&#39;, &#39;__rlshift__&#39;, &#39;__rmod__&#39;, &#39;__rmul__&#39;, &#39;__ror__&#39;, &#39;__rpow__&#39;, &#39;__rrshift__&#39;, &#39;__rshift__&#39;, &#39;__rsub__&#39;, &#39;__rtruediv__&#39;, &#39;__rxor__&#39;, &#39;__setattr__&#39;, &#39;__sizeof__&#39;, &#39;__str__&#39;, &#39;__sub__&#39;, &#39;__subclasshook__&#39;, &#39;__truediv__&#39;, &#39;__trunc__&#39;, &#39;__xor__&#39;, &#39;bit_length&#39;, &#39;conjugate&#39;, &#39;denominator&#39;, &#39;imag&#39;, &#39;numerator&#39;, &#39;real&#39;]</span>
</pre></div>
</div>
<p><strong>Une chaîne de caractères:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">id</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">)</span> <span class="c"># possède un id</span>
<span class="go">140219035744176</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">)</span> <span class="c"># possède un type</span>
<span class="go">&lt;type &#39;str&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dir</span><span class="p">(</span><span class="s">&#39;abc&#39;</span><span class="p">)</span> <span class="c"># attributs, méthodes</span>
<span class="go">[&#39;__add__&#39;, &#39;__class__&#39;, &#39;__contains__&#39;, &#39;__delattr__&#39;, &#39;__doc__&#39;, &#39;__eq__&#39;, &#39;__format__&#39;, &#39;__ge__&#39;, &#39;__getattribute__&#39;, &#39;__getitem__&#39;, &#39;__getnewargs__&#39;, &#39;__getslice__&#39;, &#39;__gt__&#39;, &#39;__hash__&#39;, &#39;__init__&#39;, &#39;__le__&#39;, &#39;__len__&#39;, &#39;__lt__&#39;, &#39;__mod__&#39;, &#39;__mul__&#39;, &#39;__ne__&#39;, &#39;__new__&#39;, &#39;__reduce__&#39;, &#39;__reduce_ex__&#39;, &#39;__repr__&#39;, &#39;__rmod__&#39;, &#39;__rmul__&#39;, &#39;__setattr__&#39;, &#39;__sizeof__&#39;, &#39;__str__&#39;, &#39;__subclasshook__&#39;, &#39;_formatter_field_name_split&#39;, &#39;_formatter_parser&#39;, &#39;capitalize&#39;, &#39;center&#39;, &#39;count&#39;, &#39;decode&#39;, &#39;encode&#39;, &#39;endswith&#39;, &#39;expandtabs&#39;, &#39;find&#39;, &#39;format&#39;, &#39;index&#39;, &#39;isalnum&#39;, &#39;isalpha&#39;, &#39;isdigit&#39;, &#39;islower&#39;, &#39;isspace&#39;, &#39;istitle&#39;, &#39;isupper&#39;, &#39;join&#39;, &#39;ljust&#39;, &#39;lower&#39;, &#39;lstrip&#39;, &#39;partition&#39;, &#39;replace&#39;, &#39;rfind&#39;, &#39;rindex&#39;, &#39;rjust&#39;, &#39;rpartition&#39;, &#39;rsplit&#39;, &#39;rstrip&#39;, &#39;split&#39;, &#39;splitlines&#39;, &#39;startswith&#39;, &#39;strip&#39;, &#39;swapcase&#39;, &#39;title&#39;, &#39;translate&#39;, &#39;upper&#39;, &#39;zfill&#39;]</span>
</pre></div>
</div>
<p><strong>Une liste:</strong></p>
<p>Pour l&#8217;instant, on va se contenter d&#8217;envisager la liste comme un tableau d&#8217;objets (pas forcément tous du même type).</p>
<p><strong>NB:</strong> Les listes font partie d&#8217;une &#8220;famille&#8221; de types de base appelées <strong>séquences</strong> et qui seront détaillées plus loin.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">id</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="s">&#39;abc&#39;</span><span class="p">])</span> <span class="c"># possède un id</span>
<span class="go">30386656</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="s">&#39;abc&#39;</span><span class="p">])</span> <span class="c"># possède un type</span>
<span class="go">&lt;type &#39;list&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dir</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="s">&#39;abc&#39;</span><span class="p">])</span> <span class="c"># attributs, méthodes</span>
<span class="go">[&#39;__add__&#39;, &#39;__class__&#39;, &#39;__contains__&#39;, &#39;__delattr__&#39;, &#39;__delitem__&#39;, &#39;__delslice__&#39;, &#39;__doc__&#39;, &#39;__eq__&#39;, &#39;__format__&#39;, &#39;__ge__&#39;, &#39;__getattribute__&#39;, &#39;__getitem__&#39;, &#39;__getslice__&#39;, &#39;__gt__&#39;, &#39;__hash__&#39;, &#39;__iadd__&#39;, &#39;__imul__&#39;, &#39;__init__&#39;, &#39;__iter__&#39;, &#39;__le__&#39;, &#39;__len__&#39;, &#39;__lt__&#39;, &#39;__mul__&#39;, &#39;__ne__&#39;, &#39;__new__&#39;, &#39;__reduce__&#39;, &#39;__reduce_ex__&#39;, &#39;__repr__&#39;, &#39;__reversed__&#39;, &#39;__rmul__&#39;, &#39;__setattr__&#39;, &#39;__setitem__&#39;, &#39;__setslice__&#39;, &#39;__sizeof__&#39;, &#39;__str__&#39;, &#39;__subclasshook__&#39;, &#39;append&#39;, &#39;count&#39;, &#39;extend&#39;, &#39;index&#39;, &#39;insert&#39;, &#39;pop&#39;, &#39;remove&#39;, &#39;reverse&#39;, &#39;sort&#39;]</span>
</pre></div>
</div>
<p><strong>Une fonction est aussi un objet:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">say_hello</span><span class="p">():</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="s">&quot;Hello!&quot;</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">id</span><span class="p">(</span><span class="n">say_hello</span><span class="p">)</span>
<span class="go">30495040</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">say_hello</span><span class="p">)</span>
<span class="go">&lt;type &#39;function&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dir</span><span class="p">(</span><span class="n">say_hello</span><span class="p">)</span>
<span class="go">[&#39;__call__&#39;, &#39;__class__&#39;, &#39;__closure__&#39;, &#39;__code__&#39;, &#39;__defaults__&#39;, &#39;__delattr__&#39;, &#39;__dict__&#39;, &#39;__doc__&#39;, &#39;__format__&#39;, &#39;__get__&#39;, &#39;__getattribute__&#39;, &#39;__globals__&#39;, &#39;__hash__&#39;, &#39;__init__&#39;, &#39;__module__&#39;, &#39;__name__&#39;, &#39;__new__&#39;, &#39;__reduce__&#39;, &#39;__reduce_ex__&#39;, &#39;__repr__&#39;, &#39;__setattr__&#39;, &#39;__sizeof__&#39;, &#39;__str__&#39;, &#39;__subclasshook__&#39;, &#39;func_closure&#39;, &#39;func_code&#39;, &#39;func_defaults&#39;, &#39;func_dict&#39;, &#39;func_doc&#39;, &#39;func_globals&#39;, &#39;func_name&#39;]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="le-modele-reference-uniforme-en-python">
<h3>Le modèle référence uniforme en Python<a class="headerlink" href="#le-modele-reference-uniforme-en-python" title="Permalink to this headline">¶</a></h3>
<p>En Python, tout est objet de &#8220;première classe&#8221;, du simple entier jusqu&#8217;à la fonction.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Un objet de première classe (&#8220;first class object&#8221;) est un objet qui peut être affecté à une variable, passé en paramètre à une fonction ou retourné par une fonction (cf. Raphael Finkel)</p>
</div>
<p>Les langages de programmation peuvent manipuler les données de <a class="reference external" href="http://dept-info.labri.fr/ENSEIGNEMENT/INITINFO/initinfo/supports/book/node64.html">deux manières</a> :</p>
<ul class="simple">
<li>par valeur ou par copie (par exemple, les entiers (<strong>int</strong>) dans le langage <strong>C</strong>, <strong>Java</strong>). On parle aussi de &#8220;sémantique valeur&#8221; ou &#8220;sémantique par copie&#8221;.</li>
<li>par référence, en préservant l&#8217;identité de l&#8217;objet(par exemple, les objets en Java). Appelée aussi &#8220;sémantique par référence uniforme&#8221;.</li>
</ul>
<p>En Python, toute donnée, même très simple, étant représentée sous forme d&#8217;objet, sa manipulation se fait toujours par référence, jamais par valeur, ce qui correspond à une <strong>sémantique par référence uniforme</strong>.</p>
</div>
<div class="section" id="les-variables">
<h3>Les variables<a class="headerlink" href="#les-variables" title="Permalink to this headline">¶</a></h3>
<p>En Python, une variable n&#8217;a pas de correspondant physique (comme les variables en <em>C</em>, qui sont des locations mémoire). Les variables <em>Python</em> sont juste des <strong>noms</strong>, des <strong>identifiants</strong> attribués à des objets. Ainsi, une variable:</p>
<ul class="simple">
<li>Ne fait pas l&#8217;objet d&#8217;une déclaration</li>
<li>Ne désigne pas une adresse mémoire comme en <em>C/C++</em></li>
<li>N&#8217;est pas un objet (mais juste un nom attribué à un objet)</li>
<li>N&#8217;a pas de type (mais l&#8217;objet qu&#8217;elle désigne en a un, <strong>toujours</strong> !)</li>
</ul>
<p><strong>Illustration:</strong></p>
<p>A la suite des opérations suivantes, l&#8217;objet (chaîne de caractères) &#8216;python&#8217; sera référencé 3 fois:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">=</span><span class="s">&#39;python&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">id</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="go">140219035541248</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">id</span><span class="p">(</span><span class="s">&#39;python&#39;</span><span class="p">)</span>
<span class="go">140219035541248</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span><span class="n">a</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">id</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="go">140219035541248</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst</span><span class="o">=</span><span class="p">[</span><span class="n">b</span><span class="p">,</span><span class="mi">2</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">id</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span>
<span class="go">30386656</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">id</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">25253792</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">id</span><span class="p">(</span><span class="n">lst</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="go">140219035541248</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">id</span><span class="p">(</span><span class="n">lst</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="go">25253792</span>
</pre></div>
</div>
<img alt="_images/var_refs_cut.jpg" src="_images/var_refs_cut.jpg" />
<p>Par la suite, l&#8217;objet va &#8220;perdre&#8221; une référence:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">lst</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">=</span><span class="mi">1</span>
</pre></div>
</div>
<img alt="_images/var_refs2_cut.jpg" src="_images/var_refs2_cut.jpg" />
<p>Et encore une:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">b</span><span class="o">=</span><span class="n">lst</span>
</pre></div>
</div>
<img alt="_images/var_refs3_cut.jpg" src="_images/var_refs3_cut.jpg" />
<p>Avec la perte de la dernière référence, l&#8217;objet sera purgé par le &#8220;garbage collector&#8221; (ramassage des miettes):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="o">=</span><span class="n">lst</span>
</pre></div>
</div>
<img alt="_images/var_refs4_cut.jpg" src="_images/var_refs4_cut.jpg" />
<p>Lexicalement, les noms des variables en Python sont des identifiants soumis, globalement, aux mêmes règles qu&#8217;en <em>C</em>, <em>C++</em> ou <em>Java</em>:</p>
<p>identifiant := (lettre|_)(lettre|chiffre|_)*</p>
<div class="warning admonition">
<p class="first admonition-title">Avertissement</p>
<p class="last">A partir de la version 3 de <em>Python</em>, toutes les lettres Unicode peuvent entrer dans la composition d&#8217;un identifiant, par exemple les lettres accentuées. Utiliser des caractères non-ASCII dans les identifiants est une pratique à éviter, car elle est source confusion...</p>
</div>
<p><strong>Python 2.x:</strong></p>
<div class="highlight-python"><div class="highlight"><pre>$ python
Python 2.7.10 (default, Sep 24 2015, 17:50:09)
[GCC 5.1.1 20150618 (Red Hat 5.1.1-4)] on linux2
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; à_éviter=0
File &quot;&lt;stdin&gt;&quot;, line 1
à_éviter=0
^
SyntaxError: invalid syntax
&gt;&gt;&gt;
</pre></div>
</div>
<p><strong>Python 3.x:</strong></p>
<div class="highlight-python"><div class="highlight"><pre>$ python3
Python 3Python 3.4.3 |Anaconda 2.3.0 (64-bit)| (default, Oct 19 2015, 21:52:17)
[GCC 4.4.7 20120313 (Red Hat 4.4.7-1)] on linux
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt;  à_éviter=0
 &gt;&gt;&gt; id(à_éviter)
 140544516702304
 &gt;&gt;&gt; à_éviter
 0
</pre></div>
</div>
<p>Pour qu&#8217;un identifiant soit un nom correct de variable il ne doit pas faire partie de la liste de mots clés du langage:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="ow">and</span><span class="o">=</span><span class="mi">4</span>
<span class="go">    File &quot;&lt;stdin&gt;&quot;, line 1</span>
<span class="go">      and=4</span>
<span class="go">        ^</span>
<span class="go"> SyntaxError: invalid syntax</span>
<span class="go"> &gt;&gt;&gt; True=0</span>
<span class="go"> File &quot;&lt;stdin&gt;&quot;, line 1</span>
<span class="go"> SyntaxError: assignment to keyword</span>
</pre></div>
</div>
<p><strong>NB:</strong> La portée des variables sera discutée dans la section sur les fonctions.</p>
</div>
<div class="section" id="les-operateurs">
<h3>Les opérateurs<a class="headerlink" href="#les-operateurs" title="Permalink to this headline">¶</a></h3>
<p>Il s&#8217;agit ici d&#8217;une vue d&#8217;ensemble des opérateurs comme entités syntaxiques permettant de construire des expressions. Leur sémantique dépend du type des opérandes et elle sera développée par la suite, au cas par cas, en même temps que les types prédéfinis. La possibilité de redéfinir les opérateurs sera présentée en même temps que le modèle objet.</p>
<div class="section" id="operateurs-de-base">
<h4>Opérateurs de base (+,-,*,**,/,//,%)<a class="headerlink" href="#operateurs-de-base" title="Permalink to this headline">¶</a></h4>
<p>On les associe spontanément aux opérations mathématiques, mais certains d&#8217;entre eux peuvent être associés, avec des sémantiques adaptées, à des types non numériques. En plus, comme on le verra plus tard, ils sont redéfinissables  par des types applicatifs (classes).</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="mi">1</span><span class="o">+</span><span class="mi">2</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s">&quot;abc&quot;</span><span class="o">+</span><span class="s">&quot;xyz&quot;</span>
<span class="go">&#39;abcxyz&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s">&quot;abc&quot;</span><span class="o">*</span><span class="mi">3</span>
<span class="go">&#39;abcabcabc&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">2</span><span class="o">*</span><span class="mi">2</span>
<span class="go">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mf">5.0</span><span class="o">/</span><span class="mi">3</span>
<span class="go">1.6666666666666667</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p><strong>NB:</strong> Ces opérateurs peuvent apparaître dans des &#8220;affectations augmentées&#8221; sous la forme <em>variable operateur= expression</em> (Ex: <em>x += 5</em>, <em>x -= 7</em>, etc.)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">=</span><span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">+=</span><span class="mi">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">x</span>
<span class="go">6</span>
</pre></div>
</div>
</div>
<div class="section" id="operateurs-relationnels">
<h4>Opérateurs relationnels<a class="headerlink" href="#operateurs-relationnels" title="Permalink to this headline">¶</a></h4>
<p>Il sont les mêmes que dans la plupart des langages, avec une syntaxe proche de celle du langage <em>C</em>:</p>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="88%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Symbole</th>
<th class="head">Opération</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>&lt;</td>
<td>inférieur</td>
</tr>
<tr class="row-odd"><td>&lt;=</td>
<td>inférieur ou égal</td>
</tr>
<tr class="row-even"><td>&gt;</td>
<td>supérieur</td>
</tr>
<tr class="row-odd"><td>&gt;=</td>
<td>supérieur ou égal</td>
</tr>
<tr class="row-even"><td>==, is</td>
<td>égal (par convention <em>is</em> est à utiliser avec <em>None</em>)</td>
</tr>
<tr class="row-odd"><td>!=</td>
<td>différent</td>
</tr>
</tbody>
</table>
<p><strong>NB:</strong> L&#8217;opérateur <strong>&lt;&gt;</strong> (l&#8217;équivalent de <strong>!=</strong>) n&#8217;est plus supporté en version 3 et son utilisation en version 2 est déconseillée.</p>
</div>
<div class="section" id="operateurs-logiques">
<h4>Opérateurs logiques<a class="headerlink" href="#operateurs-logiques" title="Permalink to this headline">¶</a></h4>
<p>En Python, les expressions suivante sont logiquement fausses: 0,&#8217;&#8216;,&#8221;&#8221;,[],(),{}, False</p>
<p>Les opérateurs logiques sont: <strong>and</strong>, <strong>or</strong>, <strong>not</strong></p>
<p>Les fonctions : <strong>any(c)</strong>, <strong>all(c)</strong> appliquent <strong>or</strong> et <strong>and</strong>
aux elements du conteneur <strong>c</strong> (par exemple, les éléments d&#8217;une liste):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">any</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">any</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;&quot;</span><span class="p">,{}])</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">all</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="mi">5</span><span class="p">])</span>
<span class="go">False</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>En dehors des connecteurs logiques  <strong>and</strong>, <strong>or</strong>, <strong>not</strong> présentés ici il existe des opérateurs logiques &#8220;bit à bit&#8221; applicables aux entiers. Il seront présentés dans la section destinées aux types numériques.</p>
</div>
</div>
<div class="section" id="les-expressions">
<h3>Les expressions<a class="headerlink" href="#les-expressions" title="Permalink to this headline">¶</a></h3>
<p>Les expressions en Python ne diffèrent pas beaucoup de celles de la plupart des langages de programmation les plus courants.</p>
<p>De manière très informelle, il s&#8217;agit du combinaison cohérente d&#8217;objets, variables, appels de fonctions et méthodes et opérateurs.</p>
<p>Pour une définition formelle voir : <a class="reference external" href="http://docs.python.org/3/reference/expressions.html">http://docs.python.org/3/reference/expressions.html</a></p>
</div>
<div class="section" id="les-instructions">
<h3>Les instructions<a class="headerlink" href="#les-instructions" title="Permalink to this headline">¶</a></h3>
<p>Comme dans d&#8217;autres langages on peut parler d&#8217;instructions simples et d&#8217;instructions composées.</p>
<div class="section" id="les-instructions-simples">
<h4>Les instructions simples<a class="headerlink" href="#les-instructions-simples" title="Permalink to this headline">¶</a></h4>
<p>Incluent :</p>
<ul class="simple">
<li>les expressions (saisies en mode interactif, appel de fonction dont la valeur de retour n&#8217;est pas utilisée)</li>
<li>les affectations:<ul>
<li>simples (<tt class="docutils literal"><span class="pre">=</span></tt>)</li>
<li>multiples  (<tt class="docutils literal"><span class="pre">=</span></tt>)</li>
<li>augmentées (<tt class="docutils literal"><span class="pre">+=</span></tt>, <tt class="docutils literal"><span class="pre">-=</span></tt>, ...)</li>
</ul>
</li>
<li>opérations introduites par un mot clé : assert, pass, del, return, ...</li>
</ul>
<p>Le plus souvent une instruction simple s&#8217;écrit sur une seule ligne mais on peut écrire plusieurs instructions par ligne séparées par <strong>;</strong> (pratique généralement déconseillée, sauf quand son utilité est évidente).</p>
<p><strong>Affectations multiples:</strong></p>
<p>Python permet d&#8217;affecter en parallèle plusieurs variables. Cela est pratique si on veut intervertir les valeurs entre deux variables ou faire des permutations:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="mi">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span> <span class="o">=</span> <span class="mi">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># &quot;Simple is better than complex.&quot; (le Zen)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span> <span class="o">=</span> <span class="n">b</span><span class="p">,</span> <span class="n">c</span><span class="p">,</span> <span class="n">a</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span>
<span class="go">1</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p><strong>NB:</strong> Cette écriture (appelée aussi <strong>&#8220;unpacking&#8221;</strong>) fait intervenir le type <strong>tuple</strong> qui sera évoqué plus loin.</p>
<p>Une autre écriture qu&#8217;on peut qualifier d&#8217;affectation multiple:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span>
<span class="go">3</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Pour en savoir plus: <a class="reference external" href="http://docs.python.org/3/reference/simple_stmts.html">http://docs.python.org/3/reference/simple_stmts.html</a></p>
<p><strong>Exercice</strong></p>
<div class="myexercice container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: references.py</span>

<span class="sd">Soit deux listes d&#39;entiers a = [1, 2]  et b = [3, 4] ainsi que x, la liste des des deux premières :</span>

<span class="sd">&gt;&gt;&gt; a = [1, 2]</span>
<span class="sd">&gt;&gt;&gt; b = [3, 4]</span>
<span class="sd">&gt;&gt;&gt; x = [a, b]</span>
<span class="sd">&gt;&gt;&gt; print(x)</span>
<span class="sd">[[1, 2], [3, 4]]</span>

<span class="sd">Sans réaffecter x (sans le faire apparaître à la gauche du signe égal</span>
<span class="sd">i.e. sans &quot;x = ...&quot; ou &quot;x[...] = ...&quot;), faites les affectations nécessaires</span>
<span class="sd">(uniquement des affectations!) pour que print(x) affiche [[3, 4], [1, 2]]</span>
<span class="sd">NB: seulement 2 affectations sont suffisantes !</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
<div class="tohide container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: references_sol.py</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="c"># initialisation :</span>

<span class="n">a</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">]</span>
<span class="n">b</span> <span class="o">=</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">]</span>
<span class="n">x</span> <span class="o">=</span> <span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>

<span class="c"># solution :</span>

<span class="n">y</span> <span class="o">=</span> <span class="n">x</span>
<span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">y</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">y</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="les-instructions-composees">
<h4>Les instructions composées<a class="headerlink" href="#les-instructions-composees" title="Permalink to this headline">¶</a></h4>
<p>Il s&#8217;agit des instructions contenant à leur tour d&#8217;autres instructions regroupées en blocs.</p>
<p>Elles contrôlent le flux de l&#8217;exécution des instructions qu&#8217;elles contiennent, c&#8217;est pourquoi on les appellent aussi <strong>structures de contrôle</strong>.</p>
<p>En Python, comme dans d&#8217;autres langages, on va trouver:</p>
<ul class="simple">
<li>des structures alternatives</li>
<li>des structures répétitives</li>
<li>des structures pour le traitement des exceptions</li>
</ul>
<p>avec quelques spécificités qui seront traitées dans une section dédiée.</p>
</div>
</div>
</div>
<div class="section" id="les-entrees-sorties-standard">
<h2>Les entrées/sorties standard<a class="headerlink" href="#les-entrees-sorties-standard" title="Permalink to this headline">¶</a></h2>
<div class="section" id="la-sortie-standard">
<h3>La sortie standard<a class="headerlink" href="#la-sortie-standard" title="Permalink to this headline">¶</a></h3>
<p>Python 2.x dispose d&#8217;une instruction <strong>print</strong> dédiée, avec une syntaxe rappelant vaguement celle des langages <em>shell</em> :</p>
<blockquote>
<div>print expr <sub>1</sub>, expr <sub>2</sub>, ..., expr <sub>n</sub></div></blockquote>
<div class="highlight-python"><div class="highlight"><pre>$ python
Python 2.7.10 (default, Sep 24 2015, 17:50:09)
[GCC 5.1.1 20150618 (Red Hat 5.1.1-4)] on linux2
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; print &quot;aaa&quot;, &quot;bbb&quot;, &quot;ccc&quot;
aaa bbb ccc
</pre></div>
</div>
<p>Cette instruction a été remplacée dans Python 3 avec une fonction portant le même nom. La nouvelle fonction est plus puissante que l&#8217;instruction qu&#8217;elle remplace:</p>
<blockquote>
<div>def print(*args, sep=&#8217; &#8216;, end=&#8217;\n&#8217;, file=None)</div></blockquote>
<p>Les paramètres nommés:</p>
<ul class="simple">
<li><strong>sep</strong> représente le séparateur entre arguments</li>
<li><strong>end</strong> représente le caractère de fin de ligne. Si on ne souhaite pas de retour à la ligne il suffit de positionner end=&#8217;&#8216;, chose impossible avec l&#8217;instruction <strong>print</strong> de la version 2.</li>
<li><strong>file</strong> représente le dispositif de sortie (la sortie standard, par défaut)</li>
</ul>
<p>Pour en savoir plus: <a class="reference external" href="http://www.python.org/dev/peps/pep-3105/">http://www.python.org/dev/peps/pep-3105/</a></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>On peut disposer de la fonction print() de <strong>Python 3.x</strong> dans un script <strong>Python 2.x</strong> en exécutant au début du script l&#8217;instruction :</p>
<blockquote>
<div><div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>
</pre></div>
</div>
</div></blockquote>
<p class="last">Cette démarche, qui sera expliquée plus tard, a été adoptée pour l&#8217;élaboration de ce support chaque fois qu&#8217;on a voulu qu&#8217;un exemple soit compatible avec les deux versions de Python.</p>
</div>
</div>
<div class="section" id="l-entree-standard">
<h3>L&#8217;entrée standard<a class="headerlink" href="#l-entree-standard" title="Permalink to this headline">¶</a></h3>
<p>Pour lire l&#8217;entrée standard il faut utiliser:</p>
<ul class="simple">
<li>raw_input([messg])=&gt;str en Python 2.x</li>
<li>input([messg])=&gt;str en Python 3.x</li>
</ul>
<div class="warning admonition">
<p class="first admonition-title">Avertissement</p>
<p>Python 2 dispose également d&#8217;une fonction appelée <em>input()</em> qui évalue à la volée le texte en entrée. Cette fonctionnalité, peu utilisée et potentiellement dangereuse en termes de sécurité a été supprimée dans la nouvelle version 3.x. et l&#8217;ancienne fonction <em>raw_input()</em> a été renommée <em>input()</em>.</p>
<p class="last"><strong>Conclusion:</strong> En Python 2 il est déconseillé d&#8217;utiliser la fonction <em>input()</em>. Utiliser <em>raw_input()</em> à la place et convertir le résultat si nécessaire.</p>
</div>
<p>La fonction affiche le message et restitue l&#8217;entrée clavier sous forme de chaîne.</p>
<p><strong>Exemple en Python 2.7.x</strong></p>
<div class="highlight-python"><div class="highlight"><pre>$ cat echo2.py
#!/usr/bin/env python

inp = raw_input(&quot;?: &quot;)
print inp
$ ./echo2.py
?: ça va?
ça va?
</pre></div>
</div>
<p><strong>Exemple en Python 3.x</strong></p>
<div class="highlight-python"><div class="highlight"><pre>$ cat echo3.py
#!/usr/bin/env python3

inp = input(&quot;?: &quot;)
print(inp)
$ ./echo3.py
?: ça va?
ça va?
</pre></div>
</div>
</div>
</div>
<div class="section" id="les-structures-de-controle">
<h2>Les structures de contrôle<a class="headerlink" href="#les-structures-de-controle" title="Permalink to this headline">¶</a></h2>
<div class="section" id="generalites">
<h3>Généralités<a class="headerlink" href="#generalites" title="Permalink to this headline">¶</a></h3>
<p>Les structures de contrôle de <strong>Python</strong> sont essentiellement les mêmes que dans la plupart des langages de programmation actuels (C/C++, Java etc.) à quelques détails près.</p>
<p>Comme dans d&#8217;autres langages, chaque structure de contrôle est identifiée par un groupe de mots clé et peut contenir un ou plusieurs blocs d&#8217;instructions.</p>
<p>La principale particularité syntaxique des structures de contrôle <strong>Python</strong> est le rôle joué par l&#8217;indentation du code qui est est obligatoire.</p>
<p>Pendant que dans d&#8217;autres langages les blocs d&#8217;instructions sont délimités par des accolades ou autres parenthèses, dans Python le bloc est identifié par un niveau d&#8217;indentation supérieur à celui de la ligne précédant le bloc (cette ligne, qui introduit le bloc, commence <strong>toujours</strong> par <strong>un mot clé</strong> et se termine <strong>toujours</strong> par <strong>&#8221;:&#8221;</strong> (deux points).</p>
<p><strong>Ilustration :</strong></p>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#include &lt;stdio.h&gt;</span>

<span class="cm">/**</span>
<span class="cm">   Exemple simple en C</span>
<span class="cm">*/</span>

<span class="kt">void</span> <span class="nf">main</span><span class="p">(){</span>
  <span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">acc</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="k">for</span><span class="p">(</span><span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="n">i</span><span class="o">&lt;</span><span class="mi">10</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="n">i</span><span class="o">%</span><span class="mi">2</span><span class="o">==</span><span class="mi">0</span><span class="p">){</span>
      <span class="n">acc</span> <span class="o">+=</span> <span class="n">i</span><span class="p">;</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="n">printf</span><span class="p">(</span><span class="s">&quot;Sum: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">acc</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<div class="highlight-c"><div class="highlight"><pre><span class="cp">#</span>
<span class="cp"># Le même exemple en R</span>
<span class="cp">#</span>

<span class="n">acc</span> <span class="o">&lt;-</span> <span class="mi">0</span>
<span class="k">for</span><span class="p">(</span><span class="n">i</span> <span class="n">in</span> <span class="mi">0</span><span class="o">:</span><span class="mi">9</span><span class="p">){</span>
    <span class="k">if</span><span class="p">(</span><span class="n">i</span><span class="o">%%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">){</span>
      <span class="n">acc</span> <span class="o">&lt;-</span> <span class="n">acc</span> <span class="o">+</span> <span class="n">i</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="n">print</span><span class="p">(</span><span class="n">cat</span><span class="p">(</span><span class="s">&quot;Sum: &quot;</span><span class="p">,</span> <span class="n">acc</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#</span>
<span class="c"># Le même exemple en Python</span>
<span class="c">#</span>
<span class="n">acc</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">i</span><span class="o">%</span><span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">acc</span> <span class="o">+=</span> <span class="n">i</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;Sum: </span><span class="si">%d</span><span class="se">\n</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">acc</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Exercice</strong></p>
<div class="myexercice container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: simplex.py</span>

<span class="sd">A première vue, Python présente-t-il des ressemblances avec votre langage favori?</span>

<span class="sd">Pouvez-vous écrire, en vous inspirant de l&#39;ilustration précédente, un programme simple</span>
<span class="sd">qui affiche les 12 premiers termes d&#39;une suite de nombres dont chaque terme</span>
<span class="sd">est égal à la somme des deux précédents (i.e. une suite de Fibonacci).</span>

<span class="sd">Utilisez l&#39;initialisation suivante:</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">first</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">second</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">print</span><span class="p">(</span><span class="n">first</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">second</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="tohide container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: simplex_sol.py</span>
<span class="sd">Solution naïve :</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">first</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">second</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">print</span><span class="p">(</span><span class="n">first</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">second</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">tmp</span> <span class="o">=</span> <span class="n">first</span> <span class="o">+</span> <span class="n">second</span>
    <span class="n">first</span> <span class="o">=</span> <span class="n">second</span>
    <span class="n">second</span> <span class="o">=</span> <span class="n">tmp</span>
    <span class="k">print</span><span class="p">(</span><span class="n">second</span><span class="p">)</span>
    
</pre></div>
</div>
</div>
<div class="tohide container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: simplex_sol.py</span>
<span class="sd">En utilisant l&#39;affectation multiple :</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">first</span> <span class="o">=</span> <span class="mi">1</span>
<span class="n">second</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">print</span><span class="p">(</span><span class="n">first</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">second</span><span class="p">)</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">10</span><span class="p">):</span>
    <span class="n">first</span><span class="p">,</span> <span class="n">second</span> <span class="o">=</span> <span class="n">second</span><span class="p">,</span> <span class="n">first</span> <span class="o">+</span> <span class="n">second</span>
    <span class="k">print</span><span class="p">(</span><span class="n">second</span><span class="p">)</span>
    
</pre></div>
</div>
</div>
</div>
<div class="section" id="structures-alternatives-if-elif-else">
<h3>Structures alternatives (if-elif-else)<a class="headerlink" href="#structures-alternatives-if-elif-else" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre>if &lt;expr-0&gt;:
    &lt;statement&gt;
    # ...
    &lt;statement&gt;
elif &lt;expr-1&gt;: #optionnel
    &lt;statement&gt;
    # ...
    &lt;statement&gt;
# autres blocs elif optionnels ...
elif &lt;expr-i&gt;:
    &lt;statement&gt;
    # ...
    &lt;statement&gt;
else: #optionnel
    &lt;statement&gt;
    # ...
    &lt;statement&gt;
</pre></div>
</div>
<p>Pour illustration, un exemple (artificiellement compliqué), qui implique deux niveaux de <strong>if-elif-else</strong> :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s">&quot;x=&quot;</span><span class="p">))</span>
<span class="n">y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s">&quot;y=&quot;</span><span class="p">))</span>
<span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;1er quadrant (+,+)&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;4ème quadrant (+,-)&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;abscisse, x strictement positif&quot;</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;2ème quadrant (+,-)&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;3ème quadrant (-,-)&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;abscisse, x strictement négatif&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;ordonnée, y strictement positif&quot;</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;ordonnée, y strictement négatif&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;origine&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Dans certains cas, si les blocs d&#8217;instructions contenus dans un <strong>if-elif-else</strong> ne contiennent que des instructions simples, <strong>et si cela améliore la lisibilité</strong>, on peut écrire de manière plus compacte:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s">&quot;x=&quot;</span><span class="p">))</span>
<span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span> <span class="k">print</span><span class="p">(</span><span class="s">&quot;x strictement positif:&quot;</span><span class="p">);</span><span class="n">mod</span> <span class="o">=</span> <span class="n">x</span>
<span class="k">elif</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span> <span class="k">print</span><span class="p">(</span><span class="s">&quot;x strictement négatif&quot;</span><span class="p">);</span> <span class="n">mod</span> <span class="o">=</span> <span class="o">-</span><span class="n">x</span>
<span class="k">else</span><span class="p">:</span> <span class="k">print</span><span class="p">(</span><span class="s">&quot;x == 0&quot;</span><span class="p">);</span> <span class="n">mod</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;module:&quot;</span><span class="o">+</span><span class="nb">str</span><span class="p">(</span><span class="n">mod</span><span class="p">))</span>
</pre></div>
</div>
<div class="section" id="expressions-ternaires">
<h4>Expressions ternaires<a class="headerlink" href="#expressions-ternaires" title="Permalink to this headline">¶</a></h4>
<p>Des nombreux langages (C/C++, Java, php,...) acceptent les expressions dites &#8220;ternaires&#8221; qui sont de la forme <tt class="docutils literal"><span class="pre">test</span> <span class="pre">?</span> <span class="pre">expression1</span> <span class="pre">:</span> <span class="pre">expression2</span></tt>.
Python permet d&#8217;écrire la même chose avec une syntaxe différente : <tt class="docutils literal"><span class="pre">expression1</span> <span class="pre">if</span> <span class="pre">test</span> <span class="pre">else</span> <span class="pre">expression2</span></tt></p>
<p><strong>Exemple:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mod_x</span> <span class="o">=</span> <span class="n">x</span> <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="o">-</span><span class="n">x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">mod_x</span>
<span class="go">10</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="exceptions">
<h3>Exceptions<a class="headerlink" href="#exceptions" title="Permalink to this headline">¶</a></h3>
<p><em>&#8220;Errors should never pass silently. (le Zen)&#8221;</em></p>
<p>Contrairement aux erreurs de syntaxe qui sont détectées avant le début de l&#8217;exécution, les anomalies détectées pendant l&#8217;exécution activent des mécanismes spécifiques qui modifient le cours de l&#8217;exécution, qui ne peut pas se dérouler normalement.</p>
<p>On va parler dans ce cas d&#8217;<strong>exceptions</strong> :</p>
<div class="highlight-python"><div class="highlight"><pre>&gt;&gt;&gt; # In the face of ambiguity,
&gt;&gt;&gt; # refuse the temptation to guess. (le Zen)
&gt;&gt;&gt; &quot;Python&quot;+3
Traceback (most recent call last):
File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
TypeError: cannot concatenate &#39;str&#39; and &#39;int&#39; objects
</pre></div>
</div>
<p>Les informations affichées sont:</p>
<ul class="simple">
<li>le contenu de la pile d&#8217;exécution au moment de la levée de l&#8217;exception</li>
<li>le type de l&#8217;exception levée</li>
<li>une description du problème rencontré</li>
</ul>
<p>Au déclenchement d&#8217;une exception, le cours de l&#8217;exécution change (c&#8217;est pourquoi on a choisi de traiter la gestion des exceptions avec les structures de contrôle). L&#8217;exécution de la séquence courante s&#8217;arrête et les différentes strates de l&#8217;exécution sont remontées jusqu&#8217;à :</p>
<ul class="simple">
<li>la rencontre d&#8217;un bloc <strong>try-except</strong> qui traite l&#8217;exception levée</li>
<li>la sortie du programme, en absence du dit bloc</li>
</ul>
<p>Pour gérer les exceptions, un programme a la possibilité de:</p>
<ol class="arabic simple">
<li>arrêter la propagation d&#8217;une exception par un bloc <strong>try-except</strong></li>
<li>lever des exceptions propres ou laisser remonter des exceptions préalablement &#8220;capturées&#8221; (par l&#8217;instruction <em>raise</em>)</li>
<li>définir ses propres types d&#8217;exceptions</li>
</ol>
<div class="section" id="le-bloc-try-except-finally">
<h4>Le bloc  <strong>try-except-finally</strong><a class="headerlink" href="#le-bloc-try-except-finally" title="Permalink to this headline">¶</a></h4>
<p>C&#8217;est une construction de la forme:</p>
<div class="highlight-python"><div class="highlight"><pre>try:
    ... # code à surveiller
    ... # susceptible de lever une exception
except Exception_1 as instance_1:
    ... # s&#39;exécute si une exception
    ... de type Exception_1 est levée
except Exception_2 as instance_2:
    ... # s&#39;exécute si une exception
    ... de type Exception_2 est levée
... # autres blocs except, éventuellement
else:
    ... # si présent, s&#39;exécute si aucune exception n&#39;a été levée
finally:
    ... # si présent, s&#39;exécute toujours (s&#39;il y a exception ou pas)
</pre></div>
</div>
<p><strong>NB:</strong> Après un bloc <strong>try</strong> , au moins un bloc <strong>except</strong>  <cite>ou</cite> le bloc <strong>finally</strong> doit être présent. On peut donc avoir plusieurs cas:</p>
<ul class="simple">
<li>try-except</li>
<li>try-finally</li>
<li>try-except-finally</li>
</ul>
</div>
<div class="section" id="traitement-des-exceptions">
<h4>Traitement des exceptions<a class="headerlink" href="#traitement-des-exceptions" title="Permalink to this headline">¶</a></h4>
<p>Le bloc <em>except</em> peut prendre plusieurs formes en fonction du traitement envisagé:</p>
<div class="highlight-python"><div class="highlight"><pre>try:
    ...
except:
    print(&quot;Erreur...mais on ne sait pas laquelle...&quot;)

try:
    ...
except Exception:
    print(&quot;Erreur...mais on ne sait pas laquelle...&quot;)

try:
    ...
except Exception as err: # toutes les erreurs sont traitées
    print(type(err)) # mais l&#39;objet err apporte + d&#39;informations par son type
    print(err.args) # et éventuellement par son attribut args


try:
    ...
except TypeError [as err]:
    ... # seulement les exceptions TypeError seront traitées
    ... # toutes les autres vont remonter

try:
    ...
except TypeError [as err]: # un type d&#39;exception par bloc
    ... 
except ZeroDivisionError [as err]:
    ...

try:
    ...
except (TypeError, ZeroDivisionError) [as err]:
    ... # plusieurs types exceptions traitées en un seul bloc
</pre></div>
</div>
</div>
<div class="section" id="lever-des-exceptions">
<h4>Lever des exceptions<a class="headerlink" href="#lever-des-exceptions" title="Permalink to this headline">¶</a></h4>
<p>On utilisera l&#8217;instruction <em>raise</em>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">x</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s">&quot;x=&quot;</span><span class="p">))</span>
<span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;x must be positive&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;x is positive&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Les arguments du constructeur de l&#8217;exception levée par <em>raise</em> se retrouvent dans l&#8217;attribut <em>args</em> de l&#8217;objet récupérée par <em>except</em> :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="c"># simule un traitement levant une exception</span>
<span class="gp">... </span>    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;arg1&quot;</span><span class="p">,</span><span class="s">&quot;arg2&quot;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">except</span> <span class="ne">ValueError</span> <span class="k">as</span> <span class="n">obj</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="n">obj</span><span class="o">.</span><span class="n">args</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">(&#39;arg1&#39;, &#39;arg2&#39;)</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p><strong>NB:</strong> Un bloc <em>except</em> peut laisser remonter une exception après avoir exploité l&#8217;information fournie. Par exemple, un serveur web peut utiliser le bloc <em>except</em> pour récupérer et écrire l&#8217;erreur dans les fichiers de journalisation (logs) et en même temps la laisser remonter pour que les couches supérieures de l&#8217;application qui pourraient utiliser aussi (pour la communiquer à l&#8217;interface utilisateur, par exemple) :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">try</span><span class="p">:</span>
    <span class="s">&quot;café&quot;</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s">&quot;ascii&quot;</span><span class="p">)</span> <span class="c"># simule un traitement provoquant une anomalie</span>
<span class="k">except</span> <span class="ne">UnicodeEncodeError</span> <span class="k">as</span> <span class="n">err</span><span class="p">:</span>
    <span class="n">write_log</span><span class="p">(</span><span class="n">err</span><span class="p">)</span>
    <span class="k">raise</span>
</pre></div>
</div>
</div>
<div class="section" id="definir-des-exceptions">
<h4>Définir des exceptions<a class="headerlink" href="#definir-des-exceptions" title="Permalink to this headline">¶</a></h4>
<p>Les exceptions sont des classes héritant directement ou indirectement de la classe prédéfinie <em>Exception</em>. Le chapitre sur le modèle objet de Python expliquera en détail comment définir ses propres classes.</p>
<p>Néanmoins, il convient de préciser que les exceptions prédéfinies sont déjà nombreuses et elles couvrent la plupart des situations pratiques. Plus de détails : <a class="reference external" href="http://docs.python.org/3.5/library/exceptions.html#exception-hierarchy">http://docs.python.org/3.5/library/exceptions.html#exception-hierarchy</a></p>
</div>
<div class="section" id="exercice">
<h4>Exercice<a class="headerlink" href="#exercice" title="Permalink to this headline">¶</a></h4>
<div class="myexercice container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: interval.py</span>

<span class="sd">Ecrire un petit programme qui :</span>

<span class="sd">a) demande la saisie d&#39;un entier compris dans [-10, 10]</span>
<span class="sd">b) convertit le résultat de la saisie avec int() ET il  traite l&#39;exception</span>
<span class="sd">   ValueError en cas de saisie incorrecte en affichant un message approprié.</span>
<span class="sd">   En cas de saisie incorrecte l&#39;exécution s&#39;arrête, sinon :</span>
<span class="sd">c) vérifie si la valeur saisie est dans l&#39;intervale  [-10,10] et</span>
<span class="sd">   affiche le résultat de ce test.</span>
<span class="sd">&quot;&quot;&quot;</span>   
</pre></div>
</div>
</div>
<div class="tohide container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: interval_sol.py</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">prompt</span> <span class="o">=</span> <span class="s">&quot;Get an integer in [-10,10]&quot;</span>
<span class="n">num_str</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span> <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="o">.</span><span class="n">major</span><span class="o">==</span><span class="mi">3</span> <span class="k">else</span> <span class="nb">raw_input</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span>
<span class="k">try</span><span class="p">:</span>
    <span class="n">num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_str</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="n">num_str</span><span class="p">,</span> <span class="s">&quot; is not a number&quot;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span> <span class="c"># try..else</span>
    <span class="k">if</span> <span class="n">num</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">10</span> <span class="ow">or</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="s">&quot; is NOT in  [-10,10]&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="s">&quot; IS in  [-10,10]&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="la-structure-with">
<h3>La structure <strong>with</strong><a class="headerlink" href="#la-structure-with" title="Permalink to this headline">¶</a></h3>
<p>Cette structure est une application directe de <strong>try-except-finally</strong>. Utilisée beaucoup pour la manipulation des fichiers, elle garantit la libération de la ressource même si l&#8217;opération se passe mal. Ainsi, la structure:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&quot;/tmp/fich.txt&quot;</span><span class="p">,</span><span class="s">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fd</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">fd</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;some text&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>qui permet l&#8217;ouverture d&#8217;un fichier suivie d&#8217;une opération d&#8217;écriture peut être résumée, (en simplifiant un peu...), par la séquence:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">fd</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&quot;/tmp/fich.txt&quot;</span><span class="p">,</span><span class="s">&quot;w&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">fd</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;some text&quot;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">finally</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">fd</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<p>L&#8217;utilisateur peut définir ses propres objets <em>&#8220;with  compatibles&#8221;</em> appelés &#8220;gestionnaires de context&#8221; (<strong>context managers</strong>), à condition de définir deux méthodes &#8220;magiques&#8221; (qui n&#8217;ont pas vocation à être appelées dans le programme, car en principe destinées aux mécanismes internes de l&#8217;interpréteur):</p>
<ul class="simple">
<li><em>__enter__()</em></li>
<li><em>__exit__()</em></li>
</ul>
<p>Ces deux méthodes participent au protocole suivant, qui a pour but de garantir que si <em>__enter__()</em> s&#8217;exécute avec succès alors <em>__exit__()</em>  sera toujours exécutée, même en cas d&#8217;exception survenue à l&#8217;exécution du bloc:</p>
<div class="highlight-python"><div class="highlight"><pre>with expression [as var]:
    code
</pre></div>
</div>
<ol class="arabic simple">
<li><em>expression</em> est évaluée, le résultat étant un objet <strong>context manager</strong></li>
<li>la méthode <em>__enter__()</em> est invoquée (sur l&#8217;objet  <strong>context manager</strong>). Le retour de <em>__enter__()</em> est affecté à la variable <strong>var</strong> si elle est fournie (i.e. la partie &#8220;[as var]&#8221; est présente).</li>
<li>le <strong>code</strong> est exécuté dans un bloc <strong>try-except-finally</strong></li>
<li>la méthode <strong>__exit__()</strong> est appelée. En cas d&#8217;exception levée à l&#8217;exécution de <em>code</em> (3) l&#8217;appel contiendra trois informations décrivant l&#8217;exception: type, valeur, traceback. Dans ce cas, <em>__exit__()</em> peut retourner:<ul>
<li><strong>False</strong> pour provoquer la propagation de l&#8217;exception par l&#8217;appelant</li>
<li><strong>True</strong> pour empêcher la propagation de l&#8217;exception</li>
</ul>
</li>
</ol>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>A partir de <strong>Python 3.1</strong>, l&#8217;instruction <strong>with</strong> peut déclarer plusieurs contextes:</p>
<div class="highlight-python"><div class="highlight"><pre>with expression1 [as var1], expression2 [as var2], ...:
    code
</pre></div>
</div>
<p>Ce qui est équivalent à:</p>
<div class="last highlight-python"><div class="highlight"><pre>with expression1 [as var1]:
    with expression2 [as var2]:
       ....
       code
</pre></div>
</div>
</div>
</div>
<div class="section" id="structure-repetitives-while-else-for-else">
<h3>Structure répétitives (<strong>while-else</strong>, <strong>for-else</strong>)<a class="headerlink" href="#structure-repetitives-while-else-for-else" title="Permalink to this headline">¶</a></h3>
<div class="section" id="la-structure-while-else">
<h4>La structure <strong>while-else</strong><a class="headerlink" href="#la-structure-while-else" title="Permalink to this headline">¶</a></h4>
<p>L&#8217;instruction <strong>while</strong>, ressemble beaucoup à son homonyme dans les autres langages :</p>
<div class="highlight-python"><div class="highlight"><pre>while condition:
   instruction 1
   instruction 2
   ...
else: # optionnel
   ...
   ...
</pre></div>
</div>
<p>Le bloc (<em>instruction 1, instruction 2, ...</em>) s&#8217;exécute tant que la <em>condition</em> reste vraie:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">x</span><span class="o">=</span><span class="mi">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">while</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="gp">... </span>    <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="gp">...</span>
<span class="go">0</span>
<span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
<span class="go">4</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Python dispose, comme d&#8217;autres langages, de deux instructions permettant le contrôle de l&#8217;exécution des boucles, à utiliser dans le bloc <strong>while</strong> :</p>
<ul class="simple">
<li><strong>break</strong> permettant la sortie de la boucle avant la fin (i.e. avant que la condition ne devienne fausse)</li>
<li><strong>continue</strong> qui permet de passer directement à l&#8217;itération suivante</li>
</ul>
<p>La vraie spécificité est le bloc <strong>else</strong> qui préserve la même sémantique que dans un <strong>if-else</strong>, autrement dit, il s&#8217;exécute quand la condition est fausse. Dans un <em>while</em> la condition est nécessairement fausse à la sortie de la boucle, si la sortie se fait <strong>normalement</strong>, sans recours à l&#8217;instruction <strong>break</strong> .</p>
<p>Illustration:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">to_find</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="nb">input</span><span class="p">(</span><span class="s">&quot;find:&quot;</span><span class="p">))</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">0</span>
<span class="k">while</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="mi">10</span><span class="p">:</span>
    <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="n">to_find</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;found&quot;</span><span class="p">)</span>
        <span class="k">break</span>
    <span class="n">x</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="k">else</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;not found&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="id1">
<h4>Exercice<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h4>
<div class="myexercice container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: loop.py</span>

<span class="sd">Ecrire un petit programme qui, en utilisant une boucle infinie ainsi que la</span>
<span class="sd">séquence de code développée pour l&#39;exercice précédent (interval.py) :</span>

<span class="sd">a) demande la saisie d&#39;un entier compris dans [-10,10]</span>

<span class="sd">b) si la chaîne saisie est vide il quitte la boucle, sinon il</span>
<span class="sd">   convertit le résultat de la saisie avec int() ET il  traite l&#39;exception</span>
<span class="sd">   ValueError en cas de saisie incorrecte en affichant un message approprié </span>
<span class="sd">   suivi du retour à (a). </span>

<span class="sd">c) vérifie si la valeur saisie est dans l&#39;intervale  [-10,10] et</span>
<span class="sd">   affiche le résultat de ce test, puis retour à (a)</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
<div class="tohide container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: loop2_sol.py</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">prompt</span> <span class="o">=</span> <span class="s">&quot;Get an integer in [-10,10]&quot;</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">num_str</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span> <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="o">.</span><span class="n">major</span><span class="o">==</span><span class="mi">3</span> <span class="k">else</span> <span class="nb">raw_input</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">num_str</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;Bye!&quot;</span><span class="p">)</span>
        <span class="k">break</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_str</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">num_str</span><span class="p">,</span> <span class="s">&quot; is not a number&quot;</span><span class="p">)</span>
        <span class="k">continue</span>
    <span class="k">if</span> <span class="n">num</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">10</span> <span class="ow">or</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="s">&quot; is NOT in  [-10,10]&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="s">&quot; IS in  [-10,10]&quot;</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;next loop&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="la-structure-for-in">
<h4>La structure <strong>for-in</strong><a class="headerlink" href="#la-structure-for-in" title="Permalink to this headline">¶</a></h4>
<p>La forme générale :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">:</span>
   <span class="o">...</span>
   <span class="o">...</span>
<span class="k">else</span><span class="p">:</span> <span class="c"># optionnel</span>
   <span class="o">...</span>
   <span class="o">...</span>
</pre></div>
</div>
<p>Propriétés en commun avec l&#8217;instruction <strong>while</strong> :</p>
<ul class="simple">
<li>la possibilité d&#8217;utiliser les instructions <em>break</em> et <em>continue</em></li>
<li>le bloc optionnel <strong>else</strong> avec une sémantique équivalente</li>
</ul>
<p>On appelle <strong>&#8220;itérable&#8221;</strong> un objet qui permet l&#8217;accès séquentiel à un ensemble d&#8217;autres objets qui le composent ou qu&#8217;il crée à la demande, autrement dit un objet qui supporte l&#8217;itération.</p>
<p>C&#8217;est le cas de tous les objets <strong>conteneurs</strong>, autrement dit des objets contenant d&#8217;autres objets (listes, chaînes etc.), mais pas seulement (plus de détails dans la section sur le <strong>générateurs</strong>).</p>
<ul class="simple">
<li>Un objet <strong>itérable</strong> doit implémenter la méthode magique <em>__iter__()</em>. Cette méthode sera exécutée à chaque invocation de la primitive <em>iter()</em> pour retourner un <strong>itérateur</strong> qui est une sorte d&#8216;&#8220;objet-curseur&#8221;. A chaque appel de la méthode <em>__iter__()</em> sur un <strong>itérable</strong>, un <strong>itérateur</strong> nouveau est retourné.</li>
<li>Un <strong>itérateur</strong> doit implémenter :<ul>
<li><em>next()</em> (renommée en  <strong>__next__()</strong> en Python 3) qui renvoie à chaque appel l&#8217;élément &#8220;suivant&#8221;, s&#8217;il y en a un, ou lève l&#8217;exception <strong>StopIteration</strong> dans le cas contraire.</li>
</ul>
</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Les itérateurs implémentent également  <em>__iter__()</em> qui renvoie l&#8217;itérateur lui même (et non pas un objet nouveau à chaque appel, comme pour les itérables!). Cela assure une interface commune itérateurs - itérables, mais avec un comportement</p>
</div>
<p>Illustration:</p>
<div class="highlight-python"><div class="highlight"><pre>&gt;&gt;&gt; l=[1,2,3]
&gt;&gt;&gt; l.__iter__
&lt;method-wrapper &#39;__iter__&#39; of list object at 0x7f4020da0830&gt;
&gt;&gt;&gt; i = iter(l)
&gt;&gt;&gt; next(i)
1
&gt;&gt;&gt; next(i)
2
&gt;&gt;&gt; next(i)
3
&gt;&gt;&gt; next(i)
Traceback (most recent call last):
File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
StopIteration
&gt;&gt;&gt;
</pre></div>
</div>
<p><strong>NB:</strong> Dans l&#8217;exemple précédent <em>next(i)</em> est une primitive du langage (la même dans les deux versions) qui se chargera de l&#8217;appel de <em>i.next()</em> (Python 2.x) ou de <em>i.__next__()</em> (Python 3.x).</p>
<p><strong>Exercice</strong></p>
<div class="myexercice container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: iter_next.py</span>

<span class="sd">Soit la liste :</span>

<span class="sd">lst = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]</span>

<span class="sd">A) Appeler la primitive iter() sur la liste pour obtenir</span>
<span class="sd">un itérateur:</span>

<span class="sd">iterator1 = iter(lst)</span>

<span class="sd">B) Appelez next() 2-3 fois avec iterator1 et observer à chaque fois le résultat</span>
<span class="sd">next(iterator1)</span>
<span class="sd">next(iterator1)</span>

<span class="sd">C) répéter (A) pour obtenir :</span>
<span class="sd">iterator2 = iter(lst)</span>
<span class="sd">D) répéter (B) sur iterator2</span>

<span class="sd">Qu&#39;est-ce que vous observez ?</span>

<span class="sd">E) appeler maintenant iter() une nouvelle fois mais avec iterator1 (ou avec iterator2, au choix) :</span>

<span class="sd">iterator3 = iter(iterator1)</span>

<span class="sd">F) Appelez next() plusieurs fois avec iterator3</span>

<span class="sd">next(iterator3)</span>
<span class="sd">next(iterator3)</span>

<span class="sd">Qu&#39;est-ce que vous observez ?</span>

<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
</div>
<div class="tohide container">
<div class="highlight-python"><div class="highlight"><pre>&quot;&quot;&quot;
fichier: iter_next_sol.py
&quot;&quot;&quot;

&gt;&gt;&gt; lst = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]
&gt;&gt;&gt; iterator1 = iter(lst)
&gt;&gt;&gt; next(iterator1) # parcours à partir du 1er elt.
1
&gt;&gt;&gt; next(iterator1)
2
&gt;&gt;&gt; next(iterator1)
3
&gt;&gt;&gt; iterator2 = iter(lst)
&gt;&gt;&gt; next(iterator2) #iterator2 reprends depuis le début
1
&gt;&gt;&gt; next(iterator2)
2
&gt;&gt;&gt; next(iterator2)
3
&gt;&gt;&gt; iterator3 = iter(iterator1) #itérateur d&#39;un itérateur...
&gt;&gt;&gt; next(iterator3) # iterator3 continue la séquence de iterator1
4
&gt;&gt;&gt; next(iterator3)
5
&gt;&gt;&gt; next(iterator3)
6
&gt;&gt;&gt; id(iterator1) # car iterator1
140672911907976
&gt;&gt;&gt; id(iterator2)
140672911908088
&gt;&gt;&gt; id(iterator3) # et iterator3, c&#39;est la même chose
140672911907976
&gt;&gt;&gt; 
</pre></div>
</div>
</div>
<p>Pour revenir à l&#8217;instruction <strong>for</strong> :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">for</span> <span class="n">element</span> <span class="ow">in</span> <span class="n">iterable</span><span class="p">:</span>
   <span class="o">...</span> <span class="c"># bloc</span>
   <span class="o">...</span> <span class="c"># d&#39;instructions</span>
</pre></div>
</div>
<p>elle est, dans les grandes lignes, équivalente à:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">i</span> <span class="o">=</span> <span class="nb">iter</span><span class="p">(</span><span class="n">iterable</span><span class="p">)</span>
<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
   <span class="k">try</span><span class="p">:</span>
      <span class="n">element</span> <span class="o">=</span> <span class="nb">next</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
   <span class="k">except</span> <span class="ne">StopIteration</span><span class="p">:</span>
      <span class="k">break</span>
   <span class="o">...</span> <span class="c"># bloc</span>
   <span class="o">...</span> <span class="c"># d&#39;instructions</span>
</pre></div>
</div>
<p>Exemple basique:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]:</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="n">elt</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Python ne possède pas d&#8217;instruction équivalente à <tt class="docutils literal"><span class="pre">for(i=0;i&lt;max;i++){\...}</span></tt> présente dans le langage <em>C</em>  et dans bien d&#8217;autres. Dans la section suivante on va voir un idiome qui permet une écriture équivalente.</p>
</div>
</div>
<div class="section" id="id2">
<h4>Exercice<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h4>
<div class="myexercice container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: loop2.py</span>

<span class="sd">Modifier le programme de l&#39;exercice &quot;loop.py&quot; pour qu&#39;il :</span>

<span class="sd">a) [inchangé] demande la saisie d&#39;un entier compris dans [-10,10] </span>

<span class="sd">b) [inchangé] si la chaîne saisie est vide il quitte la boucle, sinon</span>
<span class="sd">   il convertit le résultat de la saisie avec int() ET il  traite l&#39;exception</span>
<span class="sd">   ValueError en cas de saisie incorrecte en affichant un message approprié</span>
<span class="sd">   suivi du retour à (a). </span>

<span class="sd">c) [à modifier] vérifie que la valeur saisie est dans l&#39;intervale  [-10,10] et</span>
<span class="sd">   affiche un message approprié suivi du retour à (a), sinon :</span>

<span class="sd">d) [à implémenter] la liste L contient plusieurs sous-listes à 2 éléments</span>
<span class="sd">   définissant des intervales. Vérifier l&#39;appartenance de la valeur saisie à un</span>
<span class="sd">   des intervales. Affichez un message approprié en cas de succès, un autre en</span>
<span class="sd">   cas d&#39;échec, puis retour à (a) . Utiliser la clause else du for pour traiter</span>
<span class="sd">   le cas de la recherche infructueuse.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">L</span> <span class="o">=</span> <span class="p">[[</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="tohide container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: loop2_sol.py</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">L</span> <span class="o">=</span> <span class="p">[[</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">]]</span>

<span class="n">prompt</span> <span class="o">=</span> <span class="s">&quot;Get an integer in [-10,10]&quot;</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">num_str</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span> <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="o">.</span><span class="n">major</span><span class="o">==</span><span class="mi">3</span> <span class="k">else</span> <span class="nb">raw_input</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">num_str</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;Bye!&quot;</span><span class="p">)</span>
        <span class="k">break</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_str</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">num_str</span><span class="p">,</span> <span class="s">&quot; is not a number&quot;</span><span class="p">)</span>
        <span class="k">continue</span>
    <span class="k">if</span> <span class="n">num</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">10</span> <span class="ow">or</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="s">&quot; is NOT in  [-10,10]&quot;</span><span class="p">)</span>
        <span class="k">continue</span>
    <span class="k">for</span> <span class="n">interval</span> <span class="ow">in</span> <span class="n">L</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">num</span> <span class="o">&gt;=</span> <span class="n">interval</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">and</span> <span class="n">num</span> <span class="o">&lt;=</span> <span class="n">interval</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
            <span class="k">print</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="s">&quot;found in [&quot;</span><span class="p">,</span><span class="n">interval</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">,</span> <span class="s">&quot;, &quot;</span><span class="p">,</span> <span class="n">interval</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s">&quot;]&quot;</span><span class="p">)</span>
            <span class="k">break</span>
    <span class="k">else</span><span class="p">:</span> <span class="c"># for..else</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;interval not found for &quot;</span><span class="p">,</span> <span class="n">num</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;next loop&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p>Une écriture légèrement différente, plus &#8220;pythonique&#8221;:</p>
<div class="tohide container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: loop2_sol2.py</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">L</span> <span class="o">=</span> <span class="p">[[</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span> <span class="o">-</span><span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">3</span><span class="p">,</span> <span class="mi">5</span><span class="p">],</span> <span class="p">[</span><span class="mi">6</span><span class="p">,</span> <span class="mi">8</span><span class="p">]]</span>

<span class="n">prompt</span> <span class="o">=</span> <span class="s">&quot;Get an integer in [-10,10]&quot;</span>

<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">num_str</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span> <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="o">.</span><span class="n">major</span><span class="o">==</span><span class="mi">3</span> <span class="k">else</span> <span class="nb">raw_input</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">num_str</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;Bye!&quot;</span><span class="p">)</span>
        <span class="k">break</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">num</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">num_str</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">num_str</span><span class="p">,</span> <span class="s">&quot; is not a number&quot;</span><span class="p">)</span>
        <span class="k">continue</span>
    <span class="k">if</span> <span class="n">num</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">10</span> <span class="ow">or</span> <span class="n">num</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="s">&quot; is NOT in  [-10,10]&quot;</span><span class="p">)</span>
        <span class="k">continue</span>
    <span class="k">for</span> <span class="n">min_</span><span class="p">,</span> <span class="n">max_</span> <span class="ow">in</span> <span class="n">L</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">num</span> <span class="o">&gt;=</span> <span class="n">min_</span> <span class="ow">and</span> <span class="n">num</span> <span class="o">&lt;=</span> <span class="n">max_</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="n">num</span><span class="p">,</span> <span class="s">&quot;found in [&quot;</span><span class="p">,</span> <span class="n">min_</span><span class="p">,</span> <span class="s">&quot;, &quot;</span><span class="p">,</span> <span class="n">max_</span><span class="p">,</span> <span class="s">&quot;]&quot;</span><span class="p">)</span>
            <span class="k">break</span>
    <span class="k">else</span><span class="p">:</span> <span class="c"># for..else</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;interval not found for &quot;</span><span class="p">,</span> <span class="n">num</span><span class="p">)</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;next loop&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>
</div>
<div class="section" id="le-types-de-base">
<h2>Le types de base<a class="headerlink" href="#le-types-de-base" title="Permalink to this headline">¶</a></h2>
<p>Il s&#8217;agit des types prédéfinis dans Python et intégrés dans la syntaxe du langage:</p>
<ul class="simple">
<li>types numériques</li>
<li>conteneurs (types itérables)</li>
<li>types des constantes nommées</li>
<li>le type <strong>file</strong></li>
</ul>
<div class="section" id="les-types-numeriques">
<h3>Les types numériques<a class="headerlink" href="#les-types-numeriques" title="Permalink to this headline">¶</a></h3>
<p>Permettent de représenter les nombres entiers, réels (virgule flottante), complexes et décimaux.</p>
<p>Les entiers et les réels ont beaucoup de points communs avec leurs équivalents en <strong>C</strong> .</p>
<div class="section" id="les-entiers">
<h4>Les entiers<a class="headerlink" href="#les-entiers" title="Permalink to this headline">¶</a></h4>
<p>En <strong>Python 2</strong> il y a deux types entiers signés:</p>
<ul class="simple">
<li>Les <strong>int</strong> sont représentés sur 32 ou 64 bits selon le processeur, avec la même représentation que le type <em>int</em> du langage <strong>C</strong> , la plage de représentation étant [-2 <sup>arch</sup>, 2 <sup>arch</sup> - 1] avec arch = 32-1 ou arch = 64-1 (le <em>-1</em> étant dû au bit de signe).</li>
<li>Les <strong>long</strong> sont utilisés pour représenter les entiers situés à l&#8217;extérieur de cet intervalle. Leur plage de représentation est illimitée.</li>
</ul>
<p>L&#8217;interpréteur choisit automatiquement le bon type pour représenter les entiers:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Python 2.7.x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">&lt;type &#39;int&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="mi">9223372036854775808</span><span class="p">)</span> <span class="c"># i.e. 2 ** 63</span>
<span class="go">&lt;type &#39;long&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="o">-</span><span class="mi">9223372036854775808</span><span class="p">)</span> <span class="c"># i.e. -(2 ** 63)</span>
<span class="go">&lt;type &#39;int&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="mi">9223372036854775807</span><span class="p">)</span>
<span class="go">&lt;type &#39;int&#39;&gt;</span>
</pre></div>
</div>
<p>En <strong>Python 3</strong> il y a un type unique pour les entiers:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Python 3.x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">&lt;class &#39;int&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="mi">9223372036854775808</span><span class="p">)</span>
<span class="go">&lt;class &#39;int&#39;&gt;</span>
</pre></div>
</div>
<div class="warning admonition">
<p class="first admonition-title">Avertissement</p>
<blockquote class="last">
<div>Des différences de comportement existent à ce niveau entre les versions 2 et 3 du langage:</div></blockquote>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Python 2.7</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="mi">63</span><span class="p">,</span> <span class="nb">int</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">isinstance</span><span class="p">(</span><span class="mi">2</span><span class="o">**</span><span class="mi">63</span><span class="p">,</span> <span class="nb">long</span><span class="p">)</span>
<span class="go">True</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>&gt;&gt;&gt; # Python 3.*
...
&gt;&gt;&gt; isinstance(1, int)
True
&gt;&gt;&gt; isinstance(2**63, int)
True
&gt;&gt;&gt; isinstance(2**63, long)
Traceback (most recent call last):
File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
NameError: name &#39;long&#39; is not defined
&gt;&gt;&gt;
</pre></div>
</div>
<p>Comme d&#8217;autres langages, Python supporte plusieurs notations pour les entiers, pratiquement les mêmes que celles de C/C++ et Java :</p>
<table border="1" class="docutils">
<colgroup>
<col width="40%" />
<col width="26%" />
<col width="34%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Notation</th>
<th class="head">Préfixe</th>
<th class="head">Exemple</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Décimale</td>
<td>sans</td>
<td>165</td>
</tr>
<tr class="row-odd"><td>Hexadécimale</td>
<td>0x</td>
<td>0xA5</td>
</tr>
<tr class="row-even"><td>Octale</td>
<td>0o</td>
<td>0o245</td>
</tr>
<tr class="row-odd"><td>Binaire</td>
<td>0b</td>
<td>0b10100101</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="les-reels">
<h4>Les réels<a class="headerlink" href="#les-reels" title="Permalink to this headline">¶</a></h4>
<p>Les réels, au sens mathématique, n&#8217;existent pas dans les langages de programmation. Ils sont exprimés par des nombres dits &#8220;à virgule flottante&#8221; ou <strong>flottants</strong> (cf. <a class="reference external" href="http://fr.wikipedia.org/wiki/IEEE_754">IEEE754</a> ) qui représentent une approximation rationnelle. Il existe deux formes standarisées de flottants : simple précision (32 bits) et double précision (64 bits).</p>
<p>Python implémente seulement les flottants en double précision.</p>
</div>
<div class="section" id="les-decimaux">
<h4>Les décimaux<a class="headerlink" href="#les-decimaux" title="Permalink to this headline">¶</a></h4>
<p>Permettent de s&#8217;affranchir des problèmes de perte de précision inhérents au flottants pour représenter des nombres rationnels. Leur utilisation nécessite l&#8217;importation du module <strong>decimal</strong> .</p>
</div>
<div class="section" id="les-nombres-complexes">
<h4>Les nombres complexes<a class="headerlink" href="#les-nombres-complexes" title="Permalink to this headline">¶</a></h4>
<p>Les nombres complexes sont représentés par une paire de flottants pour les parties réelle et imaginaire. La partie imaginaire est suffixée par la lettre <strong>j</strong> ou <strong>J</strong> .</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="mi">3</span><span class="o">+</span><span class="mi">4j</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span>
<span class="go">(3+4j)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span> <span class="o">=</span> <span class="nb">complex</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span>
<span class="go">(3+4j)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="go">&lt;type &#39;complex&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">/</span><span class="mi">2</span>
<span class="go">(1.5+2j)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">real</span>
<span class="go">3.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">c</span><span class="o">.</span><span class="n">imag</span>
<span class="go">4.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">abs</span><span class="p">(</span><span class="n">c</span><span class="p">)</span>
<span class="go">5.0</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Les opérateurs arithmétiques, par ordre croissante de leur priorité sont :</p>
<table border="1" class="docutils">
<colgroup>
<col width="14%" />
<col width="18%" />
<col width="68%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Opérateurs</th>
<th class="head">Forme</th>
<th class="head">Commentaire</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>+, -,</td>
<td>binaire, infixe</td>
<td>même chose qu&#8217;en C/C++, Java etc.</td>
</tr>
<tr class="row-odd"><td>*, /, //, %</td>
<td>binaire, infixe</td>
<td>particularité: deux opérateurs
de division: / et //, op.modulo: %</td>
</tr>
<tr class="row-even"><td>+x, -x, ~</td>
<td>unaire, préfixe</td>
<td>+/- signe d&#8217;une expression, ~ négation binaire (bit à bit)</td>
</tr>
<tr class="row-odd"><td>x ** y</td>
<td>binaire, infixe</td>
<td>x <sup>y</sup></td>
</tr>
</tbody>
</table>
<div class="admonition note" id="py-div">
<p class="first admonition-title">Note</p>
<p><strong>Pourquoi deux opérateurs de division?</strong>
Initialement, Python disposait du seul opérateur de division, <strong>/</strong>, au comportement identique à celui du C:</p>
<ul class="simple">
<li>division entière si les deux opérandes sont entiers</li>
<li>division réelle si au moins un des opérandes est réel</li>
</ul>
<p class="last">Malgré sa compatibilité avec le C, ce fonctionnement n&#8217;a pas eu l&#8217;adhésion de la communauté et il a été décidé depuis longtemps de le changer dans la version 3 de Python avec une division réelle, non tronquée, y compris quand les deux opérandes sont des entiers.</p>
</div>
<p>Pour préparer ce changement important, la version 2.2 a introduit l&#8217;opérateur // qui fait une division tronquée de manière homogène, pour tous les types numériques, l&#8217;opérateur / restant inchangé en attendant la version 3.</p>
<p><strong>Pour résumer:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="40%" />
<col width="47%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Opérateur</th>
<th class="head">Python 2.x</th>
<th class="head">Python 3.x</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>/</td>
<td><strong>compatible C/C++/Java</strong> :
division entière si les
2 opérandes sont entiers,
réelle si au moins
un des deux est réel</td>
<td>Division réelle, même si le deux
opérandes sont entiers</td>
</tr>
<tr class="row-odd"><td>//</td>
<td>Division tronquée, même si
les opérandes sont réels</td>
<td>Comportement inchangé
entre les versions 2.x et 3.x</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="section" id="les-iterables-predefinis">
<h3>Les itérables prédéfinis<a class="headerlink" href="#les-iterables-predefinis" title="Permalink to this headline">¶</a></h3>
<p>Il s&#8217;agit d&#8217;objets prédéfinis qui sont itérables au sens de l&#8217;explication fournie dans la section sur l&#8217;instruction <strong>for-in</strong>.
Ils sont, pour la plupart, des <strong>conteneurs</strong>, autrement dit des objets qui ont vocation à contenir d&#8217;autres objets (listes, ensembles, etc.).</p>
<p>Certains itérables prédéfinis sont plus &#8220;opaques&#8221;: ils ne contiennent pas physiquement d&#8217;autres objets mais ils les créent au fur et à mesure de la demande (range/xrange).</p>
<p>Les itérables fournissent au moins les fonctionnalités suivantes:</p>
<ul class="simple">
<li>accès aux objets contenus un par un, autrement dit ils sont utilisables par l&#8217;instruction <strong>for</strong> (<em>for elt in conteneur:</em>...)</li>
<li>test d&#8217;appartenance d&#8217;un objet au conteneur, utilisable par l&#8217;instruction <strong>if</strong> (<em>if elt in conteneur</em>)</li>
<li>nombre d&#8217;éléments du conteneur (ou sa longueur, i.e. <strong>len(conteneur)</strong>). Exception: <em>enumerate</em></li>
<li>le plus petit et le plus grand élément du conteneur (si une relation d&#8217;ordre existe entre les éléments). Optionellement, la relation d&#8217;ordre peut être définie par une fonction particulière (plus de détails au chapitre sur les <strong>fonctions</strong>)</li>
</ul>
<p class="graphviz">
<img src="_images/graphviz-d04f3732c3883d2daa88d9541c457504a4b9c637.png" alt="graph conteneurs_g {
rankdir=&quot;LR&quot;
size=&quot;7.75,10.25&quot;
&quot;itérable&quot; -- &quot;séquence&quot;;
&quot;itérable&quot; -- &quot;dictionnaire&quot;;
&quot;itérable&quot; -- &quot;ensemble&quot;;
&quot;itérable&quot; -- &quot;itérateur&quot;;
&quot;itérateur&quot; -- &quot;enumerate&quot;;
&quot;séquence&quot; -- &quot;séq.modifiable&quot;;
&quot;séquence&quot; -- &quot;séq.immuable&quot;;
&quot;séq.modifiable&quot; -- &quot;list&quot;;
&quot;séq.modifiable&quot; -- &quot;bytearray&quot;;
&quot;séq.immuable&quot; -- &quot;str&quot;;
&quot;séq.immuable&quot; -- &quot;tuple&quot;;
&quot;séq.immuable&quot; -- &quot;bytes&quot;;
&quot;séq.immuable&quot; -- &quot;unicode&quot;;
&quot;séq.immuable&quot; -- &quot;(x)range&quot;;
&quot;séq.immuable&quot; -- &quot;buffer&quot;;
&quot;ensemble&quot; -- &quot;set&quot;;
&quot;ensemble&quot; -- &quot;frozenset&quot;;


}" />
</p>
<p>Les séquences, les dictionnaires et les ensembles, ainsi que leur sous-types concrets sont des containers spécialisés, proposant des fonctionnalités spécifiques en plus de celles déjà énumérées.</p>
</div>
<div class="section" id="les-sequences">
<h3>Les séquences<a class="headerlink" href="#les-sequences" title="Permalink to this headline">¶</a></h3>
<p>On appelle <strong>séquence</strong> une collection dont les éléments sont ordonnés et indexés.</p>
<p>Pour faire une parallèle avec d&#8217;autres langages, les tableaux du <strong>C</strong> ainsi que les objets de type <strong>std::Vector</strong> en <strong>C++</strong> et  <strong>java.util.Vector</strong> en <strong>Java</strong> sont des séquences.</p>
<p>La convention de numérotation des index, héritée du <strong>C</strong>, fait que pour une séquence de taille <em>N</em> les index prennent des valeurs entre <em>0</em> et <em>N-1</em>.</p>
<p>En plus des fonctionnalités communes à tous les conteneurs, les séquences proposent deux propriétés spécifiques:</p>
<ul class="simple">
<li>l&#8217;accès direct aux éléments à travers leur index:<ul>
<li>avec des index positifs: 1er élément: seq[0], dernier élément: seq[taille-1]</li>
<li>avec des index négatifs: 1er élément: seq[-taille], dernier élément: seq[-1] (<strong>NB:</strong> index <sub>[-]</sub> = index <sub>[+]</sub> - taille)</li>
</ul>
</li>
<li>la possibilité d&#8217;extraire des tranches d&#8217;une séquence donnée (slicing)<ul>
<li>seq[i:j] avec i=premier <strong>dans</strong> la tranche, j=premier <strong>dehors</strong></li>
<li>seq[i:j:p] où p est le <strong>pas</strong> qui peut être positif ou négatif</li>
</ul>
</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">=</span><span class="s">&quot;Python&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span>
<span class="go">&#39;Python&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="go">&#39;yt&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="go">&#39;ytho&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">5</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
<span class="go">&#39;yh&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[</span><span class="mi">5</span><span class="p">:</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
<span class="go">&#39;nh&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p><strong>NB:</strong> i, j et p peuvent être absents:</p>
<ul class="simple">
<li>i absent =&gt; La seule manière de sélectionner le <strong>premier</strong> élément de la séquence quand le pas est <strong>négatif</strong></li>
<li>j absent =&gt; La seule manière de sélectionner le <strong>dernier</strong> élément de la séquence quand le pas est <strong>positif</strong></li>
<li>p absent =&gt; pas = 1</li>
</ul>
<p><strong>NB(2):</strong> Dans le slicing les index hors limites sont tronqués implicitement, sans message d&#8217;erreur:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[</span><span class="o">-</span><span class="mi">100</span><span class="p">:</span><span class="mi">100</span><span class="p">]</span>
<span class="go">&#39;Python&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[</span><span class="mi">100</span><span class="p">:</span><span class="o">-</span><span class="mi">100</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="go">&#39;nohtyP&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Par contre, une tentative d&#8217;accès indexé à une position inexistante provoquera une erreur:</p>
<div class="highlight-python"><div class="highlight"><pre>&gt;&gt;&gt; s[100]
Traceback (most recent call last):
File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
IndexError: string index out of range
&gt;&gt;&gt;
</pre></div>
</div>
<div class="section" id="id3">
<h4>Exercice<a class="headerlink" href="#id3" title="Permalink to this headline">¶</a></h4>
<div class="myexercice container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: slicing.py</span>

<span class="sd">A partir de la chaine de caractères s, extraire, en utilisant le slicing</span>
<span class="sd">a) la chaîne 8jJ</span>
<span class="sd">b) la chaîne contenant toutes les majuscules</span>
<span class="sd">c) la chaîne contenant tous les chiffres, par ordre décroissant</span>
<span class="sd">d) la chaîne initiale inversée</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">s</span> <span class="o">=</span> <span class="s">&#39;aA0bB1cC2dD3eE4fF5gG6hH7iI8jJ9&#39;</span>
</pre></div>
</div>
</div>
<div class="tohide container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: slicing_sol.py</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="c">#a</span>
<span class="n">s</span><span class="p">[</span><span class="o">-</span><span class="mi">4</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="c">#b</span>
<span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">3</span><span class="p">]</span>
<span class="c">#c</span>
<span class="n">s</span><span class="p">[::</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span>
<span class="c">#d</span>
<span class="n">s</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</div>
<p>Toutes les séquences supportent les  méthodes:</p>
<ul class="simple">
<li><em>seq.index(elt,[first,[last]])</em> # index de la première occurence de <em>elt</em></li>
<li><em>seq.count(elt)</em> # nombre d&#8217;occurences de <em>elt</em></li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Toutes les séquences peuvent être triées avec la fonction native <strong>sorted(seq,...)</strong> qui sera détaillée au chapitre <strong>fonctions</strong>.</p>
</div>
<p>Selon leur capacité à être modifiées ou pas, on va parler de séquences <strong>modifiables</strong> respectivement ou non-modifiables (ou <strong>immuables</strong>)  .</p>
</div>
<div class="section" id="les-sequences-modifiables-list-et-bytearray">
<h4>Les séquences modifiables ( <strong>list</strong> et bytearray )<a class="headerlink" href="#les-sequences-modifiables-list-et-bytearray" title="Permalink to this headline">¶</a></h4>
<p>Il y a seulement deux types de séquences modifiables, les <strong>list</strong> et les <strong>bytearray</strong>. Les opérations supplémentaires supportées par les séquences modifiables sont:</p>
<ul class="simple">
<li>modification d&#8217;une position ou d&#8217;une plage de positions</li>
<li>ajout/suppression d&#8217;un élément ou d&#8217;une (sous)séquence</li>
</ul>
<p>Ainsi, toutes les expressions de sélection d&#8217;un élément ou d&#8217;une sous-séquence pourront apparaître en partie gauche d&#8217;une affectation ou en argument de l&#8217;instruction de suppression <strong>del</strong></p>
<p>Les modifications peuvent se faire également à travers les méthodes natives suivantes :</p>
<ul class="simple">
<li><em>seq.append(x)</em> # ajout d&#8217;un élément à la fin de la séquence</li>
<li><em>seq.extend(seq2)</em> # extension de seq avec seq2</li>
<li><em>seq.insert(i,x)</em> # insertion de l&#8217;élément x en position i</li>
<li><em>seq.pop(i)</em> # retourne et enlève l&#8217;élément en position i</li>
<li><em>seq.remove(x)</em> # supprime la première occurrence de x dans seq</li>
<li><em>seq.reverse()</em> # inverse l&#8217;ordre des éléments</li>
<li><em>seq.sort(...)</em> # tri (sera détaillée, au chapitre <strong>fonctions</strong>)</li>
</ul>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">La différence entre  <em>seq.sort(...)</em> et <em>sorted(seq,...)</em> est que <em>seq.sort(...)</em> modifie <em>seq</em> et renvoie <em>None</em>
pendant que <em>sorted(seq,...)</em> laisse <em>seq</em> inchangé et renvoie une nouvelle séquence, triée.</p>
</div>
<p>Illustration avec le type <strong>list</strong>, qui porte assez mal son nom (son comportement est plus proche des vecteurs que des listes (chaînées) présentes dans d&#8217;autres langages:</p>
<p>Affectation :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">lst</span>
<span class="go">[&#39;P&#39;, &#39;y&#39;, &#39;t&#39;, &#39;h&#39;, &#39;o&#39;, &#39;n&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="o">=</span><span class="s">&quot;H&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst</span>
<span class="go">[&#39;P&#39;, &#39;y&#39;, &#39;t&#39;, &#39;H&#39;, &#39;o&#39;, &#39;n&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;l&quot;</span><span class="p">,</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="s">&quot;t&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst</span>
<span class="go">[&#39;P&#39;, &#39;l&#39;, &#39;a&#39;, &#39;t&#39;, &#39;o&#39;, &#39;n&#39;]</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p><strong>NB:</strong> En cas d&#8217;affectation avec slicing, la tranche substituée peut avoir une taille différente de celle la liste substitution:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="s">&#39;c&#39;</span><span class="p">,</span><span class="s">&#39;d&#39;</span><span class="p">,</span><span class="s">&#39;e&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst2</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;X&#39;</span><span class="p">,</span><span class="s">&#39;Y&#39;</span><span class="p">,</span><span class="s">&#39;Z&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="n">lst2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst</span>
<span class="go">[&#39;a&#39;, &#39;b&#39;, &#39;X&#39;, &#39;Y&#39;, &#39;Z&#39;, &#39;e&#39;]</span>
</pre></div>
</div>
<img alt="_images/slicing_left_side_cut.jpg" src="_images/slicing_left_side_cut.jpg" />
<p>Délétion :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">lst</span>
<span class="go">[&#39;P&#39;, &#39;l&#39;, &#39;a&#39;, &#39;t&#39;, &#39;o&#39;, &#39;n&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">lst</span><span class="p">[</span><span class="mi">3</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst</span>
<span class="go">[&#39;P&#39;, &#39;l&#39;, &#39;a&#39;, &#39;n&#39;]</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Primitives :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">lst</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="s">&quot;Monty&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst</span>
<span class="go">[&#39;M&#39;, &#39;o&#39;, &#39;n&#39;, &#39;t&#39;, &#39;y&#39;, &#39; &#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst2</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="s">&quot;Python&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">lst2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst</span>
<span class="go">[&#39;M&#39;, &#39;o&#39;, &#39;n&#39;, &#39;t&#39;, &#39;y&#39;, &#39; &#39;, &#39;P&#39;, &#39;y&#39;, &#39;t&#39;, &#39;h&#39;, &#39;o&#39;, &#39;n&#39;]</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst2</span>
<span class="go">[&#39;P&#39;, &#39;y&#39;, &#39;t&#39;, &#39;h&#39;, &#39;o&#39;, &#39;n&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst2</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="s">&quot;*&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst2</span>
<span class="go">[&#39;P&#39;, &#39;y&#39;, &#39;*&#39;, &#39;t&#39;, &#39;h&#39;, &#39;o&#39;, &#39;n&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst2</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="go">&#39;*&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst2</span>
<span class="go">[&#39;P&#39;, &#39;y&#39;, &#39;t&#39;, &#39;h&#39;, &#39;o&#39;, &#39;n&#39;]</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst2</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s">&quot;h&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst2</span>
<span class="go">[&#39;P&#39;, &#39;y&#39;, &#39;t&#39;, &#39;o&#39;, &#39;n&#39;]</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst2</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst2</span>
<span class="go">[&#39;n&#39;, &#39;o&#39;, &#39;t&#39;, &#39;y&#39;, &#39;P&#39;]</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst2</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst2</span>
<span class="go">[&#39;P&#39;, &#39;n&#39;, &#39;o&#39;, &#39;t&#39;, &#39;y&#39;]</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p><strong>Astuce:</strong> Pour obtenir une copie (superficielle) d&#8217;une liste <strong>lst</strong>, on peut utiliser le slicing: <strong>lst[:]</strong></p>
<div class="section" id="les-listes-en-intension-ou-comprehension">
<h5>Les listes en intension (ou compréhension)<a class="headerlink" href="#les-listes-en-intension-ou-comprehension" title="Permalink to this headline">¶</a></h5>
<p>Un problème récurent en programmation est la construction d&#8217;une liste à partir d&#8217;une liste existante (ou de tout autre collection d&#8217;objets existante). On souhaite souvent obtenir :</p>
<ol class="arabic simple">
<li>une nouvelle liste de la même taille que la liste en entrée (Ex: la liste des carrés d&#8217;une liste d&#8217;entiers fournie)</li>
<li>une liste avec filtrage (Ex: liste des carrés des entiers impaires se trouvant dans la liste fournie)</li>
</ol>
<p>Une construction de ces listes avec une boucle <strong>for-in</strong> classique est, bien sûr, possible.</p>
<p>Premier cas:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">=</span><span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]:</span>
<span class="gp">... </span>    <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span>
<span class="go">[1, 4, 9]</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Deuxième cas:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">=</span><span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]:</span>
<span class="gp">... </span>    <span class="k">if</span> <span class="n">e</span> <span class="o">%</span> <span class="mi">2</span><span class="p">:</span>
<span class="gp">... </span>            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">e</span><span class="o">**</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span>
<span class="go">[1, 9, 25]</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Python propose en plus, une écriture plus concise, plus élégante aussi : c&#8217;est la construction de listes dites &#8220;en compréhension&#8221; ou &#8220;en intension&#8221; (antonyme du mot &#8220;extension&#8221;) inspirée des notations utilisées dans la théorie des ensembles.</p>
<p>Avec cette notation, le premier cas (sans filtre) s&#8217;écrit ainsi:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># &quot;Beautiful is better than ugly. (le Zen)&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">e</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]]</span>
<span class="go">[1, 4, 9]</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>et le deuxième (avec filtre):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">e</span><span class="o">**</span><span class="mi">2</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">]</span> <span class="k">if</span> <span class="n">e</span><span class="o">%</span><span class="mi">2</span><span class="p">]</span>
<span class="go">[1, 9, 25]</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>L&#8217;écriture de boucles imbriquées est également possible.</p>
<p>L&#8217;écriture classique pour obtenir un pseudo produit cartésien (&#8220;pseudo&#8221;, car les listes ne sont pas des ensembles au sens mathématique):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span><span class="o">=</span><span class="p">[]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="s">&quot;c&quot;</span><span class="p">]:</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]:</span>
<span class="gp">... </span>            <span class="n">result</span><span class="o">.</span><span class="n">append</span><span class="p">([</span><span class="n">n</span><span class="p">,</span><span class="n">c</span><span class="p">])</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span>
<span class="go">[[1, &#39;a&#39;], [2, &#39;a&#39;], [3, &#39;a&#39;], [1, &#39;b&#39;], [2, &#39;b&#39;], [3, &#39;b&#39;], [1, &#39;c&#39;], [2, &#39;c&#39;], [3, &#39;c&#39;]]</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Devient:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="p">[[</span><span class="n">n</span><span class="p">,</span><span class="n">c</span><span class="p">]</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="s">&quot;b&quot;</span><span class="p">,</span><span class="s">&quot;c&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">]]</span>
<span class="go">[[1, &#39;a&#39;], [2, &#39;a&#39;], [3, &#39;a&#39;], [1, &#39;b&#39;], [2, &#39;b&#39;], [3, &#39;b&#39;], [1, &#39;c&#39;], [2, &#39;c&#39;], [3, &#39;c&#39;]]</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="id4">
<h4>Exercice<a class="headerlink" href="#id4" title="Permalink to this headline">¶</a></h4>
<div class="myexercice container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: comprehension.py</span>

<span class="sd">Soient les listes L1 et L2.</span>
<span class="sd">NB: les deux listes contiennent seulement des éléments uniques</span>

<span class="sd">En utilisant des listes en intension construire:</span>
<span class="sd">a) l&#39;intersection des deux listes (considérées comme des ensembles)</span>
<span class="sd">b) la différence ensembliste L1 - L2</span>
<span class="sd">c) Le sous-ensemble du produit cartésien L1 X L2 défini ainsi: </span>
<span class="sd">   {[e1, e2]|e1 appartenant à L1, e2 appartenant à L2, tq e1&gt;=e2}</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">L1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">]</span>
<span class="n">L2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">8</span><span class="p">,</span> <span class="mi">9</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="tohide container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: comprehension_sol.py</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">comprehension</span> <span class="kn">import</span> <span class="n">L1</span><span class="p">,</span> <span class="n">L2</span>
<span class="c"># a) l&#39;intersection</span>
<span class="n">intersection</span> <span class="o">=</span> <span class="p">[</span><span class="n">elt</span> <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="n">L1</span> <span class="k">if</span> <span class="n">elt</span> <span class="ow">in</span> <span class="n">L2</span><span class="p">]</span>

<span class="c"># b) L1 - L2</span>
<span class="n">L1_L2</span> <span class="o">=</span> <span class="p">[</span><span class="n">elt</span> <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="n">L1</span> <span class="k">if</span> <span class="n">elt</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">L2</span><span class="p">]</span>

<span class="c"># c) sous ensemble de L1 x L2 tq e1 &gt;= e2</span>
<span class="n">sub_prod</span> <span class="o">=</span> <span class="p">[[</span><span class="n">e1</span><span class="p">,</span> <span class="n">e2</span><span class="p">]</span> <span class="k">for</span> <span class="n">e1</span> <span class="ow">in</span> <span class="n">L1</span> <span class="k">for</span> <span class="n">e2</span> <span class="ow">in</span> <span class="n">L2</span> <span class="k">if</span> <span class="n">e1</span> <span class="o">&gt;=</span> <span class="n">e2</span><span class="p">]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="les-sequences-immuables">
<h4>Les séquences immuables<a class="headerlink" href="#les-sequences-immuables" title="Permalink to this headline">¶</a></h4>
<p>En Python, les types suivants correspondent à cette classification:</p>
<ul class="simple">
<li>Le type <strong>tuple</strong> (déjà évoqué avec l&#8217;affectation multiple)</li>
<li>Les types <strong>str</strong>, <strong>bytes</strong> et <strong>unicode</strong> sont liés à la représentation des caractères et seront traités ensemble.</li>
<li>Le type <strong>buffer/memoryview</strong> donne accès à l&#8217;image mémoire d&#8217;un objet (supportant un protocole particulier) pour un traitement efficace des gros volumes de données. Il relève d&#8217;une utilisation avancée et ne sera pas traité ici.</li>
<li>Le type <strong>xrange/range</strong> est une séquence de valeurs entières contiguës dans une plage donnée. Son utilité (par rapport à une liste) est l&#8217;économie de mémoire (dans les instructions <strong>for</strong> par exemple)</li>
</ul>
</div>
<div class="section" id="les-tuples">
<h4>Les <strong>tuples</strong><a class="headerlink" href="#les-tuples" title="Permalink to this headline">¶</a></h4>
<p>Sont des tableaux très simples et assez similaires aux tableaux du <strong>C</strong> (par exemple: <tt class="docutils literal"><span class="pre">int</span> <span class="pre">int_var[5]</span> <span class="pre">=</span> <span class="pre">{1,3,5};</span></tt>, mais leurs éléments peuvent être hétérogènes. Ils peuvent se définir de deux manières:</p>
<ul class="simple">
<li>en énumérant leurs éléments, séparés par des virgules (souvent, mais pas toujours, entre parenthèses pour éviter les ambiguïtés syntaxiques)</li>
<li>en passant une autre itérable (une liste, par exemple) en argument au constructeur <em>tuple()</em></li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;a&quot;</span><span class="p">,[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]</span>
<span class="go">(1, &#39;a&#39;, [3, 4])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;a&quot;</span><span class="p">,[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">])</span>
<span class="go">(1, &#39;a&#39;, [3, 4])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">tuple</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="s">&quot;a&quot;</span><span class="p">,[</span><span class="mi">3</span><span class="p">,</span><span class="mi">4</span><span class="p">]])</span>
<span class="go">(1, &#39;a&#39;, [3, 4])</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Syntaxiquement, ce ne sont pas les parenthèses qui définissent le tuple, mais la virgule utilisée comme séparateur entre ses éléments. Dans un tuple à un seul élément l&#8217;unique élément doit être suivi d&#8217;une virgule :</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="c">#ceci n&#39;est pas un tuple</span>
<span class="go">1</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="mi">1</span><span class="p">,)</span> <span class="c">#ceci est un tuple</span>
<span class="go">(1,)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="mi">1</span><span class="p">,</span> <span class="c">#ceci aussi est un tuple</span>
<span class="go">(1,)</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Une fois créé, le tuple est immuable mais il peut contenir des éléments modifiables:</p>
<div class="highlight-python"><div class="highlight"><pre>&gt;&gt;&gt; t=(1,&quot;a&quot;,[3,4])
&gt;&gt;&gt; t[2] = 9
Traceback (most recent call last):
File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
TypeError: &#39;tuple&#39; object does not support item assignment
&gt;&gt;&gt; t[2][1]=9
&gt;&gt;&gt; t
(1, &#39;a&#39;, [3, 9])
&gt;&gt;&gt;
</pre></div>
</div>
<div class="section" id="unpacking">
<h5>Unpacking<a class="headerlink" href="#unpacking" title="Permalink to this headline">¶</a></h5>
<p>Une séquence contenant des variables, et en particulier un tuple peut être lvalue dans une affectation:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;x&quot;</span><span class="p">,</span> <span class="s">&quot;y&quot;</span><span class="p">]</span> <span class="c"># ou (&quot;x&quot;, &quot;y&quot;) ou &quot;xy&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">&#39;x&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span>
<span class="go">&#39;y&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">(</span><span class="n">a</span><span class="p">,</span> <span class="n">b</span><span class="p">)</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;x&quot;</span><span class="p">,</span> <span class="s">&quot;y&quot;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">&#39;x&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span>
<span class="go">&#39;y&#39;</span>
</pre></div>
</div>
<p>Les parenthèses n&#8217;étant pas obligatoires, on peut écrire:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">,</span> <span class="s">&quot;y&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">&#39;x&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span>
<span class="go">&#39;y&#39;</span>
</pre></div>
</div>
<p>ou:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="s">&quot;x&quot;</span><span class="p">,</span> <span class="s">&quot;y&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">a</span>
<span class="go">&#39;x&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">b</span>
<span class="go">&#39;y&#39;</span>
</pre></div>
</div>
<p>qu&#8217;on a appelé précédemment &#8220;affectation multiple&#8221;.</p>
<p>NB: A droite du signe &#8220;égal&#8221; peut se trouver tout itérable de la bonne taille.</p>
</div>
<div class="section" id="unpacking-etendu-python-3-x-seulement">
<h5>Unpacking étendu (Python 3.x seulement)<a class="headerlink" href="#unpacking-etendu-python-3-x-seulement" title="Permalink to this headline">¶</a></h5>
<p>Parfois il peut être pratique d&#8217;affecter seulement une partie de l&#8217;itérable se trouvant à droite du signe &#8220;égal&#8221;. A partir de Python 3.x cela est possible (cf. <a class="reference external" href="https://www.python.org/dev/peps/pep-3132/">PEP 3132</a>).</p>
<div class="highlight-python"><div class="highlight"><pre>&gt;&gt;&gt; a, b = [1, 2, 3, 4, 5]
Traceback (most recent call last):
File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
ValueError: too many values to unpack (expected 2)
&gt;&gt;&gt; a, b, *t = [1, 2, 3, 4, 5]
&gt;&gt;&gt; a
1
&gt;&gt;&gt; b
2
&gt;&gt;&gt; t
[3, 4, 5]
&gt;&gt;&gt; a, *t, b = [1, 2, 3, 4, 5]
&gt;&gt;&gt; a
1
&gt;&gt;&gt; b
5
&gt;&gt;&gt; t
[2, 3, 4]
&gt;&gt;&gt;
</pre></div>
</div>
</div>
</div>
<div class="section" id="les-chaines-de-caracteres-str-mais-aussi-bytes-et-unicode">
<h4>Les chaînes de caractères  (<strong>str</strong>, mais aussi <strong>bytes</strong> et <strong>unicode</strong>)<a class="headerlink" href="#les-chaines-de-caracteres-str-mais-aussi-bytes-et-unicode" title="Permalink to this headline">¶</a></h4>
<p>On est obligé d&#8217;évoquer trois types (<em>str</em>, <em>bytes</em> et <em>unicode</em>) pour expliquer le propriétés des chaînes de caractères en Python.</p>
<p>Il convient de préciser que c&#8217;est le type <strong>str</strong> qui représente, par défaut, les chaînes de caractères en Python. Les deux autres, <em>bytes</em> et <em>unicode</em>, ont joué et jouent encore un rôle de transition, pour aider à la prise en charge des mutations que le type <strong>str</strong> a subi entre les versions 2 et 3 du langage.</p>
<p>Dans les explications qui vont suivre il s&#8217;agit du type <strong>str</strong> implicitement. Les références ponctuelles aux deux autres types seront explicites.</p>
<p>Les chaînes de caractères sont des séquences destinées à manipuler du texte. En Python, plusieurs syntaxes sont acceptées. Un peut utiliser les simples et les doubles quotes :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s">&#39;un texte&#39;</span><span class="p">)</span>
<span class="go">un texte</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s">&quot;un texte&quot;</span><span class="p">)</span>
<span class="go">un texte</span>
</pre></div>
</div>
<p>On peut écrire une chaîne sur plusieurs lignes (si elle est trop longue, par exemple). Cette écriture est sans impact sur le contenu de la chaîne (elle n&#8217;introduit pas des retours à la ligne) :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s">&quot;si un texte est trop long </span><span class="se">\</span>
<span class="gp">... </span><span class="s">on peut l&#39;écrire </span><span class="se">\</span>
<span class="gp">... </span><span class="s">sur plusieurs lignes&quot;</span><span class="p">)</span>
<span class="go">si un texte est trop long on peut l&#39;écrire sur plusieurs lignes</span>
</pre></div>
</div>
<p>On peut introduire des retours à la ligne de deux manières:</p>
<ul>
<li><p class="first">avec la séquence d&#8217;échappement <strong>\n</strong> (norme <em>POSIX</em>)</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s">&quot;première ligne </span><span class="se">\n</span><span class="s"> deuxième ligne&quot;</span><span class="p">)</span>
<span class="go">première ligne</span>
<span class="go">deuxième ligne</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s">&quot;première ligne </span><span class="se">\n\</span>
<span class="gp">... </span><span class="s">deuxième ligne&quot;</span><span class="p">)</span>
<span class="go">première ligne</span>
<span class="go">deuxième ligne</span>
</pre></div>
</div>
</li>
<li><p class="first">Avec des triples quotes (spécifique Python):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s">&quot;&quot;&quot;</span>
<span class="gp">... </span><span class="s">première ligne</span>
<span class="gp">... </span><span class="s">deuxième ligne</span>
<span class="gp">... </span><span class="s">&quot;&quot;&quot;</span><span class="p">)</span>

<span class="go">première ligne</span>
<span class="go">deuxième ligne</span>
</pre></div>
</div>
</li>
</ul>
<p>Dans certaines situations, l&#8217;interprétation des séquences d&#8217;échappement (\n, \r etc.) n&#8217;est pas souhaitable, par exemple, dans les expressions rationnelles (regular expressions). Dans ce cas, on peut utiliser les chaînes brutes (raw strings), introduites par le préfixe <strong>&#8220;r&#8221;</strong> :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">print</span><span class="p">(</span><span class="s">r&quot;première ligne \n deuxième ligne&quot;</span><span class="p">)</span>
<span class="go">première ligne \n deuxième ligne</span>
</pre></div>
</div>
<p>Les chaînes sont des instances la classe <strong>str</strong> et elles supportent toutes les opérations sur les séquences non modifiables (indexing, slicing, etc.)</p>
<p>Elles supportent également des opérations spécifiques implémentés en tant que fonctions ou accessibles en tant que méthodes et opérateurs sur la classe <strong>str</strong>.</p>
<p>Les opérateurs supportés par les chaînes sont:</p>
<ul class="simple">
<li><strong>+</strong> concaténation (Exemple : <tt class="docutils literal"><span class="pre">&quot;abc&quot;</span> <span class="pre">+</span> <span class="pre">&quot;xyz&quot;</span></tt>)</li>
<li><strong>*</strong> multiplication (Une répétition, en réalité. Exemple : <tt class="docutils literal"><span class="pre">&quot;abc&quot;</span> <span class="pre">*</span> <span class="pre">3</span></tt>)</li>
<li><strong>%</strong>  opérateur d&#8217;interpolation, expliqué en détail plus loin</li>
</ul>
<p>Deux fonctions spécifiques, <em>chr()</em> et <em>ord()</em>, particulièrement importantes car elles font le lien entre un caractère et le code (ASCII ou Unicode, selon le cas) correspondant:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">chr</span><span class="p">(</span><span class="mi">65</span><span class="p">)</span>
<span class="go">&#39;A&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">ord</span><span class="p">(</span><span class="s">&#39;A&#39;</span><span class="p">)</span>
<span class="go">65</span>
</pre></div>
</div>
<p>Les méthodes sur les chaînes sont nombreuses, illustration en utilisant l&#8217;autocomplétion (déclenchée par la tabulation) dans <strong>ipython</strong> pour voir leur liste exhaustive:</p>
<div class="highlight-python"><div class="highlight"><pre>In [1]: s=&quot;abc&quot;

In [2]: s.
s.capitalize  s.endswith    s.isalnum     s.istitle     s.lstrip      s.rjust       s.splitlines  s.translate
s.center      s.expandtabs  s.isalpha     s.isupper     s.partition   s.rpartition  s.startswith  s.upper
s.count       s.find        s.isdigit     s.join        s.replace     s.rsplit      s.strip       s.zfill
s.decode      s.format      s.islower     s.ljust       s.rfind       s.rstrip      s.swapcase
s.encode      s.index       s.isspace     s.lower       s.rindex      s.split       s.title
</pre></div>
</div>
<p>Exemples:</p>
<ul>
<li><p class="first">quelques méthodes de test (retournant un booléen) :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">=</span><span class="s">&quot;abc&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">islower</span><span class="p">()</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">isupper</span><span class="p">()</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&quot;ab&quot;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s">&quot;x&quot;</span><span class="p">)</span>
<span class="go">False</span>
</pre></div>
</div>
</li>
<li><p class="first">quelques méthodes produisant une chaîne à partir de la chaîne donnée:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
<span class="go">&#39;ABC&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">.</span><span class="n">title</span><span class="p">()</span>
<span class="go">&#39;Abc&#39;</span>
</pre></div>
</div>
</li>
</ul>
<p>Pour savoir plus sur ces méthodes, consulter: <a class="reference external" href="http://docs.python.org/2/library/stdtypes.html#string-methods">http://docs.python.org/2/library/stdtypes.html#string-methods</a></p>
</div>
<div class="section" id="id5">
<h4>Exercice<a class="headerlink" href="#id5" title="Permalink to this headline">¶</a></h4>
<div class="myexercice container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: lcd.py</span>

<span class="sd">Ecrire un programme qui demande la saisie d&#39;un entier </span>
<span class="sd">(sur plusieurs chiffres) et qui affiche le numéro saisi </span>
<span class="sd">à la manière des affichages LCD en utilisant la liste </span>
<span class="sd">&#39;LCD&#39; fournie plus bas.</span>
<span class="sd">NB: Si besoin, on pourra utiliser la primitive </span>
<span class="sd">range(n) qui retourne la liste [0,1,...,n-1]</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">LCD</span> <span class="o">=</span> <span class="p">[[</span><span class="s">&quot;+--+&quot;</span><span class="p">,</span>
        <span class="s">&quot;|  |&quot;</span><span class="p">,</span>
        <span class="s">&quot;+  +&quot;</span><span class="p">,</span>
        <span class="s">&quot;|  |&quot;</span><span class="p">,</span>
        <span class="s">&quot;+--+&quot;</span><span class="p">],</span>
       <span class="p">[</span><span class="s">&quot;+&quot;</span><span class="p">,</span>
        <span class="s">&quot;|&quot;</span><span class="p">,</span>
        <span class="s">&quot;+&quot;</span><span class="p">,</span>
        <span class="s">&quot;|&quot;</span><span class="p">,</span>
        <span class="s">&quot;+&quot;</span><span class="p">],</span>
       <span class="p">[</span><span class="s">&quot;+--+&quot;</span><span class="p">,</span>
        <span class="s">&quot;   |&quot;</span><span class="p">,</span>
        <span class="s">&quot;+--+&quot;</span><span class="p">,</span>
        <span class="s">&quot;|   &quot;</span><span class="p">,</span>
        <span class="s">&quot;+--+&quot;</span><span class="p">],</span>
       <span class="p">[</span><span class="s">&quot;+--+&quot;</span><span class="p">,</span>
        <span class="s">&quot;   |&quot;</span><span class="p">,</span>
        <span class="s">&quot;+--+&quot;</span><span class="p">,</span>
        <span class="s">&quot;   |&quot;</span><span class="p">,</span>
        <span class="s">&quot;+--+&quot;</span><span class="p">],</span>
       <span class="p">[</span><span class="s">&quot;+   &quot;</span><span class="p">,</span>
        <span class="s">&quot;|   &quot;</span><span class="p">,</span>
        <span class="s">&quot;+--+&quot;</span><span class="p">,</span>
        <span class="s">&quot;   |&quot;</span><span class="p">,</span>
        <span class="s">&quot;   +&quot;</span><span class="p">],</span>
       <span class="p">[</span><span class="s">&quot;+--+&quot;</span><span class="p">,</span>
        <span class="s">&quot;|   &quot;</span><span class="p">,</span>
        <span class="s">&quot;+--+&quot;</span><span class="p">,</span>
        <span class="s">&quot;   |&quot;</span><span class="p">,</span>
        <span class="s">&quot;+--+&quot;</span><span class="p">],</span>
       <span class="p">[</span><span class="s">&quot;+--+&quot;</span><span class="p">,</span>
        <span class="s">&quot;|   &quot;</span><span class="p">,</span>
        <span class="s">&quot;+--+&quot;</span><span class="p">,</span>
        <span class="s">&quot;|  |&quot;</span><span class="p">,</span>
        <span class="s">&quot;+--+&quot;</span><span class="p">],</span>
       <span class="p">[</span><span class="s">&quot;+--+&quot;</span><span class="p">,</span>
        <span class="s">&quot;   |&quot;</span><span class="p">,</span>
        <span class="s">&quot;   +&quot;</span><span class="p">,</span>
        <span class="s">&quot;   |&quot;</span><span class="p">,</span>
        <span class="s">&quot;   +&quot;</span><span class="p">],</span>
       <span class="p">[</span><span class="s">&quot;+--+&quot;</span><span class="p">,</span>
        <span class="s">&quot;|  |&quot;</span><span class="p">,</span>
        <span class="s">&quot;+--+&quot;</span><span class="p">,</span>
        <span class="s">&quot;|  |&quot;</span><span class="p">,</span>
        <span class="s">&quot;+--+&quot;</span><span class="p">],</span>
       <span class="p">[</span><span class="s">&quot;+--+&quot;</span><span class="p">,</span>
        <span class="s">&quot;|  |&quot;</span><span class="p">,</span>
        <span class="s">&quot;+--+&quot;</span><span class="p">,</span>
        <span class="s">&quot;   |&quot;</span><span class="p">,</span>
        <span class="s">&quot;+--+&quot;</span><span class="p">]]</span>
</pre></div>
</div>
</div>
<div class="tohide container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: lcd_sol.py</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>
<span class="kn">from</span> <span class="nn">lcd</span> <span class="kn">import</span> <span class="n">LCD</span> <span class="c"># i.e. la liste de l&#39;ennoncé</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">prompt</span> <span class="o">=</span> <span class="s">&quot;Saisir un numéro: &quot;</span>
<span class="n">str_number</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span> <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="o">.</span><span class="n">major</span><span class="o">==</span><span class="mi">3</span> <span class="k">else</span> <span class="nb">raw_input</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span>

<span class="k">print</span><span class="p">(</span><span class="n">str_number</span><span class="p">)</span>

<span class="k">for</span> <span class="n">ln</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">):</span>
    <span class="n">line</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
    <span class="k">for</span> <span class="n">n</span> <span class="ow">in</span> <span class="n">str_number</span><span class="p">:</span>
        <span class="n">d</span> <span class="o">=</span> <span class="n">LCD</span><span class="p">[</span><span class="nb">int</span><span class="p">(</span><span class="n">n</span><span class="p">)]</span>
        <span class="n">line</span> <span class="o">+=</span> <span class="s">&quot; &quot;</span>
        <span class="n">line</span> <span class="o">+=</span> <span class="n">d</span><span class="p">[</span><span class="n">ln</span><span class="p">]</span>
    <span class="k">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><strong>Construction itérative des chaînes de caractères</strong></p>
<p>Les objets <strong>str</strong> étant non modifiables, la construction itérative d&#8217;une chaîne par concaténation d&#8217;un grand nombre d&#8217;autres chaînes (par exemple, des lignes lues dans un fichier) est extrèmement inéfficace en raison du grand nombre de recopies :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">On lit un fichier .csv dans une string en faisant un traitement ligne par ligne</span>
<span class="sd">Cette solution est inefficace  en raison du grand nombre de recopies d&#39;objets!</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">res</span> <span class="o">=</span> <span class="s">&quot;&quot;</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;afile.csv&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">line</span> <span class="o">==</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">res</span> <span class="o">+=</span> <span class="n">line</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">,</span> <span class="s">&quot;,&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</pre></div>
</div>
<p>Une solution améliorée, mais pas optimale, consisterait à passer par la construction d&#8217;une liste intermédiaire, ce qui n&#8217;est pas très naturel :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">acc</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;afile.csv&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">line</span> <span class="o">==</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">:</span>
            <span class="k">continue</span>        
        <span class="n">acc</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">,</span> <span class="s">&quot;,&quot;</span><span class="p">))</span>
<span class="n">res</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">acc</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</pre></div>
</div>
<p>Enfin, la bibliothèque standard propose la classe <strong>StringIO</strong> (module <strong>io</strong> en <strong>Python 3.x</strong>, module <strong>StringIO</strong> en <strong>Python 2.x</strong>) qui permet de construire des &#8220;flots&#8221; (streams) en mémoire :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">sys</span>
<span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="o">.</span><span class="n">major</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">StringIO</span>
<span class="k">else</span><span class="p">:</span>
    <span class="kn">from</span> <span class="nn">StringIO</span> <span class="kn">import</span> <span class="n">StringIO</span>
<span class="n">acc</span> <span class="o">=</span> <span class="n">StringIO</span><span class="p">()</span>
<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;afile.csv&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">line</span> <span class="o">==</span> <span class="s">&#39;</span><span class="se">\n</span><span class="s">&#39;</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">acc</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s">&quot; &quot;</span><span class="p">,</span> <span class="s">&quot;,&quot;</span><span class="p">))</span>
<span class="n">res</span> <span class="o">=</span> <span class="n">acc</span><span class="o">.</span><span class="n">getvalue</span><span class="p">()</span>
<span class="n">acc</span><span class="o">.</span><span class="n">close</span><span class="p">()</span> <span class="c"># close StringIO object and discard memory buffer</span>
<span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Le formatage des chaînes de caractères</strong></p>
<p>Depuis la version <strong>2.6</strong> les chaînes peuvent être formatées en utilisant la méthode <em>format()</em> et un &#8220;mini-langage&#8221; puissant de description des formats. Précédemment, le formatage était fait grâce à l&#8217;opérateur d&#8217;interpolation, expliqué plus loin.</p>
<p>Le spécificateur de substitution le plus simple est <strong>{}</strong> :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="s">&quot;Langage: {}, version: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s">&quot;Python&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">&#39;Langage: Python, version: 3&#39;</span>
</pre></div>
</div>
<p>Dans ce cas, l&#8217;ordre des substitutions dans la chaîne est identique à l&#8217;ordre des arguments de l&#8217;appel.</p>
<p>On peut (ré)utiliser les substitutions dans un ordre arbitraire en numérotant les spécificateurs:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="s">&quot;Que choisir: {2} {1} ou {2} {0} ?&quot;</span><span class="o">.</span>\
<span class="gp">... </span><span class="n">format</span><span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="s">&#39;Python&#39;</span><span class="p">)</span>
<span class="go">&#39;Que choisir: Python 2 ou Python 3 ?&#39;</span>
</pre></div>
</div>
<p>Si un des arguments de <em>format()</em> est une <strong>liste</strong>, les spécificateurs peuvent accéder ses éléments de cette liste par leur <strong>index</strong> :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">versions</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s">&quot;Que choisir: {1} {0[0]} ou {1} {0[1]} ?&quot;</span><span class="o">.</span>\
<span class="gp">... </span><span class="n">format</span><span class="p">(</span><span class="n">versions</span><span class="p">,</span><span class="s">&#39;Python&#39;</span><span class="p">)</span>
<span class="go">&#39;Que choisir: Python 2 ou Python 3 ?&#39;</span>
</pre></div>
</div>
<p>Si un des arguments de <em>format()</em> est un <strong>dictionnaire</strong>, les spécificateurs peuvent accéder ses éléments de cette liste par leur <strong>clé</strong> :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">versions</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;old_v&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;new_v&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s">&quot;Que choisir: {1} {0[old_v]} ou {1} {0[new_v]} ?&quot;</span><span class="o">.</span>\
<span class="gp">... </span><span class="n">format</span><span class="p">(</span><span class="n">versions</span><span class="p">,</span><span class="s">&#39;Python&#39;</span><span class="p">)</span>
<span class="go">&#39;Que choisir: Python 2 ou Python 3 ?&#39;</span>
</pre></div>
</div>
<p>Les spécificateurs peuvent accéder aux attributs d&#8217;un objet ou d&#8217;un module:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="o">.</span><span class="n">major</span>
<span class="go">2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="o">.</span><span class="n">minor</span>
<span class="go">7</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="o">.</span><span class="n">micro</span>
<span class="go">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s">&quot;{1} {0.major}.{0.minor}.{0.micro}&quot;</span><span class="o">.</span>\
<span class="gp">... </span><span class="n">format</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="p">,</span><span class="s">&quot;Python&quot;</span><span class="p">)</span>
<span class="go">&#39;Python 2.7.3&#39;</span>
</pre></div>
</div>
<p>Dans les exemples précédents, les arguments de <em>format()</em> sont identifiés par leur position à l&#8217;appel, mais on peut également utiliser des arguments nommés (<strong>keyword args</strong>).</p>
<p>Les exemples précédents peuvent être réécrits ainsi:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="s">&quot;Langage: {langage}, version: {version}&quot;</span><span class="o">.</span>\
<span class="gp">... </span><span class="n">format</span><span class="p">(</span><span class="n">langage</span><span class="o">=</span><span class="s">&quot;Python&quot;</span><span class="p">,</span><span class="n">version</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
<span class="go">&#39;Langage: Python, version: 3&#39;</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="s">&quot;Que choisir: {lang} {old_v} ou {lang} {new_v} ?&quot;</span><span class="o">.</span>\
<span class="gp">... </span><span class="n">format</span><span class="p">(</span><span class="n">new_v</span><span class="o">=</span><span class="mi">3</span><span class="p">,</span> <span class="n">old_v</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">lang</span><span class="o">=</span><span class="s">&#39;Python&#39;</span><span class="p">)</span>
<span class="go">&#39;Que choisir: Python 2 ou Python 3 ?&#39;</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">versions</span><span class="o">=</span><span class="p">[</span><span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s">&quot;Que choisir: {lang} {v_list[0]} ou {lang} {v_list[1]} ?&quot;</span><span class="o">.</span>\
<span class="gp">... </span><span class="n">format</span><span class="p">(</span><span class="n">v_list</span><span class="o">=</span><span class="n">versions</span><span class="p">,</span><span class="n">lang</span><span class="o">=</span><span class="s">&#39;Python&#39;</span><span class="p">)</span>
<span class="go">&#39;Que choisir: Python 2 ou Python 3 ?&#39;</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">versions</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;old_v&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;new_v&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s">&quot;Que choisir: {lang} {v_dict[old_v]} ou {lang} {v_dict[new_v]} ?&quot;</span><span class="o">.</span>\
<span class="gp">... </span><span class="n">format</span><span class="p">(</span><span class="n">v_dict</span><span class="o">=</span><span class="n">versions</span><span class="p">,</span><span class="n">lang</span><span class="o">=</span><span class="s">&#39;Python&#39;</span><span class="p">)</span>
<span class="go">&#39;Que choisir: Python 2 ou Python 3 ?&#39;</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s">&quot;{lang} {v_info.major}.{v_info.minor}.{v_info.micro}&quot;</span><span class="o">.</span>\
<span class="gp">... </span><span class="n">format</span><span class="p">(</span><span class="n">v_info</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="p">,</span><span class="n">lang</span><span class="o">=</span><span class="s">&quot;Python&quot;</span><span class="p">)</span>
<span class="go">&#39;Python 2.7.3&#39;</span>
</pre></div>
</div>
<p><strong>NB:</strong> Si on doit générer des accolades, il suffit de les doubler:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="s">&quot;Ensemble vide: {{}},1 elt:{{{0}}}, 2 elts:{{{0},{1}}}&quot;</span><span class="o">.</span>\
<span class="gp">... </span><span class="n">format</span><span class="p">(</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">)</span>
<span class="go">&#39;Ensemble vide: {},1 elt:{a}, 2 elts:{a,b}&#39;</span>
</pre></div>
</div>
<p><strong>NB:</strong> Dans les cas précédents, les formats n&#8217;étant pas spécifiés, les arguments sont convertis en <strong>str</strong> avec la conversion par défaut.</p>
<p>Les syntaxes suivantes sont correctes:</p>
<ul class="simple">
<li><strong>{}</strong> : (voir les cas précédents)</li>
<li><strong>{id}</strong> : (voir les cas précédents)</li>
<li><strong>{id!conversion}}</strong></li>
<li><strong>{id:format}</strong></li>
<li><strong>{id!conversion:format}}</strong></li>
</ul>
<p><strong>Les conversions</strong></p>
<p>Trois types de conversions sont possibles:</p>
<ul class="simple">
<li><strong>s</strong> : force la conversion en chaîne de caractères ( <strong>str</strong> ) qui est la conversion par défaut</li>
<li><strong>r</strong> : force la forme &#8220;représentative&#8221;</li>
<li><strong>a</strong> : (Python 3 seulement) force la forme &#8220;représentative&#8221; en utilisant seulement les caractères ASCII</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">datetime</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="p">(</span><span class="mi">2014</span><span class="p">,</span><span class="mi">12</span><span class="p">,</span><span class="mi">1</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">d</span> <span class="c"># affiche la forme représentative</span>
<span class="go">datetime.datetime(2014, 12, 1, 0, 0)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">str</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="go">&#39;2014-12-01 00:00:00&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s">&quot;{0} || {0!s} || {0!r}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">d</span><span class="p">)</span>
<span class="go">&#39;2014-12-01 00:00:00 || 2014-12-01 00:00:00 || datetime.datetime(2014, 12, 1, 0, 0)&#39;</span>
</pre></div>
</div>
<p><strong>Les formatage proprement dit</strong></p>
<p>Pour les chaînes de caractères il s&#8217;agit de définir:</p>
<ul class="simple">
<li>caractère de remplissage</li>
<li>alignement (à gauche, à droite, au centre)</li>
<li>largeur minimum du champ</li>
</ul>
<p>Plus spécifiquement, pour les nombres il s&#8217;agit de préciser:</p>
<ul class="simple">
<li>la base de numération pour les entiers (binaire, octal, décimal, hexadécimal ...)</li>
<li>la précision pour les flottants (6 par défaut)</li>
<li>la notation pour les flottants (exponentielle, décimale)</li>
<li>le traitement du signe</li>
</ul>
<p>La syntaxe générale du descripteur est: <cite>[[fill]align][sign][#][0][width][,][.precision][type]</cite> avec :</p>
<ul class="simple">
<li><strong>fill</strong> : tout caractère</li>
<li><strong>align</strong> :<ul>
<li><strong>&#8216;&lt;&#8217;</strong> : à gauche</li>
<li><strong>&#8216;&gt;&#8217;</strong> : à droite</li>
<li><strong>&#8216;^&#8217;</strong> : au centre</li>
<li><strong>&#8216;=&#8217;</strong> : pour les nombres, le remplissage (fill) se fera entre le signe et le nombre</li>
</ul>
</li>
<li><strong>sign</strong> :<ul>
<li><strong>&#8216;+&#8217;</strong> : toujours afficher le signe, &#8216;+&#8217; ou &#8216;-&#8216;</li>
<li><strong>&#8216;-&#8216;</strong> : afficher que le &#8216;-&#8216;, le &#8216;+&#8217; étant implicite (comportement par défaut)</li>
<li><strong>&#8216; &#8216;</strong> : un espace sera utilisé à la place du &#8216;+&#8217; pour les nombres positifs</li>
</ul>
</li>
<li><strong>#</strong> : indique si les entiers doivent être préfixés par <cite>0b</cite>, <cite>0o</cite>, <cite>0x</cite>, selon leur base</li>
<li><strong>0</strong> : remplissage avec des zéros pour les nombres (raccourci équivalent à fill:&#8216;0&#8217; et align:&#8217;=&#8217;)</li>
<li><strong>width</strong> : largeur minimum du champ</li>
<li><strong>precision</strong> : pour les flottants</li>
<li><strong>type</strong> :<ul>
<li><strong>s</strong> : chaîne de caractères (par défaut, omis d&#8217;habitude)</li>
<li><strong>d,i</strong> : entier (en décimal)</li>
<li><strong>b</strong> : entier en binaire</li>
<li><strong>o</strong> : entier en octal</li>
<li><strong>x,X</strong> : entier en hexadécimal</li>
<li><strong>e,E</strong> : flottant (notation exponentielle)</li>
<li><strong>f,F</strong> : flottant (notation décimale)</li>
<li><strong>g,G</strong> format général selon la grandeur du nombre, appliquera un de deux types précédents pour obtenir la représentation la plus compacte</li>
</ul>
</li>
</ul>
<p>Pour en savoir plus : <a class="reference external" href="https://docs.python.org/3/library/string.html#format-specification-mini-language">https://docs.python.org/3/library/string.html#format-specification-mini-language</a></p>
<p><strong>Exemples:</strong></p>
<p>Alignements :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="s">&#39;|{:&lt;20}|{:^20}|{:&gt;20}|&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s">&#39;gauche&#39;</span><span class="p">,</span> <span class="s">&#39;centre&#39;</span><span class="p">,</span> <span class="s">&#39;droite&#39;</span><span class="p">)</span>
<span class="go">&#39;|gauche              |       centre       |              droite|&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s">&#39;|{:_&lt;20}|{:=^20}|{:-&gt;20}|&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s">&#39;gauche&#39;</span><span class="p">,</span> <span class="s">&#39;centre&#39;</span><span class="p">,</span> <span class="s">&#39;droite&#39;</span><span class="p">)</span>
<span class="go">&#39;|gauche______________|=======centre=======|--------------droite|&#39;</span>
</pre></div>
</div>
<p>Affichage de flottants:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">math</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">pi</span>
<span class="go">3.141592653589793</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s">&#39;|{0:&lt;20.2f}|{0:^+20.3f}|{0:&gt;20.4f}|&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="p">)</span>
<span class="go">&#39;|3.14                |       +3.142       |              3.1416|&#39;</span>
</pre></div>
</div>
<p><strong>L&#8217;opérateur d&#8217;interpolation (%)</strong></p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">L&#8217;utilisation de cet opérateur n&#8217;est plus préconisée, même s&#8217;il est toujours présent dans Python 3. Le nouveau standard est la méthode <tt class="docutils literal"><span class="pre">format()</span></tt>, présentée précédemment.</p>
</div>
<p>Il rappelle la fonction <strong>sprintf()</strong> du <strong>C</strong> et il est de la forme:</p>
<p>format % substitution</p>
<ul class="simple">
<li>La partie <strong>format</strong> est une chaîne contenant 0..n spécificateurs de substitution</li>
<li>La partie <strong>substitution</strong> peut contenir:<ul>
<li>un tuple de valeurs ou un dictionnaire d&#8217;une taille <strong>N</strong> égale au nombre de spécificateurs si N!=1</li>
<li>un objet d&#8217;un autre type pour une substitution unique si N==1</li>
</ul>
</li>
</ul>
<p>La syntaxe d&#8217;un spécificateur de substitution dans la partie <em>format</em>  est <strong>%</strong>[kfmpl]<strong>T</strong>:</p>
<p>Seuls sont obligatoires le <strong>%</strong> initial et le <strong>T</strong> final qui représente le type de conversion encodé par une lettre:</p>
<ul class="simple">
<li><strong>s</strong> chaîne de caractères</li>
<li><strong>d,i</strong> entier (en décimal)</li>
<li><strong>o</strong> entier en octal</li>
<li><strong>x,X</strong> entier en hexadécimal</li>
<li><strong>e,E</strong> flottant (notation exponentielle)</li>
<li><strong>f,F</strong> flottant (notation décimale simple)</li>
<li>...</li>
</ul>
<p><strong>Exemple:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="s">&quot;Langage: </span><span class="si">%s</span><span class="s">, version: </span><span class="si">%d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="s">&quot;Python&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="go">&#39;Langage: Python, version: 3&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Le même exemple avec des spécificateurs nommés :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="s">&quot;Langage: </span><span class="si">%(langage)s</span><span class="s">, version: </span><span class="si">%(version)d</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">{</span><span class="s">&quot;langage&quot;</span><span class="p">:</span><span class="s">&quot;Python&quot;</span><span class="p">,</span> <span class="s">&quot;version&quot;</span><span class="p">:</span><span class="mi">3</span><span class="p">}</span>
<span class="s">&#39;Langage: Python, version: 3&#39;</span>
</pre></div>
</div>
<p>Les options ([kfmpl]), qui peuvent apparaître entre le <strong>%</strong> et le <strong>T</strong>:</p>
<ul class="simple">
<li><strong>k</strong> la clé indiquant le nom du spécificateur entre parenthèses (cf. exemple précédent avec des spécificateurs nommés et dictionnaire)</li>
<li><strong>f</strong> paramétrage pour certaines conversions comme, par exemple, justification à gauche, remplissage avec des zéros etc. (détails ici: <a class="reference external" href="http://docs.python.org/2/library/stdtypes.html#string-formatting-operations">http://docs.python.org/2/library/stdtypes.html#string-formatting-operations</a>).</li>
<li><strong>m</strong> taille minimum du résultat</li>
<li><strong>p</strong> précision (entier précédé par un point)</li>
<li><strong>l</strong> peut être l,h ou L. Ce paramètre est ignoré (gardé juste pour la compatibilité avec le <strong>C</strong>)</li>
</ul>
<p><strong>Exemple:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">math</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">pi</span>
<span class="go">3.141592653589793</span>
<span class="gp">&gt;&gt;&gt; </span><span class="s">&quot;PI: </span><span class="si">%10.2f</span><span class="s">&quot;</span> <span class="o">%</span> <span class="n">math</span><span class="o">.</span><span class="n">pi</span>
<span class="go">&#39;PI:       3.14&#39;</span>
</pre></div>
</div>
<p>Plus de détails sur l&#8217;ensemble des options <strong>[kfmpl]</strong> ainsi que la liste exhaustive de types de conversion sont accessibles ici:  <a class="reference external" href="http://docs.python.org/2/library/stdtypes.html#string-formatting-operations">http://docs.python.org/2/library/stdtypes.html#string-formatting-operations</a></p>
<p><strong>NB:</strong> En Python, il n&#8217;existe pas de type &#8220;caractère&#8221;. Un élément d&#8217;une chaîne est à son tour une chaîne à un seul élément:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">)</span>
<span class="go">&lt;type &#39;str&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">=</span><span class="s">&quot;foo&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">&lt;type &#39;str&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="go">&#39;o&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="go">&lt;type &#39;str&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
<span class="go">&#39;o&#39;</span>
</pre></div>
</div>
<div class="warning admonition note">
<p class="first admonition-title">Note</p>
<p>Mais qu&#8217;est-ce qu&#8217;un caractère ?</p>
<ul class="last simple">
<li>Pour l&#8217;utilisateur, il s&#8217;agit d&#8217;une lettre, d&#8217;un symbole, d&#8217;un contrôle</li>
<li>Pour un langage de programmation, un caractère à été longtemps un octet, un code <em>ASCII</em>. Avec l&#8217;internationalisation, les choses ont changé...</li>
</ul>
</div>
<p>A ses débuts, et jusqu&#8217;à une date récente, <em>Python</em> a représenté les caractères par des octets encodés en <em>ASCII</em>, comme bien d&#8217;autres langages (n&#8217;oublions pas qu&#8217;en <strong>C</strong> le type <strong>char</strong> a la taille d&#8217;un octet!). Le type <strong>str</strong> a été, avant la version 3, une séquence d&#8217;octets. Cette approche a montré ses limites assez tôt et la version 2.0 introduisait déjà un nouveau type, appelé <strong>unicode</strong> ...</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Un peu d&#8217;histoire...</p>
<ul class="last simple">
<li>Au départ (1963), il y a eu <em>ASCII</em> (American Standard Code for Information Interchange):<ul>
<li>128 codes (2^7 car encodage sur 7 bits seulement)</li>
<li>bijection &#8220;caractère &lt;=&gt; octet&#8221;</li>
<li>jeu de caractères limité aux besoins de l&#8217;anglais (pas de caractères accentués)</li>
</ul>
</li>
<li>Plus tard (1987), une première tentative d&#8217;internationalisation, la norme IS0/CEI 8859:<ul>
<li>256 codes (2^8)</li>
<li>sur-ensemble <em>ASCII</em></li>
<li>déclinée en plusieurs jeux de caractères nationaux, dont <em>ISO 8859-1</em> (ou <em>Latin-1</em>) pour l&#8217;Europe de l&#8217;Ouest.</li>
<li>(+) bijection &#8220;caractère &lt;=&gt; octet&#8221; préservée</li>
<li>(-) impossible de combiner plusieurs jeux de caractères dans un même document (par exemple : un texte en français avec des citations en grec)</li>
<li>(-) pas de solution pour les jeux de caractères riches (chinois, par exemple)</li>
</ul>
</li>
<li>1990 <em>Unicode</em>, standard qui définit un jeu de caractères unique<ul>
<li>1114112 codes (de 0x00 à 0x10FFFF)</li>
<li>couvrant la plupart des alphabets connus, symboles mathématiques etc.( <a class="reference external" href="http://www.unicode.org/charts/">http://www.unicode.org/charts/</a>)</li>
<li>abandon de la représentation &#8220;octet&#8221;, au profit du &#8220;code point&#8221; (point code), numéro unique pour chaque caractère, implémenté dans les langages comme un <strong>int</strong></li>
<li>reste un sur-ensemble <em>ASCII</em> (malgré l&#8217;abandon de la représentation octet)</li>
<li>bijection &#8220;caractère &lt;=&gt; code point&#8221;</li>
</ul>
</li>
</ul>
</div>
<p>La représentation des caractères par des points code ne pose pas de problème tant qu&#8217;il n&#8217;y a pas d&#8217;opération d&#8217;entrée-sortie. Par contre, les points code, qui sont des entiers, ne peuvent pas être utilisés tels quels dans les opérations d&#8217;entrée-sortie pour au moins deux raisons:
..  la représentation interne des points code n&#8217;est pas standardisée. Par exemple, un langage peut très bien les représenter avec des entiers 64 bits, un autre avec des int 32 bits.</p>
<ul class="simple">
<li>la représentation en mémoire des points code peut varier en fonction :<ul>
<li>des choix d&#8217;implémentation, les points code étant simplement des entiers</li>
<li>de l&#8217;architecture physique (<em>little endian</em> ou <em>big endian</em>)</li>
</ul>
</li>
<li>tous les protocoles et <em>APIs</em> d&#8217;entrée/sortie sont conçus pour manipuler des octets.</li>
</ul>
<p><strong>Que faire</strong> (pour travailler en <em>Unicode</em>) <strong>?</strong></p>
<ul class="simple">
<li>décoder les entrées (octets = &gt; Unicode)</li>
<li>encoder les sorties (Unicode =&gt; octets)</li>
</ul>
<p>Les encodages <strong>UTF</strong> (Unicode Transformation Format) se déclinent en UTF-8, UTF-16  et UTF-32</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="42%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">UTF</th>
<th class="head">Format</th>
<th class="head">Commentaires</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>UTF-8</td>
<td>variable (1-4 octets)</td>
<td>Encodage par défaut dans Python 3.x</td>
</tr>
<tr class="row-odd"><td>UTF-16</td>
<td>variable (1-2 mots de 16 bits)</td>
<td>Utilisé par Windows et Java</td>
</tr>
<tr class="row-even"><td>UTF-32</td>
<td>fixe (32 bits)</td>
<td>Non supportée dans Python</td>
</tr>
</tbody>
</table>
<p><strong>Remarque:</strong> Les fichiers <em>UTF*</em> peuvent contenir au début une signature de 4 octets appelée <strong>BOM</strong> (Byte Order Mark). Non obligatoire pour <em>UTF-8</em>, elle permet de déterminer l&#8217;ordre des octets à la lecture d&#8217;un fichier UTF-16 ou UTF-32 car ces deux formats dépendent de l&#8217;<em>endianité</em>.</p>
<p>Pour en savoir plus sur <em>Unicode</em> et <em>UTF</em>: <a class="reference external" href="http://www.unicode.org/faq/utf_bom.html">http://www.unicode.org/faq/utf_bom.html</a></p>
<p>Le détail de l&#8217;encodage <em>UTF-8</em>:</p>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="23%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Octets</th>
<th class="head">Bits codants</th>
<th class="head">Format</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>1</td>
<td>7</td>
<td>0xxxxxxx (<em>ASCII</em>)</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>11</td>
<td>110xxxxx 10xxxxxx</td>
</tr>
<tr class="row-even"><td>3</td>
<td>16</td>
<td>1110xxxx 10xxxxxx 10xxxxxx</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>21</td>
<td>11110xxx 10xxxxxx 10xxxxxx 10xxxxxx</td>
</tr>
</tbody>
</table>
<p>Le traitement des chaînes de caractères est un point majeur de divergence entre les versions 2 et 3 de Python.</p>
</div>
<div class="section" id="les-chaines-de-caracteres-en-python-2">
<h4>Les chaînes de caractères en Python 2<a class="headerlink" href="#les-chaines-de-caracteres-en-python-2" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p class="first">l&#8217;encodage par défaut est l&#8217;<em>ASCII</em>:</p>
<div class="highlight-python"><div class="highlight"><pre>Python 2.7.3 (default, Sep 26 2013, 20:03:06)
[GCC 4.6.3] on linux2
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; import sys
&gt;&gt;&gt; sys.getdefaultencoding()
&#39;ascii&#39;
</pre></div>
</div>
</li>
<li><p class="first">l&#8217;encodage par défaut ne s&#8217;applique pas pour l&#8217;entrée et pour la sortie standard, qui utilisent l&#8217;encodage de votre environnement (la variable <tt class="docutils literal"><span class="pre">$LANG</span></tt> sous Linux). Dans les environnements Linux récents, <em>LANG=UTF-8</em> par défaut.</p>
<div class="highlight-python"><div class="highlight"><pre>Python 2.7.3 (default, Sep 26 2013, 20:03:06)
[GCC 4.6.3] on linux2
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; import sys
&gt;&gt;&gt; sys.stdin.encoding
&#39;UTF-8&#39;
&gt;&gt;&gt; sys.stdout.encoding
&#39;UTF-8&#39;
</pre></div>
</div>
</li>
<li><p class="first">Le type <strong>str</strong> est une séquence d&#8217;octets. En complément, depuis la version 2.0, on dispose du type <strong>unicode</strong> pour gérer les caractères <em>non-ASCII</em>.</p>
</li>
</ul>
<p>Cette implémentation n&#8217;est pas sans conséquences :</p>
<ul>
<li><p class="first">Les chaînes contenant des caractères non-ASCII sont plus longues que le nombre de symboles représentés:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span> <span class="o">=</span> <span class="s">&quot;Café&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s</span>
<span class="go">&#39;Caf\xc3\xa9&#39;</span>
</pre></div>
</div>
</li>
<li><p class="first">Il n&#8217;y a pas de bijection entre chaque caractère et une position dans la séquence</p>
</li>
</ul>
<p><strong>Explication:</strong> La longueur affichée est de 5 au lieu de 4 car l&#8217;entrée standard utilise l&#8217;encodage du sytème d&#8217;exploitation qui est (dans ce cas) <cite>UTF-8</cite>. Le caractère <strong>é</strong> est encodé par les deux octets <tt class="docutils literal"><span class="pre">\xc3\xa9</span></tt>. Sur un système basé sur un autre encodage, le résultat pourrait être différent...</p>
<p>Pour rétablir la bijection <cite>caractère &lt;=&gt; donnée</cite> il faut décoder la chaîne pour obtenir une séquence <em>Unicode</em>. Cette opération nous réserve une nouvelle surprise:</p>
<div class="highlight-python"><div class="highlight"><pre>&gt;&gt;&gt; s=&quot;Café&quot;
&gt;&gt;&gt; s.decode()
Traceback (most recent call last):
File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
UnicodeDecodeError: &#39;ascii&#39; codec can&#39;t decode byte 0xc3 in position 3: ordinal not in range(128)
</pre></div>
</div>
<p>Enfin, en utilisant le bon format, <em>UTF-8</em>, on obtient :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">=</span><span class="n">s</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&#39;UTF-8&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span>
<span class="go">u&#39;Caf\xe9&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>
<span class="go">&lt;type &#39;unicode&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">u</span>
<span class="go">Café</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>
<span class="go">4</span>
</pre></div>
</div>
<p><strong>Remarque:</strong> Un format de décodage inadapté ne produit pas forcément une erreur mais le résultat sera décevant:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">=</span><span class="s">&quot;Café&quot;</span> <span class="c"># chaîne UTF-8</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">=</span><span class="n">s</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;iso-8859-1&quot;</span><span class="p">)</span> <span class="c">#mauvais format</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">u</span><span class="p">)</span>
<span class="go">5</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">u</span>
<span class="go">CafÃ©</span>
</pre></div>
</div>
<p>On peut concaténer objets unicode et objets str (le type de l&#8217;objet résultat sera unicode):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">s</span><span class="o">=</span><span class="s">&quot;Café&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">s2</span><span class="o">=</span><span class="s">&quot; concert&quot;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u</span><span class="o">=</span><span class="n">s</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s">&quot;UTF-8&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">u</span>
<span class="go">Café</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">s2</span>
<span class="go">concert</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">u2</span><span class="o">=</span><span class="n">u</span><span class="o">+</span><span class="n">s2</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">u2</span>
<span class="go">Café concert</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">u2</span><span class="p">)</span>
<span class="go">&lt;type &#39;unicode&#39;&gt;</span>
</pre></div>
</div>
<p>Le passage de <em>unicode</em> à <em>str</em> se fait par <em>encodage</em>, toujours en indiquant le bon format:</p>
<div class="highlight-python"><div class="highlight"><pre>&gt;&gt;&gt; u2
u&#39;Caf\xe9 concert&#39;
&gt;&gt;&gt; print u2
Café concert
&gt;&gt;&gt; u2.encode()
Traceback (most recent call last):
File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
UnicodeEncodeError: &#39;ascii&#39; codec can&#39;t encode character u&#39;\xe9&#39; in position 3: ordinal not in range(128)
&gt;&gt;&gt; u2.encode(&#39;UTF-8&#39;)
&#39;Caf\xc3\xa9 concert&#39;
&gt;&gt;&gt; print &#39;Caf\xc3\xa9 concert&#39;
Café concert
</pre></div>
</div>
<p><strong>Conseil</strong> pour le traitement des chaînes d&#8217;entrée-sortie:</p>
<ul class="simple">
<li><strong>décoder</strong> le plus tôt possible pour passer à <strong>unicode</strong></li>
<li>faire les traitements en <strong>unicode</strong></li>
<li><strong>encoder</strong> le résultat le plus tard possible (pour la sortie)</li>
</ul>
<p class="graphviz">
<img src="_images/graphviz-a09b8ecc8eb7f183f7e71e9d8c1ed66a1a858a4e.png" alt="digraph unicode_str {
rankdir=&quot;LR&quot;
unicode -&gt; str [ label=&quot;encode()&quot; rankdir=&quot;LR&quot; ];
str -&gt; unicode [ label=&quot;decode()&quot;  rankdir=&quot;LR&quot; ];
}" />
</p>
<p>En Python 2, le type <strong>bytes</strong> est un simple alias pour <strong>str</strong></p>
</div>
<div class="section" id="les-chaines-de-caracteres-en-python-3">
<h4>Les chaînes de caractères en Python 3<a class="headerlink" href="#les-chaines-de-caracteres-en-python-3" title="Permalink to this headline">¶</a></h4>
<p>Le traitement des chaînes de caractères, avec l&#8217;adoption du standard <em>Unicode</em> pour le type <em>str</em>, est un des grands progrès de Python 3, mais les structures de données de la version précédente sont bouleversées:</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="27%" />
<col width="66%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Type</th>
<th class="head">Python 2</th>
<th class="head">Python 3</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>str</td>
<td>séquence d&#8217;octets</td>
<td>adopte la structure <strong>unicode</strong> de la V2</td>
</tr>
<tr class="row-odd"><td>unicode</td>
<td>séquence d&#8217;entiers (points code)</td>
<td>disparaît car devenu inutile</td>
</tr>
<tr class="row-even"><td>bytes</td>
<td>simple alias pour str</td>
<td>comportement inchangé mais ce n&#8217;est plus un alias, mais un type à part entière</td>
</tr>
</tbody>
</table>
<p>De plus, l&#8217;encodage par défaut n&#8217;est plus l&#8217;<em>ASCII</em>, mais <strong>UTF-8</strong>.</p>
<div class="highlight-python"><div class="highlight"><pre>Python 3.2.3 (default, Sep 25 2013, 18:22:43)
[GCC 4.6.3] on linux2
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; s=&quot;Café&quot;
&gt;&gt;&gt; s
&#39;Café&#39;
&gt;&gt;&gt; len(s)
4
</pre></div>
</div>
<p>Les opérations d&#8217;entrée sortie sont facilitées, surtout quand l&#8217;encodage &#8216;UTF-8&#8217; est utilisé. On n&#8217;est pas complètement à l&#8217;abri des problèmes évoqué précédemment, car le format &#8216;UTF-8&#8217;, même s&#8217;il est de plus en plus répandu, il n&#8217;est pas unique. Des logiciels produisant des fichiers ISO-8859 sont encore en service, le format UTF-16 est utilisé dans certains environnements.</p>
</div>
</div>
<div class="section" id="les-dictionnaires">
<h3>Les dictionnaires<a class="headerlink" href="#les-dictionnaires" title="Permalink to this headline">¶</a></h3>
<p>Les dictionnaires sont des collections de couples clé-valeur donnant un accès efficace à chaque valeur à travers sa clé correspondante.
Propriétés:</p>
<ul class="simple">
<li>Chaque clé est unique et non modifiable.</li>
<li>Les éléments ne sont pas ordonnés</li>
<li>Les valeurs associés aux clé peuvent être de n&#8217;importe quel type, modifiable ou pas</li>
<li>Les dictionnaires sont des objets modifiables: on peut ajouter ou retirer des éléments, modifier les valeurs associées aux clés.</li>
</ul>
<p>Syntaxiquement, l&#8217;élément générique est de la forme <em>&lt;clé&gt;:&lt;valeur&gt;</em>. Les éléments sont écrits entre accolades et séparés par des virgules:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">account</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;sn&#39;</span><span class="p">:</span><span class="s">&#39;Poli&#39;</span><span class="p">,</span><span class="s">&#39;gn&#39;</span><span class="p">:</span><span class="s">&#39;Christian&#39;</span><span class="p">,</span><span class="s">&#39;login&#39;</span><span class="p">:</span><span class="s">&#39;cpoli&#39;</span><span class="p">,</span><span class="s">&#39;uid&#39;</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span><span class="s">&#39;gid&#39;</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span><span class="s">&#39;groups&#39;</span><span class="p">:[</span><span class="mi">1005</span><span class="p">,</span><span class="mi">1007</span><span class="p">]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">account</span>
<span class="go">{&#39;sn&#39;: &#39;Poli&#39;, &#39;uid&#39;: 1000, &#39;gid&#39;: 1000, &#39;groups&#39;: [1005, 1007], &#39;login&#39;: &#39;cpoli&#39;, &#39;gn&#39;: &#39;Christian&#39;}</span>
</pre></div>
</div>
<p>Une écriture alternative utilisant la fonction native <em>dict()</em> (qui est un constructeur) :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">account</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">sn</span><span class="o">=</span><span class="s">&#39;Poli&#39;</span><span class="p">,</span><span class="n">gn</span><span class="o">=</span><span class="s">&#39;Christian&#39;</span><span class="p">,</span><span class="n">login</span><span class="o">=</span><span class="s">&#39;cpoli&#39;</span><span class="p">,</span><span class="n">uid</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">gid</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">groups</span><span class="o">=</span><span class="p">[</span><span class="mi">1005</span><span class="p">,</span><span class="mi">1007</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">account</span>
<span class="go">{&#39;sn&#39;: &#39;Poli&#39;, &#39;gid&#39;: 1000, &#39;uid&#39;: 1000, &#39;groups&#39;: [1005, 1007], &#39;login&#39;: &#39;cpoli&#39;, &#39;gn&#39;: &#39;Christian&#39;}</span>
</pre></div>
</div>
<p><strong>Remarque:</strong> Cette écriture alternative est réservée aux situations où les clés peuvent s&#8217;écrire sous forme d&#8217;identifiants et respectent donc la syntaxe des noms des variables.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Pour garantir la cohérence des dictionnaires, seulement les objets immuables peuvent servir de clés.</p>
</div>
<p>L&#8217;implémentation des dictionnaires est basée sur des &#8220;hash tables&#8221; (tableaux associatifs) et les objets faisant office de clés doivent disposer d&#8217;une fonction de hashage, implémentée seulement par les objets immuables. Ainsi, par exemple, une chaîne de caractères peut servir de clé mais une liste ne le peut pas car:</p>
<div class="highlight-python"><div class="highlight"><pre>&gt;&gt;&gt; hash(&quot;Café&quot;)
7319500004332556263
&gt;&gt;&gt; hash([1,2,3])
Traceback (most recent call last):
File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
TypeError: unhashable type: &#39;list&#39;
</pre></div>
</div>
<p><strong>Accès aux valeurs:</strong></p>
<p>La syntaxe rappelle celle utilisée pour accéder aux valeurs d&#8217;une séquence modifiable, les index étant remplacés par des clés:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">account</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;sn&#39;</span><span class="p">:</span><span class="s">&#39;Poli&#39;</span><span class="p">,</span><span class="s">&#39;gn&#39;</span><span class="p">:</span><span class="s">&#39;Christian&#39;</span><span class="p">,</span><span class="s">&#39;login&#39;</span><span class="p">:</span><span class="s">&#39;cpoli&#39;</span><span class="p">,</span><span class="s">&#39;uid&#39;</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span><span class="s">&#39;gid&#39;</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span><span class="s">&#39;groups&#39;</span><span class="p">:[</span><span class="mi">1005</span><span class="p">,</span><span class="mi">1007</span><span class="p">]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">account</span><span class="p">[</span><span class="s">&#39;sn&#39;</span><span class="p">]</span>
<span class="go">&#39;Poli&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">account</span><span class="p">[</span><span class="s">&#39;login&#39;</span><span class="p">]</span><span class="o">=</span><span class="s">&#39;christian&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">account</span>
<span class="go">{&#39;sn&#39;: &#39;Poli&#39;, &#39;gn&#39;: &#39;Christian&#39;, &#39;gid&#39;: 1000, &#39;groups&#39;: [1005, 1007], &#39;login&#39;: &#39;christian&#39;, &#39;uid&#39;: 1000}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">account</span><span class="p">[</span><span class="s">&#39;office&#39;</span><span class="p">]</span><span class="o">=</span><span class="mi">14</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">account</span>
<span class="go">{&#39;sn&#39;: &#39;Poli&#39;, &#39;gn&#39;: &#39;Christian&#39;, &#39;office&#39;: 14, &#39;gid&#39;: 1000, &#39;groups&#39;: [1005, 1007], &#39;login&#39;: &#39;christian&#39;, &#39;uid&#39;: 1000}</span>
</pre></div>
</div>
<p>Bien sûr, le slicing n&#8217;existe pas, les clés n&#8217;étant pas ordonnées.</p>
<p><strong>Suppressions:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">account</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;sn&#39;</span><span class="p">:</span><span class="s">&#39;Poli&#39;</span><span class="p">,</span><span class="s">&#39;gn&#39;</span><span class="p">:</span><span class="s">&#39;Christian&#39;</span><span class="p">,</span><span class="s">&#39;login&#39;</span><span class="p">:</span><span class="s">&#39;cpoli&#39;</span><span class="p">,</span><span class="s">&#39;uid&#39;</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span><span class="s">&#39;gid&#39;</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span><span class="s">&#39;groups&#39;</span><span class="p">:[</span><span class="mi">1005</span><span class="p">,</span><span class="mi">1007</span><span class="p">]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">del</span> <span class="n">account</span><span class="p">[</span><span class="s">&#39;groups&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">account</span>
<span class="go">{&#39;sn&#39;: &#39;Poli&#39;, &#39;gn&#39;: &#39;Christian&#39;, &#39;gid&#39;: 1000, &#39;login&#39;: &#39;cpoli&#39;, &#39;uid&#39;: 1000}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">account</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">account</span>
<span class="go">{}</span>
</pre></div>
</div>
<p>En dehors des fonctionnalités communes à tous les conteneurs, les dictionnaires disposent de plusieurs méthodes spécifiques intéressantes:</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="79%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Méthode</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>keys()</td>
<td>fournit les clés du dictionnaire</td>
</tr>
<tr class="row-odd"><td>values()</td>
<td>fournit les valeurs associées aux clés</td>
</tr>
<tr class="row-even"><td>items()</td>
<td>fournit les couples (clé,valeur)</td>
</tr>
<tr class="row-odd"><td>get(cle,defaut)</td>
<td>fournit la valeur associée à la clé si la clé est présente, sinon renvoie defaut</td>
</tr>
<tr class="row-even"><td><span class="strike">has_key(cle)</span></td>
<td>teste la présence d&#8217;une clé (<strong>supprimée dans la version 3</strong>)</td>
</tr>
<tr class="row-odd"><td>copy()</td>
<td>copie superficielle</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>Le résultat retourné par les méthodes keys(), values(), items() est:</p>
<ul class="simple">
<li>une liste en Python 2.x</li>
<li>un itérateur en Python 3.x</li>
</ul>
<p>Les 3 méthodes retournant des itérateurs ont été introduites comme implémentations alternatives, plus performantes, des méthodes <em>keys()</em>, <em>values()</em>,*items()* dans <strong>Python 2.2</strong> sous les noms <em>iterkeys()</em>, <em>itervalues()</em>, <em>iteritems()</em>.</p>
<p class="last">A partir de <strong>Python 3.0</strong> les méthodes <em>iter...()</em> ont remplacé les méthodes les implémentations anciennes, retournant des listes.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">account</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;sn&#39;</span><span class="p">:</span><span class="s">&#39;Poli&#39;</span><span class="p">,</span><span class="s">&#39;gn&#39;</span><span class="p">:</span><span class="s">&#39;Christian&#39;</span><span class="p">,</span><span class="s">&#39;login&#39;</span><span class="p">:</span><span class="s">&#39;cpoli&#39;</span><span class="p">,</span><span class="s">&#39;uid&#39;</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span><span class="s">&#39;gid&#39;</span><span class="p">:</span><span class="mi">1000</span><span class="p">,</span><span class="s">&#39;groups&#39;</span><span class="p">:[</span><span class="mi">1005</span><span class="p">,</span><span class="mi">1007</span><span class="p">]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">account</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
<span class="go">[&#39;sn&#39;, &#39;gn&#39;, &#39;gid&#39;, &#39;groups&#39;, &#39;login&#39;, &#39;uid&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">account</span><span class="o">.</span><span class="n">values</span><span class="p">()</span>
<span class="go">[&#39;Poli&#39;, &#39;Christian&#39;, 1000, [1005, 1007], &#39;cpoli&#39;, 1000]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">account</span><span class="o">.</span><span class="n">items</span><span class="p">()</span>
<span class="go">[(&#39;sn&#39;, &#39;Poli&#39;), (&#39;gn&#39;, &#39;Christian&#39;), (&#39;gid&#39;, 1000), (&#39;groups&#39;, [1005, 1007]), (&#39;login&#39;, &#39;cpoli&#39;), (&#39;uid&#39;, 1000)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">account</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="s">&quot;gid&quot;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">account</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="s">&quot;email&quot;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">account</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;email&quot;</span><span class="p">,</span><span class="s">&quot;inconnu&quot;</span><span class="p">)</span>
<span class="go">&#39;inconnu&#39;</span>
</pre></div>
</div>
<p><strong>Question de style...</strong></p>
<p>Ecrire:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="hll"><span class="k">if</span> <span class="s">&#39;login&#39;</span> <span class="ow">in</span> <span class="n">account</span><span class="p">:</span>
</span>    <span class="n">val</span> <span class="o">=</span> <span class="n">account</span><span class="p">[</span><span class="s">&#39;login&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>au lieu de :</p>
<div class="nogood container">
<div class="highlight-python"><div class="highlight"><pre><span class="k">if</span> <span class="n">account</span><span class="o">.</span><span class="n">has_key</span><span class="p">(</span><span class="s">&#39;login&#39;</span><span class="p">):</span>
    <span class="n">val</span> <span class="o">=</span> <span class="n">account</span><span class="p">[</span><span class="s">&#39;login&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<p>ou de:</p>
<div class="nogood container">
<div class="highlight-python"><div class="highlight"><pre><span class="k">if</span> <span class="s">&#39;login&#39;</span> <span class="ow">in</span> <span class="n">account</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
    <span class="n">val</span> <span class="o">=</span> <span class="n">account</span><span class="p">[</span><span class="s">&#39;login&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<p>Ecrire:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="hll"><span class="n">val</span> <span class="o">=</span> <span class="n">account</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;login&quot;</span><span class="p">,</span><span class="s">&quot;anonymous&quot;</span><span class="p">)</span>
</span></pre></div>
</div>
<p>au lieu de :</p>
<div class="nogood container">
<div class="highlight-python"><div class="highlight"><pre><span class="k">if</span> <span class="s">&#39;login&#39;</span> <span class="ow">in</span> <span class="n">account</span><span class="p">:</span>
    <span class="n">val</span> <span class="o">=</span> <span class="n">account</span><span class="p">[</span><span class="s">&#39;login&#39;</span><span class="p">]</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">val</span> <span class="o">=</span> <span class="s">&quot;anonymous&quot;</span>
</pre></div>
</div>
</div>
<p>Dans un traitement nécessitant aussi bien la présence des clés que celles des valeurs associées, éviter d&#8217;écrire (même si ce n&#8217;est pas incorrect):</p>
<div class="nogood container">
<div class="highlight-python"><div class="highlight"><pre><span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">account</span><span class="p">:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;{}: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">account</span><span class="p">[</span><span class="n">key</span><span class="p">]))</span>
</pre></div>
</div>
</div>
<p>écrire plutôt:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">for</span> <span class="n">key</span><span class="p">,</span><span class="n">val</span> <span class="ow">in</span> <span class="n">account</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;{}: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">key</span><span class="p">,</span> <span class="n">val</span><span class="p">))</span>
</pre></div>
</div>
<p><strong>Dictionnaires et autres itérables:</strong></p>
<p>La méthode <em>items()</em>, employée dans l&#8217;exemple précédent, fournit  un itérable (liste en Python2) de tuples correspondant aux paires clé-valeur du dictionnaire:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">account</span>
<span class="go">{&#39;uid&#39;: 1000, &#39;gid&#39;: 1000, &#39;sn&#39;: &#39;Poli&#39;, &#39;groups&#39;: [1005, 1007], &#39;gn&#39;: &#39;Christian&#39;, &#39;login&#39;: &#39;cpoli&#39;}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="n">account</span><span class="o">.</span><span class="n">items</span><span class="p">())</span>
<span class="go">[(&#39;uid&#39;, 1000), (&#39;gid&#39;, 1000), (&#39;sn&#39;, &#39;Poli&#39;), (&#39;groups&#39;, [1005, 1007]), (&#39;gn&#39;, &#39;Christian&#39;), (&#39;login&#39;, &#39;cpoli&#39;)]</span>
</pre></div>
</div>
<p>On peut également réunir les éléments de deux ou plusieurs sequences distinctes en une séquence (liste en Python2, itérateur en Python 3) de tuples avec la fonction <em>zip()</em>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">account_keys</span>
<span class="go">[&#39;uid&#39;, &#39;gid&#39;, &#39;sn&#39;, &#39;groups&#39;, &#39;gn&#39;, &#39;login&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">account_values</span>
<span class="go">[1000, 1000, &#39;Poli&#39;, [1005, 1007], &#39;Christian&#39;, &#39;cpoli&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">account_keys</span><span class="p">,</span><span class="n">account_values</span><span class="p">))</span>
<span class="go">[(&#39;uid&#39;, 1000), (&#39;gid&#39;, 1000), (&#39;sn&#39;, &#39;Poli&#39;), (&#39;groups&#39;, [1005, 1007]), (&#39;gn&#39;, &#39;Christian&#39;), (&#39;login&#39;, &#39;cpoli&#39;)]</span>
</pre></div>
</div>
<p>A partir d&#8217;une liste (ou autre itérable) de paires on peut construire un dictionnaire:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">zipped</span>
<span class="go">[(&#39;uid&#39;, 1000), (&#39;gid&#39;, 1000), (&#39;sn&#39;, &#39;Poli&#39;), (&#39;groups&#39;, [1005, 1007]), (&#39;gn&#39;, &#39;Christian&#39;), (&#39;login&#39;, &#39;cpoli&#39;)]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">dict</span><span class="p">(</span><span class="n">zipped</span><span class="p">)</span>
<span class="go">{&#39;uid&#39;: 1000, &#39;gid&#39;: 1000, &#39;sn&#39;: &#39;Poli&#39;, &#39;groups&#39;: [1005, 1007], &#39;gn&#39;: &#39;Christian&#39;, &#39;login&#39;: &#39;cpoli&#39;}</span>
</pre></div>
</div>
<p>Les dictionnaires en intension, c&#8217;est possible :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="p">{</span><span class="n">x</span><span class="p">:</span><span class="nb">ord</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="s">&quot;Python&quot;</span><span class="p">}</span>
<span class="go">{&#39;h&#39;: 104, &#39;o&#39;: 111, &#39;n&#39;: 110, &#39;P&#39;: 80, &#39;t&#39;: 116, &#39;y&#39;: 121}</span>
</pre></div>
</div>
<div class="section" id="id6">
<h4>Exercice<a class="headerlink" href="#id6" title="Permalink to this headline">¶</a></h4>
<div class="myexercice container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: week_dict.py</span>

<span class="sd">Soient les deux variables, week_fr_en et week_fr:</span>

<span class="sd">- La variable week_fr_en contient le dictionnaire français=&gt;anglais pour les </span>
<span class="sd">  jours de la semaine.</span>

<span class="sd">- La liste week_fr contient les noms des jours de la semaine en français,</span>
<span class="sd">  dans le bon ordre</span>

<span class="sd">a) En utilisant les listes en intension, construire à partir des deux </span>
<span class="sd">   collections précédentes la liste week_en des noms des jours de la </span>
<span class="sd">   semaine en anglais dans le bon ordre.</span>

<span class="sd">b) Ecrire une programme interactif qui demande la saisie d&#39;un jour de la </span>
<span class="sd">   semaine. Le mot saisi est recherché  dans week_fr, puis, en cas d&#39;échec, </span>
<span class="sd">   dans week_en (utiliser les méthodes prédéfinies pour les séquences).</span>
<span class="sd">   Si le mot est trouvé dans une des deux listes, afficher la position dans</span>
<span class="sd">   la liste et la langue de la liste.</span>
<span class="sd">   En cas de recherche infructueuse lèver une exception ValueError.</span>

<span class="sd">c) En utilisant week_fr, écrire une boucle for..in qui affiche les jours de la</span>
<span class="sd">   semaine,numérotés, un par ligne, sous la forme:</span>

<span class="sd">   0 - lundi</span>
<span class="sd">   1 - mardi</span>
<span class="sd">   ....</span>

<span class="sd">d) Modifier le programme pour une numérotation à partir de 1:</span>
<span class="sd">   1 - lundi</span>
<span class="sd">   2 - mardi</span>
<span class="sd">   .....</span>

<span class="sd">e) à partir des collections précédentes (fournies et/ou construites, au choix) </span>
<span class="sd">   construire le dictionnaire inversé week_en_fr (plusieurs solutions)</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">week_fr_en</span> <span class="o">=</span> <span class="p">{</span> <span class="s">&quot;jeudi&quot;</span><span class="p">:</span><span class="s">&quot;thursday&quot;</span><span class="p">,</span> <span class="s">&quot;vendredi&quot;</span><span class="p">:</span><span class="s">&quot;friday&quot;</span><span class="p">,</span> <span class="s">&quot;samedi&quot;</span><span class="p">:</span><span class="s">&quot;saturday&quot;</span><span class="p">,</span>
               <span class="s">&quot;lundi&quot;</span><span class="p">:</span><span class="s">&quot;monday&quot;</span><span class="p">,</span> <span class="s">&quot;mardi&quot;</span><span class="p">:</span><span class="s">&quot;tuesday&quot;</span><span class="p">,</span> <span class="s">&quot;mercredi&quot;</span><span class="p">:</span><span class="s">&quot;wednesday&quot;</span><span class="p">,</span> 
               <span class="s">&quot;dimanche&quot;</span><span class="p">:</span><span class="s">&quot;sunday&quot;</span> <span class="p">}</span>

<span class="n">week_fr</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;lundi&quot;</span><span class="p">,</span> <span class="s">&quot;mardi&quot;</span><span class="p">,</span> <span class="s">&quot;mercredi&quot;</span><span class="p">,</span> <span class="s">&quot;jeudi&quot;</span><span class="p">,</span> <span class="s">&quot;vendredi&quot;</span><span class="p">,</span> <span class="s">&quot;samedi&quot;</span><span class="p">,</span> 
           <span class="s">&quot;dimanche&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="tohide container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: week_dict_sol.py</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">week_fr_en</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;jeudi&quot;</span><span class="p">:</span><span class="s">&quot;thursday&quot;</span><span class="p">,</span> <span class="s">&quot;vendredi&quot;</span><span class="p">:</span><span class="s">&quot;friday&quot;</span><span class="p">,</span> <span class="s">&quot;samedi&quot;</span><span class="p">:</span><span class="s">&quot;saturday&quot;</span><span class="p">,</span>
              <span class="s">&quot;lundi&quot;</span><span class="p">:</span><span class="s">&quot;monday&quot;</span><span class="p">,</span> <span class="s">&quot;mardi&quot;</span><span class="p">:</span><span class="s">&quot;tuesday&quot;</span><span class="p">,</span> <span class="s">&quot;mercredi&quot;</span><span class="p">:</span><span class="s">&quot;wednesday&quot;</span><span class="p">,</span>
              <span class="s">&quot;dimanche&quot;</span><span class="p">:</span><span class="s">&quot;sunday&quot;</span><span class="p">}</span>

<span class="n">week_fr</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;lundi&quot;</span><span class="p">,</span> <span class="s">&quot;mardi&quot;</span><span class="p">,</span> <span class="s">&quot;mercredi&quot;</span><span class="p">,</span> 
           <span class="s">&quot;jeudi&quot;</span><span class="p">,</span> <span class="s">&quot;vendredi&quot;</span><span class="p">,</span> <span class="s">&quot;samedi&quot;</span><span class="p">,</span><span class="s">&quot;dimanche&quot;</span><span class="p">]</span>

<span class="c">#</span>
<span class="c"># a</span>
<span class="c">#</span>

<span class="n">week_en</span> <span class="o">=</span> <span class="p">[</span><span class="n">week_fr_en</span><span class="p">[</span><span class="n">fr</span><span class="p">]</span> <span class="k">for</span> <span class="n">fr</span> <span class="ow">in</span> <span class="n">week_fr</span><span class="p">]</span>

<span class="c">#</span>
<span class="c"># b</span>
<span class="c">#</span>
<span class="n">prompt</span> <span class="o">=</span> <span class="s">&quot;jour:&quot;</span>
<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">day</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span> <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="mi">3</span> <span class="k">else</span> <span class="nb">raw_input</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">day</span> <span class="ow">in</span> <span class="n">week_fr</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;FR:position&quot;</span><span class="p">,</span> <span class="n">week_fr</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">day</span><span class="p">))</span>
    <span class="k">elif</span> <span class="n">day</span> <span class="ow">in</span> <span class="n">week_en</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;EN:position&quot;</span><span class="p">,</span> <span class="n">week_en</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">day</span><span class="p">))</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Not found&quot;</span><span class="p">)</span>

<span class="c">#</span>
<span class="c"># c</span>
<span class="c">#</span>

<span class="c"># .....</span>

<span class="c">#</span>
<span class="c"># d</span>
<span class="c">#</span>

<span class="c"># .....</span>

<span class="c">#</span>
<span class="c">#e 1</span>
<span class="c">#</span>

<span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">week_en</span><span class="p">,</span><span class="n">week_fr</span><span class="p">))</span>

<span class="c">#</span>
<span class="c">#e 2</span>
<span class="c">#</span>

<span class="p">{</span><span class="n">en</span><span class="p">:</span><span class="n">fr</span> <span class="k">for</span> <span class="n">fr</span><span class="p">,</span><span class="n">en</span> <span class="ow">in</span> <span class="n">week_fr_en</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
</pre></div>
</div>
</div>
<p>Une solution légèrement différente:</p>
<div class="tohide container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: week_dict_sol2.py</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">week_fr_en</span> <span class="o">=</span> <span class="p">{</span><span class="s">&quot;jeudi&quot;</span><span class="p">:</span><span class="s">&quot;thursday&quot;</span><span class="p">,</span> <span class="s">&quot;vendredi&quot;</span><span class="p">:</span><span class="s">&quot;friday&quot;</span><span class="p">,</span> <span class="s">&quot;samedi&quot;</span><span class="p">:</span><span class="s">&quot;saturday&quot;</span><span class="p">,</span>
              <span class="s">&quot;lundi&quot;</span><span class="p">:</span><span class="s">&quot;monday&quot;</span><span class="p">,</span> <span class="s">&quot;mardi&quot;</span><span class="p">:</span><span class="s">&quot;tuesday&quot;</span><span class="p">,</span> <span class="s">&quot;mercredi&quot;</span><span class="p">:</span><span class="s">&quot;wednesday&quot;</span><span class="p">,</span>
              <span class="s">&quot;dimanche&quot;</span><span class="p">:</span><span class="s">&quot;sunday&quot;</span><span class="p">}</span>

<span class="n">week_fr</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;lundi&quot;</span><span class="p">,</span> <span class="s">&quot;mardi&quot;</span><span class="p">,</span> <span class="s">&quot;mercredi&quot;</span><span class="p">,</span> 
           <span class="s">&quot;jeudi&quot;</span><span class="p">,</span> <span class="s">&quot;vendredi&quot;</span><span class="p">,</span> <span class="s">&quot;samedi&quot;</span><span class="p">,</span><span class="s">&quot;dimanche&quot;</span><span class="p">]</span>

<span class="c">#</span>
<span class="c"># a</span>
<span class="c">#</span>

<span class="n">week_en</span> <span class="o">=</span> <span class="p">[</span><span class="n">week_fr_en</span><span class="p">[</span><span class="n">fr</span><span class="p">]</span> <span class="k">for</span> <span class="n">fr</span> <span class="ow">in</span> <span class="n">week_fr</span><span class="p">]</span>

<span class="c">#</span>
<span class="c"># b</span>
<span class="c">#</span>
<span class="n">prompt</span> <span class="o">=</span> <span class="s">&quot;jour:&quot;</span>
<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">day</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span> <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="mi">3</span> <span class="k">else</span> <span class="nb">raw_input</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;FR:position&quot;</span><span class="p">,</span> <span class="n">week_fr</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">day</span><span class="p">))</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">&quot;EN:position&quot;</span><span class="p">,</span> <span class="n">week_en</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">day</span><span class="p">))</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&#39;not found&#39;</span><span class="p">)</span>

<span class="c">#</span>
<span class="c"># c</span>
<span class="c">#</span>

<span class="c"># .....</span>

<span class="c">#</span>
<span class="c"># d</span>
<span class="c">#</span>

<span class="c"># .....</span>

<span class="c">#</span>
<span class="c">#e 1</span>
<span class="c">#</span>

<span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">week_en</span><span class="p">,</span><span class="n">week_fr</span><span class="p">))</span>

<span class="c">#</span>
<span class="c">#e 2</span>
<span class="c">#</span>

<span class="p">{</span><span class="n">en</span><span class="p">:</span><span class="n">fr</span> <span class="k">for</span> <span class="n">fr</span><span class="p">,</span><span class="n">en</span> <span class="ow">in</span> <span class="n">week_fr_en</span><span class="o">.</span><span class="n">items</span><span class="p">()}</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="objets-partages-copie-d-objets">
<h3>Objets partagés, copie d&#8217;objets<a class="headerlink" href="#objets-partages-copie-d-objets" title="Permalink to this headline">¶</a></h3>
<p>Par défaut, les objets référencés plusieurs fois sont partagés, ce qui nécessite quelques précautions dans le cas des objets modifiables (listes, dictionnaires etc).</p>
<p>Illustration:</p>
<img alt="_images/list_nocopy_cut.jpg" src="_images/list_nocopy_cut.jpg" />
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">,[</span><span class="s">&#39;c&#39;</span><span class="p">,</span><span class="s">&#39;d&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst2</span> <span class="o">=</span> <span class="n">lst</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;X&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst2</span> <span class="c"># lst2 est affectée par l&#39;op.précédente</span>
<span class="go">[&#39;a&#39;, &#39;X&#39;, [&#39;c&#39;, &#39;d&#39;]]</span>
</pre></div>
</div>
<p>Si ce comportement n&#8217;est pas celui souhaité, une solution imparfaite à ce problème est la copie superficielle (shallow copy). Ainsi, l&#8217;objet de premier niveau est dupliqué, mais pas les objets qu&#8217;il référence. Dans l&#8217;illustration suivante, la liste de premier niveau est repliquée, mais pas &#8220;la liste dans la liste&#8221;:</p>
<img alt="_images/list_copy_cut.jpg" src="_images/list_copy_cut.jpg" />
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">,[</span><span class="s">&#39;c&#39;</span><span class="p">,</span><span class="s">&#39;d&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst2</span> <span class="o">=</span> <span class="n">lst</span><span class="p">[:]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;X&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst2</span> <span class="c"># lst2 n&#39;est pas affecté par l&#39;op. précédente</span>
<span class="go">[&#39;a&#39;, &#39;b&#39;, [&#39;c&#39;, &#39;d&#39;]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;Y&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst2</span> <span class="c"># maintenant si...</span>
<span class="go">[&#39;a&#39;, &#39;b&#39;, [&#39;c&#39;, &#39;Y&#39;]]</span>
</pre></div>
</div>
<p>Une solution radicale est la copie profonde, qui s&#8217;applique récursivement aux objets référencés tant que ces références concernent des objets modifiables:</p>
<img alt="_images/list_deepcopy_cut.jpg" src="_images/list_deepcopy_cut.jpg" />
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">copy</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">,[</span><span class="s">&#39;c&#39;</span><span class="p">,</span><span class="s">&#39;d&#39;</span><span class="p">]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst2</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">lst</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;X&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst2</span>
<span class="go">[&#39;a&#39;, &#39;b&#39;, [&#39;c&#39;, &#39;d&#39;]]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst</span><span class="p">[</span><span class="mi">2</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s">&#39;Y&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">lst2</span>
<span class="go">[&#39;a&#39;, &#39;b&#39;, [&#39;c&#39;, &#39;d&#39;]]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">On peut personnaliser la copie des objets sur une classe en définissant les méthodes <strong>__copy__()</strong> et <strong>__deepcopy__()</strong></p>
</div>
</div>
</div>
<div class="section" id="exercices">
<h2>Exercices<a class="headerlink" href="#exercices" title="Permalink to this headline">¶</a></h2>
<div class="myexercice container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: sharedrefs.py</span>

<span class="sd">On souhaite réaliser des copies des objets suivants de manière à être</span>
<span class="sd">sûr que toute modification sur la copie sera sans effet l&#39;objet d&#39;origine</span>
<span class="sd">et réciproquement. Préciser pour chaque cas l&#39;opération la moins coûteuse pour</span>
<span class="sd">réaliser la copie sachant que:</span>
<span class="sd">    &quot;=&quot; &lt; copy.copy() &lt; copy.deepcopy()</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">obj_a</span> <span class="o">=</span> <span class="s">&quot;Python&quot;</span>
<span class="n">obj_b</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">}</span>
<span class="n">obj_c</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">:</span><span class="n">obj_b</span><span class="p">}</span>
<span class="n">obj_d</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:(</span><span class="s">&#39;x&#39;</span><span class="p">,(</span><span class="mi">2</span><span class="p">,</span><span class="s">&#39;y&#39;</span><span class="p">)),</span> <span class="s">&#39;c&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">}</span>
<span class="n">obj_e</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,(</span><span class="mi">2</span><span class="p">,</span><span class="s">&#39;y&#39;</span><span class="p">)):[</span><span class="mi">7</span><span class="p">],</span> <span class="s">&#39;c&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">}</span>
<span class="n">obj_f</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;Python&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">obj_g</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;Python&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">obj_d</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]]</span>
<span class="n">obj_h</span> <span class="o">=</span> <span class="s">&quot;Python&quot;</span><span class="p">,</span> <span class="mi">3</span>
</pre></div>
</div>
</div>
<div class="tohide container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: sharedrefs_sol.py</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">copy</span>

<span class="n">obj_a</span> <span class="o">=</span> <span class="s">&quot;Python&quot;</span>
<span class="n">copy_a</span> <span class="o">=</span> <span class="n">obj_a</span>

<span class="n">obj_b</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">}</span>
<span class="n">copy_b</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">obj_b</span><span class="p">)</span>

<span class="n">obj_c</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">:</span><span class="n">obj_b</span><span class="p">}</span>
<span class="n">copy_c</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">obj_c</span><span class="p">)</span>

<span class="n">obj_d</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:(</span><span class="s">&#39;x&#39;</span><span class="p">,(</span><span class="mi">2</span><span class="p">,</span><span class="s">&#39;y&#39;</span><span class="p">)),</span> <span class="s">&#39;c&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">}</span>
<span class="n">copy_d</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">obj_d</span><span class="p">)</span>

<span class="n">obj_e</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="s">&#39;x&#39;</span><span class="p">,(</span><span class="mi">2</span><span class="p">,</span><span class="s">&#39;y&#39;</span><span class="p">)):[</span><span class="mi">7</span><span class="p">],</span> <span class="s">&#39;c&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">}</span>
<span class="n">copy_e</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">obj_e</span><span class="p">)</span>

<span class="n">obj_f</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;Python&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
<span class="n">copy_f</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">obj_f</span><span class="p">)</span>

<span class="n">obj_g</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;Python&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="n">obj_d</span><span class="p">[</span><span class="s">&#39;b&#39;</span><span class="p">]]</span>
<span class="n">copy_g</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">obj_g</span><span class="p">)</span>

<span class="n">obj_h</span> <span class="o">=</span> <span class="s">&quot;Python&quot;</span><span class="p">,</span> <span class="mi">3</span>
<span class="n">copy_h</span> <span class="o">=</span> <span class="n">obj_h</span>
</pre></div>
</div>
</div>
<div class="myexercice container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: whichcopy.py</span>

<span class="sd">Ecrire un test pour décider comment copier une liste quelconque de manière</span>
<span class="sd">à être sûr que toute modification sur la copie sera sans effet la liste</span>
<span class="sd">d&#39;origine et réciproquement.</span>

<span class="sd">Le test doit indiquer la méthode la moins coûteuse avec un print(&quot;copy&quot;) ou</span>
<span class="sd">print(&quot;deepcopy&quot;)</span>

<span class="sd">Les éléments de la liste peuvent avoir une complexité quelconque.</span>

<span class="sd">Astuce : utiliser une fonction primitive évoquée dans la section sur les</span>
<span class="sd">dictionnaires.</span>

<span class="sd">Exemples :</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">lst1</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;Python&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">}]</span>
<span class="n">lst2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">])))]</span>
<span class="n">lst3</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">))))]</span>
</pre></div>
</div>
</div>
<div class="tohide container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: whichcopy_sol.py</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="n">lst1</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;Python&quot;</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span><span class="mi">1</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s">&#39;c&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">}]</span>
<span class="n">lst2</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">])))]</span>
<span class="n">lst3</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="p">(</span><span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">6</span><span class="p">))))]</span>


<span class="k">for</span> <span class="n">lst</span> <span class="ow">in</span> <span class="p">[</span><span class="n">lst1</span><span class="p">,</span> <span class="n">lst2</span><span class="p">,</span> <span class="n">lst3</span><span class="p">]:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;Test for:&quot;</span><span class="p">,</span> <span class="n">lst</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">elt</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">_</span> <span class="o">=</span> <span class="nb">hash</span><span class="p">(</span><span class="n">elt</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">TypeError</span><span class="p">:</span>
            <span class="k">print</span><span class="p">(</span><span class="s">&quot;deepcopy&quot;</span><span class="p">)</span>
            <span class="k">break</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;copy&quot;</span><span class="p">)</span>

        
</pre></div>
</div>
</div>
<div class="section" id="les-ensembles">
<h3>Les ensembles<a class="headerlink" href="#les-ensembles" title="Permalink to this headline">¶</a></h3>
<p>Il s&#8217;agit d&#8217;objets représentant  la notion d&#8217;ensemble au sens mathématique:</p>
<ul class="simple">
<li>les éléments sont uniques</li>
<li>il n&#8217;y a pas de notion d&#8217;ordre entre les éléments.</li>
</ul>
<p>Concrètement, les ensembles dans Python sont représentés par deux types:</p>
<ul class="simple">
<li><strong>set</strong> : ensembles modifiables</li>
<li><strong>frozenset</strong> : ensembles immuables</li>
</ul>
<p>Les éléments d&#8217;un ensemble (set ou frozenset) sont des objets hashables donc immuables.</p>
<p>On peut ajouter/retirer des éléments sur un ensemble <em>set</em> après sa création, mais pas sur un ensemble <em>frozenset</em>. L&#8217;intérêt de ce dernier et d&#8217;entre hashable à son tour, donc utilisable comme clé dans un dictionnaire ou comme élément d&#8217;un autre ensemble.</p>
<div class="highlight-python"><div class="highlight"><pre>&gt;&gt;&gt; {1, &#39;a&#39;}  # premier format (à privilégier)
set([&#39;a&#39;, 1])
&gt;&gt;&gt; set([1,&quot;a&quot;]) # création avec le constructeur
set([&#39;a&#39;, 1])
&gt;&gt;&gt; set([1,&quot;a&quot;,[6,7]])
Traceback (most recent call last):
File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
TypeError: unhashable type: &#39;list&#39;
&gt;&gt;&gt; set1 = set([1,&quot;a&quot;])
&gt;&gt;&gt; set1.add(&quot;b&quot;)
&gt;&gt;&gt; set1
set([&#39;a&#39;, 1, &#39;b&#39;])
&gt;&gt;&gt; set1.remove(&quot;b&quot;)
&gt;&gt;&gt; set1
set([&#39;a&#39;, 1])
&gt;&gt;&gt; set2=set([&quot;x&quot;,set1])
Traceback (most recent call last):
File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
TypeError: unhashable type: &#39;set&#39;
&gt;&gt;&gt; frozen = frozenset([&#39;a&#39;, 1, &#39;b&#39;])
&gt;&gt;&gt; set2=set([&quot;x&quot;,frozen])
&gt;&gt;&gt; set2
set([&#39;x&#39;, frozenset([&#39;a&#39;, 1, &#39;b&#39;])])
&gt;&gt;&gt; frozen.add(&quot;y&quot;)
Traceback (most recent call last):
File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
AttributeError: &#39;frozenset&#39; object has no attribute &#39;add&#39;
&gt;&gt;&gt;
</pre></div>
</div>
<p><strong>NB :</strong> La notation <strong>{}</strong> ne désigne pas l&#8217;ensemble vide, mais un dictionnaire vide. Pour l&#8217;ensemble vide, utiliser <strong>set()</strong></p>
<div class="section" id="le-type-range-xrange">
<h4>Le type <strong>range/xrange</strong><a class="headerlink" href="#le-type-range-xrange" title="Permalink to this headline">¶</a></h4>
<p>Le type appelé <strong>range</strong> en <em>Python 3</em>, pré-existant sous le nom <strong>xrange</strong> en <em>Python 2.x (x&gt;=6)</em> est un type de séquence très simple supportant seulement:</p>
<ul class="simple">
<li>l&#8217;itération</li>
<li>la fonction <em>len()</em></li>
<li>l&#8217;accès indexé</li>
</ul>
<p><strong>NB:</strong> La documentation Python classe ce type parmi les séquences car il permet l&#8217;accès indexé. Néanmoins, il ne supporte pas des fonctionnalités communes à toutes les autres séquences, comme le slicing.</p>
<p>Son rôle est de fournir une séquence de valeurs entières contiguës dans une plage donnée et il est destiné à la construction des boucles &#8220;for&#8221; équivalentes à <tt class="docutils literal"><span class="pre">for(i=0;i&lt;max;i++){\...}</span></tt>, possibles en <em>C</em> et les langages &#8220;C-like&#8221; pour lesquelles Python ne propose pas de syntaxe dédiée.
Ainsi, en Python on va écrire:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Python 3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">max</span><span class="o">=</span><span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">max</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">0</span>
<span class="go">1</span>
<span class="go">2</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="c"># Python 2.7.x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">max</span><span class="o">=</span><span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="nb">xrange</span><span class="p">(</span><span class="nb">max</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">0</span>
<span class="go">1</span>
<span class="go">2</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>En Python 2.7, <strong>xrange</strong> coexiste avec la fonction &#8220;historique&#8221; <em>range()</em> qui renvoie une liste:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">[0, 1, 2, 3, 4]</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Elle assure le même fonctionnement d&#8217;une boucle que <em>xrange()</em>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">max</span><span class="o">=</span><span class="mi">3</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">max</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">0</span>
<span class="go">1</span>
<span class="go">2</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Pourquoi avoir introduit <em>xrange</em>? Pour une consommation mémoire constante par rapport au nombre d&#8217;itérations.</p>
<p><strong>NB:</strong> Dans la version 3 de Python  la fonction <em>range()</em> a été réimplémentée sur le principe du type <em>xrange</em> de la version 2. Le type <em>xrange</em> n&#8217;existe plus dans la nouvelle version.</p>
</div>
<div class="section" id="le-type-enumerate">
<h4>Le type <strong>enumerate</strong><a class="headerlink" href="#le-type-enumerate" title="Permalink to this headline">¶</a></h4>
<p>Tout comme (x)range, cet itérateur est important par les possibilités qu&#8217;il offre dans l&#8217;écriture des boucles.</p>
<p><strong>Scénario:</strong> Supposons que, pour la liste [&#8216;a&#8217;, &#8216;b&#8217;, &#8216;c&#8217;, d&#8217;], il est demandé d&#8217;afficher chaque élément précédé par sa position dans la liste:</p>
<div class="highlight-python"><div class="highlight"><pre>0 a
1 b
2 c
3 d
</pre></div>
</div>
<p>Une écriture possible est:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">i</span><span class="o">=</span><span class="mi">0</span>
<span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="s">&#39;c&#39;</span><span class="p">,</span><span class="s">&#39;d&#39;</span><span class="p">]:</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;{} {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">e</span><span class="p">))</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>Ou encore:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">lst</span> <span class="o">=</span> <span class="p">[</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="s">&#39;c&#39;</span><span class="p">,</span><span class="s">&#39;d&#39;</span><span class="p">]</span>
<span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">lst</span><span class="p">)):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;{} {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">lst</span><span class="p">[</span><span class="n">i</span><span class="p">]))</span>
    <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</pre></div>
</div>
<p>mais cette écriture n&#8217;est pas très élégante...</p>
<p>C&#8217;est ici que <em>enumerate</em> intervient:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">e</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="s">&#39;c&#39;</span><span class="p">,</span><span class="s">&#39;d&#39;</span><span class="p">]):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;{} {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">e</span><span class="p">))</span>
</pre></div>
</div>
<p><strong>Explication:</strong> un objet <em>enumerate</em> produit à chaque itération un tuple <em>(position, item)</em> :</p>
<div class="highlight-python"><div class="highlight"><pre>&gt;&gt;&gt; e=enumerate([&#39;a&#39;,&#39;b&#39;,&#39;c&#39;,&#39;d&#39;])
&gt;&gt;&gt; type(e)
&lt;type &#39;enumerate&#39;&gt;
&gt;&gt;&gt; e.next()
(0, &#39;a&#39;)
&gt;&gt;&gt; e.next()
(1, &#39;b&#39;)
&gt;&gt;&gt; e.next()
(2, &#39;c&#39;)
&gt;&gt;&gt; e.next()
(3, &#39;d&#39;)
&gt;&gt;&gt; e.next()
Traceback (most recent call last):
File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
StopIteration
&gt;&gt;&gt;
</pre></div>
</div>
<p>Sur l&#8217;exemple précédent, si on souhaite numéroter les éléments à partir de 1, on peut écrire:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">e</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">([</span><span class="s">&#39;a&#39;</span><span class="p">,</span><span class="s">&#39;b&#39;</span><span class="p">,</span><span class="s">&#39;c&#39;</span><span class="p">,</span><span class="s">&#39;d&#39;</span><span class="p">],</span> <span class="mi">1</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;{} {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">e</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>1 a
2 b
3 c
4 d
</pre></div>
</div>
</div>
<div class="section" id="id7">
<h4>Exercice<a class="headerlink" href="#id7" title="Permalink to this headline">¶</a></h4>
<div class="myexercice container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: week_dict2.py</span>

<span class="sd">En utilisant les listes week_fr et week_en fournies:</span>

<span class="sd">a) Ecrire une programme interactif qui demande la saisie d&#39;au moins 3 lettres. </span>
<span class="sd">   En utilisant la méthode startwith() retrouver l&#39;élément qui commence avec</span>
<span class="sd">   les groupe de lettres saisies dans week_fr, puis, en cas d&#39;échec, dans</span>
<span class="sd">   week_en (utiliser, si c&#39;est pertinent, la clause &quot;else&quot; pour les boucles).</span>
<span class="sd">   Si le mot est trouvé dans une des deux listes, afficher la position dans</span>
<span class="sd">   la liste, le mot trouvé et la langue de la liste.</span>
<span class="sd">   En cas de recherche infructueuse lèver une exception ValueError.</span>


<span class="sd">b) En utilisant week_fr, écrire une boucle for..in qui affiche les jours de la</span>
<span class="sd">   semaine, un par ligne, sous la forme:</span>

<span class="sd">   0 - lundi</span>
<span class="sd">   1 - mardi</span>
<span class="sd">   ....</span>

<span class="sd">c) Modifier le programme pour une numérotation à partir de 1:</span>
<span class="sd">   1 - lundi</span>
<span class="sd">   2 - mardi</span>
<span class="sd">   .....</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="n">week_fr</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;lundi&quot;</span><span class="p">,</span> <span class="s">&quot;mardi&quot;</span><span class="p">,</span> <span class="s">&quot;mercredi&quot;</span><span class="p">,</span> <span class="s">&quot;jeudi&quot;</span><span class="p">,</span> <span class="s">&quot;vendredi&quot;</span><span class="p">,</span> <span class="s">&quot;samedi&quot;</span><span class="p">,</span> 
           <span class="s">&quot;dimanche&quot;</span><span class="p">]</span>
<span class="n">week_en</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;monday&quot;</span><span class="p">,</span> <span class="s">&quot;tuesday&quot;</span><span class="p">,</span> <span class="s">&quot;wednesday&quot;</span><span class="p">,</span> <span class="s">&quot;thursday&quot;</span><span class="p">,</span> <span class="s">&quot;friday&quot;</span><span class="p">,</span> <span class="s">&quot;saturday&quot;</span><span class="p">,</span>
           <span class="s">&quot;sunday&quot;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="tohide container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: week_dict2_sol.py</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="n">week_fr</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;lundi&quot;</span><span class="p">,</span> <span class="s">&quot;mardi&quot;</span><span class="p">,</span> <span class="s">&quot;mercredi&quot;</span><span class="p">,</span> 
           <span class="s">&quot;jeudi&quot;</span><span class="p">,</span> <span class="s">&quot;vendredi&quot;</span><span class="p">,</span> <span class="s">&quot;samedi&quot;</span><span class="p">,</span><span class="s">&quot;dimanche&quot;</span><span class="p">]</span>
<span class="n">week_en</span> <span class="o">=</span> <span class="p">[</span><span class="s">&quot;monday&quot;</span><span class="p">,</span> <span class="s">&quot;tuesday&quot;</span><span class="p">,</span> <span class="s">&quot;wednesday&quot;</span><span class="p">,</span> <span class="s">&quot;thursday&quot;</span><span class="p">,</span> <span class="s">&quot;friday&quot;</span><span class="p">,</span> <span class="s">&quot;saturday&quot;</span><span class="p">,</span>
           <span class="s">&quot;sunday&quot;</span><span class="p">]</span>

<span class="c">#</span>
<span class="c"># b</span>
<span class="c">#</span>
<span class="n">prompt</span> <span class="o">=</span> <span class="s">&quot;jour(3 lettres min.):&quot;</span>
<span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
    <span class="n">inp</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span> <span class="k">if</span> <span class="n">sys</span><span class="o">.</span><span class="n">version_info</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">==</span><span class="mi">3</span> <span class="k">else</span> <span class="nb">raw_input</span><span class="p">(</span><span class="n">prompt</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">inp</span><span class="p">)</span><span class="o">&lt;</span><span class="mi">3</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;saisir 3 lettres minimum SVP&quot;</span><span class="p">)</span>
        <span class="k">continue</span>
    <span class="k">for</span> <span class="n">pos</span><span class="p">,</span><span class="n">day</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">week_fr</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">day</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">inp</span><span class="p">):</span>
            <span class="k">print</span><span class="p">(</span><span class="s">&quot;FR&quot;</span><span class="p">,</span> <span class="n">day</span><span class="p">,</span> <span class="s">&quot;position:&quot;</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>
            <span class="k">break</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">pos</span><span class="p">,</span><span class="n">day</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">week_en</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">day</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">inp</span><span class="p">):</span>
                <span class="k">print</span><span class="p">(</span><span class="s">&quot;EN&quot;</span><span class="p">,</span> <span class="n">day</span><span class="p">,</span> <span class="s">&quot;position:&quot;</span><span class="p">,</span> <span class="n">pos</span><span class="p">)</span>
                <span class="k">break</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s">&quot;Not found&quot;</span><span class="p">)</span>


<span class="c">#</span>
<span class="c"># c</span>
<span class="c">#</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">day</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">week_fr</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;{} - {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">day</span><span class="p">))</span>

<span class="c">#</span>
<span class="c"># d</span>
<span class="c">#</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span><span class="n">day</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">week_fr</span><span class="p">,</span><span class="mi">1</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;{} - {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">day</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="les-types-des-constantes-nommees">
<h3>Les types des constantes nommées<a class="headerlink" href="#les-types-des-constantes-nommees" title="Permalink to this headline">¶</a></h3>
<p>Ils sont destinés à introduire les constantes spéciales du langage:</p>
<div class="section" id="les-constantes-booleennes">
<h4>Les constantes booléennes<a class="headerlink" href="#les-constantes-booleennes" title="Permalink to this headline">¶</a></h4>
<p>Les deux catégories logiques de <strong>vrai</strong> et de <strong>faux</strong> sont représentées par les deux objets de type <strong>bool</strong> : <strong>True</strong> et <strong>False</strong>. Ils ont la même valeur logique que les <em>int</em> <strong>1</strong> et <strong>0</strong> tout en ayant leur identité propre:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
<span class="go">&lt;type &#39;bool&#39;&gt;</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">id</span><span class="p">(</span><span class="bp">True</span><span class="p">)</span>
<span class="go">8916816</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">id</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
<span class="go">27633592</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">True</span><span class="o">==</span><span class="mi">1</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="bp">True</span><span class="o">==</span><span class="mi">2</span>
<span class="go">False</span>
</pre></div>
</div>
</div>
<div class="section" id="la-constante-none">
<h4>La constante None<a class="headerlink" href="#la-constante-none" title="Permalink to this headline">¶</a></h4>
<p>Elle désigne l&#8217;absence de valeur (équivalent du <strong>null</strong> dans d&#8217;autres langages) et est définie par un type dont <em>None</em> est le nom est la seule instance.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="bp">None</span><span class="p">)</span>
<span class="go">&lt;type &#39;NoneType&#39;&gt;</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>D&#8217;autres constantes spéciales, moins utilisées sont implémentées de la même manière: <em>NotImplemented</em> , <em>Ellipsis</em> etc.</p>
</div>
<div class="section" id="le-type-file">
<h4>Le type <strong>file</strong><a class="headerlink" href="#le-type-file" title="Permalink to this headline">¶</a></h4>
<p id="id8">Sans surprise, il intervient dans les opérations sur des fichiers. Il a été brièvement évoqué avec l&#8217;instruction <strong>with</strong> et sera détaillé dans le chapitre sur la bibliothèque standard.</p>
<p>On va juste souligner ici son comportement en tant que type itérable:</p>
<div class="highlight-python"><div class="highlight"><pre>$ cat abc.txt
aaa
bbb
ccc
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;abc.txt&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">f</span><span class="p">:</span>
<span class="gp">... </span>            <span class="k">print</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">aaa</span>

<span class="go">bbb</span>

<span class="go">ccc</span>
</pre></div>
</div>
<p><strong>NB:</strong> On notera que, même si le constructeur <tt class="docutils literal"><span class="pre">file()</span></tt> existe, il est préférable d&#8217;utiliser la primitive <tt class="docutils literal"><span class="pre">open()</span></tt> pour les créations de fichiers.</p>
</div>
</div>
<div class="section" id="travailler-des-fichiers">
<h3>Travailler  des fichiers ...<a class="headerlink" href="#travailler-des-fichiers" title="Permalink to this headline">¶</a></h3>
<p>La bibliothèque standard dispose d&#8217;un ensemble des outils nécessaires à la manipulation des fichiers qui seront évoqués <a class="reference internal" href="libstd.html#file-management"><em>plus loin</em></a>.</p>
<p>On va passer en revue brièvement ici quelques fonctionnalités fournies par les modules <strong>os</strong>, <strong>os.path</strong>, <strong>glob</strong>, <strong>shutil</strong> :</p>
</div>
<div class="section" id="le-module-os">
<h3>Le module <strong>os</strong><a class="headerlink" href="#le-module-os" title="Permalink to this headline">¶</a></h3>
<p>Ce module contient un grand nombre de fonctions permettant l&#8217;interaction avec le système d&#8217;exploitation.</p>
<div class="warning admonition">
<p class="first admonition-title">Avertissement</p>
<p class="last">Il est vivement déconseillé d&#8217;importer ce module par <tt class="docutils literal"><span class="pre">from</span> <span class="pre">os</span> <span class="pre">import</span> <span class="pre">*</span></tt> car la fonction <em>os.open()</em> va se substituer à la primitive <em>open()</em>, avec un comportement différent. L&#8217;utilisation de l&#8217;importation simple <tt class="docutils literal"><span class="pre">import</span> <span class="pre">os</span></tt> évite ce problème.</p>
</div>
<p>Pour illustrer quelques unes des fonctionnalités de ce module, une mise en perspective  d&#8217;opérations équivalentes réalisés en <em>shell</em> (bash) et en Python:</p>
<p>Accès à l&#8217;environnement (variable <em>PATH</em>) en <em>bash</em>:</p>
<div class="highlight-python"><div class="highlight"><pre>$ echo $PATH
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/bin/X11:/usr/games
</pre></div>
</div>
<p>En Python:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">&#39;PATH&#39;</span><span class="p">]</span>
<span class="go">&#39;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/bin/X11:/usr/games&#39;</span>
</pre></div>
</div>
<p>Manipulation de répertoires en bash:</p>
<div class="highlight-python"><div class="highlight"><pre>poli@host:~$ cd /tmp
poli@host:/tmp$ mkdir testpy
poli@host:/tmp$ cd testpy/
poli@host:/tmp/testpy$ pwd
/tmp/testpy
poli@host:/tmp/testpy$ cd ..
poli@host:/tmp$ pwd
/tmp
poli@host:/tmp$ rmdir testpy
poli@host:/tmp$
</pre></div>
</div>
<p>L&#8217;équivalent en Python:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s">&#39;/tmp/&#39;</span><span class="p">)</span> <span class="c"># &#39;cd /tmp&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="s">&#39;testpy&#39;</span><span class="p">)</span> <span class="c"># &#39;mkdir testpy&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s">&#39;testpy&#39;</span><span class="p">)</span> <span class="c"># &#39;cd testpy&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>        <span class="c"># &#39;pwd&#39;</span>
<span class="go">&#39;/tmp/testpy&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s">&#39;..&#39;</span><span class="p">)</span>     <span class="c"># &#39;cd ..&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>        <span class="c"># &#39;pwd&#39;</span>
<span class="go">&#39;/tmp&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">rmdir</span><span class="p">(</span><span class="s">&#39;testpy&#39;</span><span class="p">)</span> <span class="c"># &#39;rmdir testpy&#39;</span>
</pre></div>
</div>
<p>Autres manipulations simples sur des fichiers en bash :</p>
<div class="highlight-python"><div class="highlight"><pre>$ ls /tmp/test/
testpy.txt
$ mv /tmp/test/testpy.txt /tmp/test/testpy2.txt
$ ls /tmp/test/
testpy2.txt
$ rm /tmp/test/testpy2.txt
$ ls /tmp/test/
</pre></div>
</div>
<p>Et leur équivalent en Python:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s">&quot;/tmp/test&quot;</span><span class="p">)</span> <span class="c"># &#39;ls /tmp/test/&#39; (&#39;ls&#39; -A plus précisément)</span>
<span class="go">[&#39;testpy.txt&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s">&quot;/tmp/test/testpy.txt&quot;</span><span class="p">,</span> <span class="s">&quot;/tmp/test/testpy2.txt&quot;</span><span class="p">)</span> <span class="c"># &#39;mv /tmp/test/testpy.txt /tmp/test/testpy2.txt&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s">&quot;/tmp/test/&quot;</span><span class="p">)</span> <span class="c"># &#39;ls /tmp/test/&#39;</span>
<span class="go">&#39;testpy2.txt&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s">&quot;/tmp/test/testpy2.txt&quot;</span><span class="p">)</span> <span class="c"># &#39;rm /tmp/test/testpy2.txt&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s">&quot;/tmp/test/&quot;</span><span class="p">)</span>
<span class="go">[]</span>
</pre></div>
</div>
<p>Autres fonctions utiles:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="s">&quot;dir1/dir2/.../cible&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>L&#8217;effet de cette fonction est équivalent à celui de la commande (Linux/Unix) <tt class="docutils literal"><span class="pre">mkdir</span> <span class="pre">-p</span> <span class="pre">...</span></tt> : elle crée le répertoire cible ainsi que tous les répertoires intermédiaires s&#8217;ils n&#8217;existent pas:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s">&quot;/tmp/&quot;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s">&quot;/tmp/dir1&quot;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="s">&quot;/tmp/dir1/dir2/cible&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s">&quot;/tmp/dir1&quot;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s">&quot;/tmp/dir1/dir2&quot;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s">&quot;/tmp/dir1/dir2/cible&quot;</span><span class="p">)</span>
<span class="go">True</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="le-module-os-path">
<h3>Le module <strong>os.path</strong><a class="headerlink" href="#le-module-os-path" title="Permalink to this headline">¶</a></h3>
<p>Ce module est dédié à la manipulation des chemins dans le système de fichiers.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
<span class="go">&#39;/usr/lib/python2.7&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os.path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s">&quot;code.py&quot;</span><span class="p">)</span> <span class="c"># construit le chemin absolue en fonction de l&#39;emplacement courant</span>
<span class="go">&#39;/usr/lib/python2.7/code.py&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="s">&#39;/usr/lib/python2.7/code.py&#39;</span><span class="p">)</span> <span class="c"># ~ basename cmd</span>
<span class="go">&#39;code.py&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="s">&#39;/usr/lib/python2.7/code.py&#39;</span><span class="p">)</span> <span class="c"># ~ dirname cmd</span>
<span class="go">&#39;/usr/lib/python2.7&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;/usr/lib/python2.7/code.py&#39;</span><span class="p">)</span> <span class="c"># (dirname, basename)</span>
<span class="go">(&#39;/usr/lib/python2.7&#39;, &#39;code.py&#39;)</span>
</pre></div>
</div>
<p>Les fonction suivantes permettent de tester le type d&#8217;objet (répertoire, fichier, lien etc.) désigné par un chemin:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s">&#39;/usr/lib/python2.7/code.py&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s">&#39;/usr/lib/python2.7/foobar.py&#39;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="s">&#39;/usr/lib/python2.7/code.py&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="s">&#39;/usr/lib/python2.7/code.py&#39;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="s">&#39;/usr/lib/python2.7&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">islink</span><span class="p">(</span><span class="s">&#39;/usr/lib/python2.7/code.py&#39;</span><span class="p">)</span>
<span class="go">False</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Pour la portabilité, il est préférable d&#8217;utiliser <em>os.path.join(...)</em> pour construire des chemins:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">&#39;/tmp&#39;</span><span class="p">,</span><span class="s">&#39;foo&#39;</span><span class="p">,</span><span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="go">&#39;/tmp/foo/bar&#39;</span>
</pre></div>
</div>
<div class="warning admonition">
<p class="first admonition-title">Attention</p>
<p class="last">Si un chemin absolu est fourni, tous les éléments qui le précédent sont ignorés silencieusement:</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">&#39;tmp&#39;</span><span class="p">,</span><span class="s">&#39;/foo&#39;</span><span class="p">,</span><span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="go">&#39;/foo/bar&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">&#39;/tmp&#39;</span><span class="p">,</span><span class="s">&#39;/foo&#39;</span><span class="p">,</span><span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="go">&#39;/foo/bar&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>La fonction <tt class="docutils literal"><span class="pre">os.path.normpath()</span></tt> élimine les redondances pour ramener le chemin au format &#8220;canonique&#8221;:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="s">&#39;/usr/../usr/lib//python2.7/./code.py&#39;</span><span class="p">)</span>
<span class="go">&#39;/usr/lib/python2.7/code.py&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p><strong>NB:</strong> Sous Windows cette fonction transforme les <strong>/</strong> en <strong>\</strong>. Pour les OS &#8220;case insesitive&#8221; la fonction <em>os.path.normcase()</em> permet de passer les noms en minuscules.</p>
</div>
<div class="section" id="utilisation-du-caractere-joker">
<h3>Utilisation du caractère &#8220;joker&#8221;<a class="headerlink" href="#utilisation-du-caractere-joker" title="Permalink to this headline">¶</a></h3>
<p>La fonction <em>glob.glob()</em> permet de lister le contenu d&#8217;un répertoire avec un filtre:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">glob</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s">&quot;/usr/lib/python2.7/b*py&quot;</span><span class="p">)</span>
<span class="go">[&#39;/usr/lib/python2.7/binhex.py&#39;, &#39;/usr/lib/python2.7/bdb.py&#39;, &#39;/usr/lib/python2.7/base64.py&#39;, &#39;/usr/lib/python2.7/bisect.py&#39;]</span>
</pre></div>
</div>
</div>
<div class="section" id="le-module-shutil">
<h3>Le module <em>shutil</em><a class="headerlink" href="#le-module-shutil" title="Permalink to this headline">¶</a></h3>
<p>Le module <em>shutil</em> fournit des fonctions de manipulation de fichiers (copie, suppression) d&#8217;un niveau d&#8217;abstraction plus proche des commandes système.</p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="71%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Fonction</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>shutil.copy(src, dst)</td>
<td>Copie un fichier avec les permissions. <em>dst</em> peut être un répertoire</td>
</tr>
<tr class="row-odd"><td>shutil.copymode(src, dst)</td>
<td>Copie les permissions <strong>seules</strong> entre <em>src</em> et <em>dst</em></td>
</tr>
<tr class="row-even"><td>shutil.copystat(src, dst)</td>
<td>Copie les permissions+infos temps(dernier accès/modification)+flags</td>
</tr>
<tr class="row-odd"><td>shutil.copy2(src, dst)</td>
<td>Équivalent copy() + copystat()</td>
</tr>
</tbody>
</table>
<p><strong>NB:</strong> shutil contient d&#8217;autres fonctions puissantes, permettant la copie et la suppression d&#8217;arborescences de fichiers, à manipuler avec précaution.</p>
</div>
</div>
<div class="section" id="les-conventions-de-codage">
<h2>Les conventions de codage<a class="headerlink" href="#les-conventions-de-codage" title="Permalink to this headline">¶</a></h2>
<p>Les conventions de codage en Python ont été synthétisées dans une <em>&#8220;PEP&#8221;</em> (<em>Python Enhancement Proposals</em>), probablement une des <em>PEPs</em> les plus connues, la <strong>PEP8</strong> (auteurs : Guido van Rossum, Barry Warsaw et Nick Coghlan)</p>
<p>La <em>PEP8</em> est disponible en ligne et c&#8217;est un document important, qui mérite une lecture intégrale : <a class="reference external" href="http://legacy.python.org/dev/peps/pep-0008/">http://legacy.python.org/dev/peps/pep-0008/</a></p>
<p>Dans l&#8217;immédiat, on va se contenter d&#8217;un rapide survol:</p>
<ul class="simple">
<li>utiliser 4 espaces pour l&#8217;indentation (la tabulation à 8 espaces tolérée pour les codes anciens, mais ne pas combiner espaces et tabulations!)</li>
<li>Longueur des lignes &lt; 80 caractères</li>
<li>Eviter les espaces dans les situations suivantes:<ul>
<li>avant les &#8221;,&#8221; &#8221;:&#8221; :<ul>
<li>ne pas écrire <cite>a , b</cite> mais plutôt <cite>a, b</cite></li>
<li>ne pas écrire <cite>{&#8216;a&#8217; :1, ...}</cite> mais plutôt <cite>{&#8216;a&#8217;: 1, ...}</cite></li>
</ul>
</li>
<li>après les &#8216;(&#8216;, &#8216;[&#8216;, &#8216;{&#8216; :<ul>
<li>ne pas écrire <cite>[ a, b ]</cite>, <cite>( a, b )</cite>, <cite>{ a, b }</cite> mais plutôt <cite>[a, b]</cite>, <cite>(a, b)</cite>, <cite>{a, b}</cite></li>
</ul>
</li>
<li>entre un nom de variable et &#8216;(&#8216;, &#8216;[&#8216;:<ul>
<li>ne pas écrire <cite>func ()</cite>, <cite>map [&#8216;id&#8217;]</cite> mais plutôt <cite>func()</cite>, <cite>map[&#8216;id&#8217;]</cite></li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><p class="first">Entourer d&#8217;un espace de chaque coté les opérateurs binaires dans les expressions (une exception: &#8216;=&#8217; dans les arguments d&#8217;appel des méthodes):</p>
<ul>
<li><p class="first">on va écrire (espaces avant/après &#8216;=&#8217; et &#8216;==&#8217;):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">var</span> <span class="o">=</span> <span class="mi">1</span> <span class="c"># affectation</span>
<span class="k">if</span> <span class="n">var</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
   <span class="k">pass</span>
</pre></div>
</div>
</li>
<li><p class="first">mais on va écrire (sans espaces avant/après &#8216;=&#8217;):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="s">&#39;{langage},{version}&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">langage</span><span class="o">=</span><span class="s">&#39;Python&#39;</span><span class="p">,</span> <span class="n">version</span><span class="o">=</span><span class="mi">3</span><span class="p">)</span>
</pre></div>
</div>
</li>
</ul>
</li>
<li><p class="first">Si on utilise des opérateurs de priorités différentes dans une expression, prévoir des espaces (seulement) autour de opérateurs de priorité moindre. Exemple <tt class="docutils literal"><span class="pre">a*x</span> <span class="pre">+</span> <span class="pre">b*y</span></tt></p>
</li>
</ul>
<p><strong>NB:</strong> Ne pas hésiter à utiliser l&#8217;utilitaire <strong>pylint</strong> pour auditer son code par rapport aux préconisations de la PEP8:</p>
<div class="highlight-python"><div class="highlight"><pre>$pylint fichier.py
</pre></div>
</div>
<div class="section" id="les-noms-des-variables">
<h3>Les noms des variables<a class="headerlink" href="#les-noms-des-variables" title="Permalink to this headline">¶</a></h3>
<p>La <strong>PEP8</strong> cite les styles suivants, sans les préconiser tous pour autant:</p>
<ul class="simple">
<li>b (single lowercase letter)</li>
<li>B (single uppercase letter)</li>
<li>lowercase</li>
<li>lower_case_with_underscores</li>
<li>UPPERCASE</li>
<li>UPPER_CASE_WITH_UNDERSCORES</li>
<li>CapitalizedWords (CapWords, CamelCase)</li>
<li>mixedCase</li>
<li>Capitalized_Words_With_Underscores (ugly!)</li>
</ul>
</div>
<div class="section" id="convention-generales-de-nommage">
<h3>Convention générales de nommage<a class="headerlink" href="#convention-generales-de-nommage" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>Noms à éviter: en règle générale, les variables à une seule lettre et en particulier les lettres &#8216;l&#8217; (L minuscule) et &#8216;O&#8217; (&#8216;o&#8217; majuscule) et I (&#8216;i&#8217; majuscule)</li>
<li>variables désignant des constantes sont nommées en lettre majuscules avec des soulignées. Exemple MAX_HEIGHT</li>
<li>une variable définie au niveau du module commençant avec un &#8220;_&#8221; est &#8220;locale&#8221; au module. Elle ne sera pas importée par <tt class="docutils literal"><span class="pre">from</span> <span class="pre">module</span> <span class="pre">import</span> <span class="pre">*</span></tt></li>
<li>une variable se termine par un &#8220;_&#8221; pour éviter la collision avec un mot clé du langage. Exemples : min_, max_</li>
</ul>
<p>Le prochains chapitres vont apporter plus des précision sur les conventions de nommage spécifiques aux notions qui seront introduites.</p>
</div>
</div>
<div class="section" id="id9">
<h2>Exercice<a class="headerlink" href="#id9" title="Permalink to this headline">¶</a></h2>
<div class="myexercice container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: coauteurs.py</span>

<span class="sd">La liste suivante contient des dictionnaires de la forme {&#39;author&#39;: nom,</span>
<span class="sd">&#39;id&#39;: publication_id}, i.e. un auteur, une publication (relation N x N entre</span>
<span class="sd">auteurs et publications).</span>

<span class="sd">A partir de cette liste construisez la structure de votre choix qui représente</span>
<span class="sd">toutes les paires d&#39;auteurs ayant publié ensemble associé au nombre de </span>
<span class="sd">publications en commun, i.e. f(auteur1,auteur2, nombre-pub-communes). </span>

<span class="sd">La structure choisie doit garantir l&#39;unicité des résultats.</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="n">lst</span> <span class="o">=</span> <span class="p">[{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">12</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">15</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">21</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">22</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">12</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">21</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">12</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">15</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">22</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">21</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">17</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">15</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">17</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}]</span>
</pre></div>
</div>
</div>
<div class="tohide container">
<div class="highlight-python"><div class="highlight"><pre><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">fichier: coauteurs_sol.py</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">__future__</span> <span class="kn">import</span> <span class="n">print_function</span>

<span class="n">lst</span> <span class="o">=</span> <span class="p">[{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">12</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;A&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">15</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">21</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">22</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;B&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">12</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">21</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">12</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;C&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">15</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">22</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">7</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">21</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;D&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">17</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">15</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">17</span><span class="p">},</span>
       <span class="p">{</span><span class="s">&#39;author&#39;</span><span class="p">:</span> <span class="s">&#39;E&#39;</span><span class="p">,</span> <span class="s">&#39;id&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}]</span>

<span class="n">dict_article</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">:</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;id&#39;</span><span class="p">)</span>
    <span class="n">author</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;author&#39;</span><span class="p">)</span>
    <span class="n">dict_article</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">=</span> <span class="n">dict_article</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="p">,[])</span>
    <span class="n">dict_article</span><span class="p">[</span><span class="nb">id</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">author</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">dict_article</span><span class="p">)</span>

<span class="n">result</span> <span class="o">=</span> <span class="p">{}</span>

<span class="k">for</span> <span class="n">entry</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">:</span>
    <span class="nb">id</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;id&#39;</span><span class="p">)</span>
    <span class="n">author</span> <span class="o">=</span> <span class="n">entry</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&#39;author&#39;</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">coauthor</span> <span class="ow">in</span> <span class="n">dict_article</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="nb">id</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">coauthor</span> <span class="o">==</span> <span class="n">author</span><span class="p">:</span> <span class="k">continue</span>
        <span class="n">pair</span> <span class="o">=</span> <span class="nb">frozenset</span><span class="p">((</span><span class="n">author</span><span class="p">,</span> <span class="n">coauthor</span><span class="p">))</span>
        <span class="n">result</span><span class="p">[</span><span class="n">pair</span><span class="p">]</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">pair</span><span class="p">,</span><span class="nb">set</span><span class="p">())</span>
        <span class="n">result</span><span class="p">[</span><span class="n">pair</span><span class="p">]</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s">&quot;####################################################&quot;</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Les éléments du langage</a><ul>
<li><a class="reference internal" href="#une-vue-d-ensemble">Une vue d&#8217;ensemble</a><ul>
<li><a class="reference internal" href="#les-objets">Les objets</a><ul>
<li><a class="reference internal" href="#quelques-objets">Quelques objets...</a></li>
</ul>
</li>
<li><a class="reference internal" href="#le-modele-reference-uniforme-en-python">Le modèle référence uniforme en Python</a></li>
<li><a class="reference internal" href="#les-variables">Les variables</a></li>
<li><a class="reference internal" href="#les-operateurs">Les opérateurs</a><ul>
<li><a class="reference internal" href="#operateurs-de-base">Opérateurs de base (+,-,*,**,/,//,%)</a></li>
<li><a class="reference internal" href="#operateurs-relationnels">Opérateurs relationnels</a></li>
<li><a class="reference internal" href="#operateurs-logiques">Opérateurs logiques</a></li>
</ul>
</li>
<li><a class="reference internal" href="#les-expressions">Les expressions</a></li>
<li><a class="reference internal" href="#les-instructions">Les instructions</a><ul>
<li><a class="reference internal" href="#les-instructions-simples">Les instructions simples</a></li>
<li><a class="reference internal" href="#les-instructions-composees">Les instructions composées</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#les-entrees-sorties-standard">Les entrées/sorties standard</a><ul>
<li><a class="reference internal" href="#la-sortie-standard">La sortie standard</a></li>
<li><a class="reference internal" href="#l-entree-standard">L&#8217;entrée standard</a></li>
</ul>
</li>
<li><a class="reference internal" href="#les-structures-de-controle">Les structures de contrôle</a><ul>
<li><a class="reference internal" href="#generalites">Généralités</a></li>
<li><a class="reference internal" href="#structures-alternatives-if-elif-else">Structures alternatives (if-elif-else)</a><ul>
<li><a class="reference internal" href="#expressions-ternaires">Expressions ternaires</a></li>
</ul>
</li>
<li><a class="reference internal" href="#exceptions">Exceptions</a><ul>
<li><a class="reference internal" href="#le-bloc-try-except-finally">Le bloc  <strong>try-except-finally</strong></a></li>
<li><a class="reference internal" href="#traitement-des-exceptions">Traitement des exceptions</a></li>
<li><a class="reference internal" href="#lever-des-exceptions">Lever des exceptions</a></li>
<li><a class="reference internal" href="#definir-des-exceptions">Définir des exceptions</a></li>
<li><a class="reference internal" href="#exercice">Exercice</a></li>
</ul>
</li>
<li><a class="reference internal" href="#la-structure-with">La structure <strong>with</strong></a></li>
<li><a class="reference internal" href="#structure-repetitives-while-else-for-else">Structure répétitives (<strong>while-else</strong>, <strong>for-else</strong>)</a><ul>
<li><a class="reference internal" href="#la-structure-while-else">La structure <strong>while-else</strong></a></li>
<li><a class="reference internal" href="#id1">Exercice</a></li>
<li><a class="reference internal" href="#la-structure-for-in">La structure <strong>for-in</strong></a></li>
<li><a class="reference internal" href="#id2">Exercice</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#le-types-de-base">Le types de base</a><ul>
<li><a class="reference internal" href="#les-types-numeriques">Les types numériques</a><ul>
<li><a class="reference internal" href="#les-entiers">Les entiers</a></li>
<li><a class="reference internal" href="#les-reels">Les réels</a></li>
<li><a class="reference internal" href="#les-decimaux">Les décimaux</a></li>
<li><a class="reference internal" href="#les-nombres-complexes">Les nombres complexes</a></li>
</ul>
</li>
<li><a class="reference internal" href="#les-iterables-predefinis">Les itérables prédéfinis</a></li>
<li><a class="reference internal" href="#les-sequences">Les séquences</a><ul>
<li><a class="reference internal" href="#id3">Exercice</a></li>
<li><a class="reference internal" href="#les-sequences-modifiables-list-et-bytearray">Les séquences modifiables ( <strong>list</strong> et bytearray )</a><ul>
<li><a class="reference internal" href="#les-listes-en-intension-ou-comprehension">Les listes en intension (ou compréhension)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id4">Exercice</a></li>
<li><a class="reference internal" href="#les-sequences-immuables">Les séquences immuables</a></li>
<li><a class="reference internal" href="#les-tuples">Les <strong>tuples</strong></a><ul>
<li><a class="reference internal" href="#unpacking">Unpacking</a></li>
<li><a class="reference internal" href="#unpacking-etendu-python-3-x-seulement">Unpacking étendu (Python 3.x seulement)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#les-chaines-de-caracteres-str-mais-aussi-bytes-et-unicode">Les chaînes de caractères  (<strong>str</strong>, mais aussi <strong>bytes</strong> et <strong>unicode</strong>)</a></li>
<li><a class="reference internal" href="#id5">Exercice</a></li>
<li><a class="reference internal" href="#les-chaines-de-caracteres-en-python-2">Les chaînes de caractères en Python 2</a></li>
<li><a class="reference internal" href="#les-chaines-de-caracteres-en-python-3">Les chaînes de caractères en Python 3</a></li>
</ul>
</li>
<li><a class="reference internal" href="#les-dictionnaires">Les dictionnaires</a><ul>
<li><a class="reference internal" href="#id6">Exercice</a></li>
</ul>
</li>
<li><a class="reference internal" href="#objets-partages-copie-d-objets">Objets partagés, copie d&#8217;objets</a></li>
</ul>
</li>
<li><a class="reference internal" href="#exercices">Exercices</a><ul>
<li><a class="reference internal" href="#les-ensembles">Les ensembles</a><ul>
<li><a class="reference internal" href="#le-type-range-xrange">Le type <strong>range/xrange</strong></a></li>
<li><a class="reference internal" href="#le-type-enumerate">Le type <strong>enumerate</strong></a></li>
<li><a class="reference internal" href="#id7">Exercice</a></li>
</ul>
</li>
<li><a class="reference internal" href="#les-types-des-constantes-nommees">Les types des constantes nommées</a><ul>
<li><a class="reference internal" href="#les-constantes-booleennes">Les constantes booléennes</a></li>
<li><a class="reference internal" href="#la-constante-none">La constante None</a></li>
<li><a class="reference internal" href="#le-type-file">Le type <strong>file</strong></a></li>
</ul>
</li>
<li><a class="reference internal" href="#travailler-des-fichiers">Travailler  des fichiers ...</a></li>
<li><a class="reference internal" href="#le-module-os">Le module <strong>os</strong></a></li>
<li><a class="reference internal" href="#le-module-os-path">Le module <strong>os.path</strong></a></li>
<li><a class="reference internal" href="#utilisation-du-caractere-joker">Utilisation du caractère &#8220;joker&#8221;</a></li>
<li><a class="reference internal" href="#le-module-shutil">Le module <em>shutil</em></a></li>
</ul>
</li>
<li><a class="reference internal" href="#les-conventions-de-codage">Les conventions de codage</a><ul>
<li><a class="reference internal" href="#les-noms-des-variables">Les noms des variables</a></li>
<li><a class="reference internal" href="#convention-generales-de-nommage">Convention générales de nommage</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id9">Exercice</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="liens.html"
                        title="previous chapter">Quelques liens utiles</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="modules.html"
                        title="next chapter">Modules et paquets</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="modules.html" title="Modules et paquets"
             >next</a> |</li>
        <li class="right" >
          <a href="liens.html" title="Quelques liens utiles"
             >previous</a> |</li>
        <li><a href="index.html">Introduction à la programmation en Python</a> &raquo;</li> 
      </ul>
    </div>
<div class="footer" style="max-height: 10px">
<a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/fr/"><img alt="Licence Creative Commons" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-nd/3.0/fr/80x15.png" /></a><br /><b>Ce document est mis à disposition selon les termes de la </b><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/fr/">licence Creative Commons</a>.
<br/>

</div>
<script type="text/javascript">
  if($(".sphinxsidebar").length){
  console.log("slides_mode=false");
  slides_mode = false;
  } else {
  console.log("slides_mode=true");
  slides_mode = true;
  }
  
  function show_sol(obj,e){
  if($(obj).attr('title')=='Show'){
  $('#tohide'+e).show();
  $(obj).attr('title','Hide');
  $(obj).text('Cacher la solution');
  } else {
  $('#tohide'+e).hide();
  $(obj).attr('title','Show');
  $(obj).text('Voir la solution');
  
  }
     
  my_obj=obj;
  
  };
  function show_py(obj,e){
  if($(obj).attr('title')=='Show'){
      if(! $("#pyterm"+e).length){
  //$("#pybtn"+e).after("<div id='pyterm"+e+"' ><iframe src=http://brython.info/console.html width=800 height=350></iframe><div>");
  $("#pybtn"+e).after("<div id='pyterm"+e+"' ><iframe src='brython/www/console.html' width=800 height=350></iframe><div>");
      } else {
          $('#pyterm'+e).show();
      }
      $(obj).attr('title','Hide');
      $(obj).text('Cacher la console');
   } else {
      $('#pyterm'+e).hide();
      $(obj).attr('title','Show');
      $(obj).text('Console');
   }
  }


      ///////////////////
          function hasPrompts(e){
          return $("#pycode"+e+" pre span.gp").length >0;
          }
          function hasDollars(e){
             return $("#pycode"+e).text().contains('$');
          }
         function showHidePrompts(obj, i){
         if($(obj).attr('title')=='Show'){
         $("#pycode"+i+" pre span.gp").each(function(j){$(this).show()});
         $("#pycode"+i+" pre span.go").each(function(j){$(this).show()});
         $(obj).attr('title','Hide');
         $(obj).html('<del>&gt;&gt;&gt;</del>');         
         
         } else {
         $("#pycode"+i+" pre span.gp").each(function(j){$(this).hide()});
         $("#pycode"+i+" pre span.go").each(function(j){$(this).hide()});         
         $(obj).attr('title','Show');
         $(obj).html('&gt;&gt;&gt;');
         }
         }
         ////////////////////
          (function(){//websafe palette http://som.csudh.edu/fac/lpress/471/links/color/websafecolor.htm
          //$(".nogood.container pre").css("backgroundImage","url('_static/xrouge.jpg')");
          //$(".nogood.container pre").css({"background-color":"#eeffcc", "background-image":"url('_static/xrouge.png')", "background-repeat":"no-repeat"});
     if(slides_mode) {
     $(".myexercice.container pre").css('background-color','#F0FFFF'); //#ffff66
     $(".tohide.container pre").css('background-color','#FFE4E1'); //#ffcc99
     $(".tohide.container").hide().each(function(e){$(this).attr("id","tohide"+e);$(this).before("<button title='Show' class='sollink' onclick='show_sol(this,"+e+")'>Voir la solution</button><br/>");})
         } else {
     $(".myexercice.container pre").css('background-color','#ffff66')
     $(".tohide.container pre").css('background-color','#ffcc99')
     $(".tohide.container").hide().each(function(e){$(this).attr("id","tohide"+e);$(this).before("<button title='Show' class='sollink' onclick='show_sol(this,"+e+")'>Voir la solution</button><br/>");})

         }


          $(".highlight-python").each(function(e){$(this).attr("id","pycode"+e);
          if(hasDollars(e)) return;
      var buttons = (hasPrompts(e) ? "<button title='Hide' class='sollink'  onclick=\"showHidePrompts(this, '"+e+"')\"><del>&gt;&gt;&gt;</del></button>" : "") +
      "<button class='btn' data-clipboard-action='copy' data-clipboard-target='#pycode"+e+"'>Copy</button>"+
      "<button title='Show' class='sollink' id='pybtn"+e+"' onclick='show_py(this,"+e+")'>Console</button>";
             $(this).after(buttons);/*$("#pyterm"+e).hide()*/});       
      //$(".highlight-python").each(function(e){$(this).attr("id","pycode"+e);$(this).after("<button title='Show' class='sollink' id='pybtn"+e+"' onclick='show_py(this,"+e+")'>Console</button>");});                      
     /*setTimeout(function(){
     $(".highlight-python").each(function(e){$("#pyterm"+e).hide()})},500);
     */
     if(slides_mode){        
     $('body').keydown(function(e){
     var code=e.keyCode? e.keyCode : e.charCode;
     console.log(code);
     if(code==33){
      console.log($("link[rel='prev']").attr('href'))
     window.location.href =$("link[rel='prev']").attr('href');
      } else if(code==34){
      console.log($("link[rel='next']").attr('href'))
     window.location.href =$("link[rel='next']").attr('href');
      }
             });//keydown
             }
     var min_h = parseInt(window.innerHeight*0.85)+'px';
     $('div.body').css('min-height',min_h);
             })();

    var clipboard = new Clipboard('.btn');

    clipboard.on('success', function(e) {
        console.log(e);
    });

    clipboard.on('error', function(e) {
        console.log(e);
    });
          
   </script>

  </body>
</html>