<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>La bibliothèque standard en bref &mdash; Introduction à la programmation en Python</title>
    
    <link rel="stylesheet" href="_static/default.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/custom_style.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Introduction à la programmation en Python" href="index.html" />
    <link rel="next" title="Les tests" href="tests.html" />
    <link rel="prev" title="L’approche objet" href="objet.html" /> 
  </head>
  <body>
   <!--  add javascript -->
   
   <script src="clipboard.min.js"></script>
   <script type="text/javascript">
     (function(){

     })();
   </script>

    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="tests.html" title="Les tests"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="objet.html" title="L’approche objet"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">Introduction à la programmation en Python</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="la-bibliotheque-standard-en-bref">
<h1>La bibliothèque standard en bref<a class="headerlink" href="#la-bibliotheque-standard-en-bref" title="Permalink to this headline">¶</a></h1>
<p>Il s&#8217;agit d&#8217;un simple aperçu, partiel et partial, de quelques fonctions avec les paramètres les plus courants dans le but de donner un avant goût des possibilités de cette bibliothèque, très riche. Il est donc fortement conseillé de consulter constamment la documentation de référence pour une utilisation correcte de la bibliothèque standard dans le processus de développement.</p>
<div class="section" id="les-outils-pour-la-programmation-fonctionnelle">
<h2>Les outils pour la programmation fonctionnelle<a class="headerlink" href="#les-outils-pour-la-programmation-fonctionnelle" title="Permalink to this headline">¶</a></h2>
<div class="section" id="generalites">
<h3>Généralités<a class="headerlink" href="#generalites" title="Permalink to this headline">¶</a></h3>
<p>La programmation fonctionnelle (P.F) est née du souhait de dépasser les limitations de la programmation impérative qui la rendent inadéquate à la manipulation des objets mathématiques.</p>
<p>En effet, la (ré)affectation de variable, propre à la programmation impérative n&#8217;est pas compatible avec les exigences de la démarche mathématique pour laquelle les objets &#8220;mutables&#8221; n&#8217;ont aucun sens. Les variables, dans la programmation impérative, sont plus proches, conceptuellement, des cellules mémoire de l&#8217;architecture de Von Neumann que des variables mathématiques.</p>
<p>Pour surmonter cet inconvénient, un paradigme différent s&#8217;impose. Un programme cesse d&#8217;être une suite d&#8217;instructions à exécuter pour devenir une expression à évaluer.</p>
<p>Le fonctions occupent le rôle clé dans cette nouvelle approche (et inspirent son nom!).</p>
<p>Sans effets de bord, elles ressemblent aux fonctions mathématiques. Elles sont des objets de &#8220;première classe&#8221;. Des fonctions d&#8217;ordre supérieur ainsi que les appels récursif remplacent les structures de boucle.</p>
<p>Ca va de soi, dans une telle approche, les changements d&#8217;état, les modifications de données sont bannis.</p>
<p>Les avantages revendiquées par ce paradigme (considéré au sens &#8220;strict&#8221;, P.F. &#8220;pure&#8221;) sont, principalement:</p>
<ul class="simple">
<li>Prouvabilité formelle des programmes</li>
<li>Décomposabilité/Composabilité des programmes</li>
<li>Testing et mise au point facilités</li>
</ul>
<p>Dans la pratique, on rencontre deux manières d&#8217;aborder la programmation fonctionnelle :</p>
<ul class="simple">
<li>Dans un sens strict, correspondant aux langages fonctionnels &#8220;purs&#8221;, dénués de variables et d&#8217;objets mutables ainsi que de structures de contrôle impératifs (sous-ensembles purement fonctionnels de OCaml, Haskell, Pure Lisp etc.)</li>
<li>Dans un sens plus libre, propre à certains langages multi-paradigme qui, sans bannir les idiomes des la programmation impérative, offrent les moyens d&#8217;écrire des programmes élégants avec des moyens apportés par paradigme fonctionnel (emploi des fonctions d&#8217;ordre supérieur pour remplacer des structures de contrôle impératifs etc.). Python s&#8217;inscrit dans ce deuxième courant.</li>
</ul>
<p>En effet, Python contient des éléments de langage propres à la programmation fonctionnelle :</p>
<ul class="simple">
<li>les fonctions sont des objets de première classe</li>
<li>il permet la définition de fonctions d&#8217;ordre supérieur (fonctions qui manipulent d&#8217;autres fonctions)</li>
<li>il offre des mécanismes avancés pour le traitement des listes et des itérables en général:<ul>
<li>listes en intension et générateurs-expression</li>
<li>des nombreuses fonctions d&#8217;ordre supérieur prédéfinies (module <strong>functools</strong>)</li>
<li>une large palette de fonctions sur les itérateurs (module <strong>itertools</strong>)</li>
<li>d&#8217;autres primitives sur les itérables: <em>all()</em>, <em>any()</em>, <em>min()</em>, <em>max()</em></li>
</ul>
</li>
</ul>
<p>Bien sûr, Python n&#8217;est pas un langage fonctionnel &#8220;pur&#8221; car :</p>
<ul class="simple">
<li>il n&#8217;encourage pas l&#8217;utilisation de la récursivité à la place des structures de boucle <em>for</em> et <em>while</em></li>
<li>par défaut, il n&#8217;empêche pas les effets de bord ni les données modifiables.</li>
</ul>
</div>
<div class="section" id="les-fonctions-d-ordre-superieur">
<h3>Les fonctions d&#8217;ordre supérieur<a class="headerlink" href="#les-fonctions-d-ordre-superieur" title="Permalink to this headline">¶</a></h3>
<p>En anglais &#8220;Higher-order functions&#8221; = HOF</p>
<p>Nous avons vu qu&#8217;en Python, les fonctions sont des objets de &#8220;première classe&#8221; i. e.  un objet fonction peut être affecté à une variable, passé en paramètre à une fonction ou retourné par une fonction.</p>
<p>Les fonctions qui manipulent et/ou qui créent des objets fonctions sont appelées &#8220;fonctions d&#8217;ordre supérieur&#8221;=FOS, en anglais :  &#8220;Higher-order functions&#8221; = HOF.</p>
<p>Entre autres, <strong>les décorateurs en font partie</strong>.</p>
<p>Les trois fonctions suivantes, <em>map</em>, <em>filter</em> et <em>reduce</em>   sont &#8220;piliers&#8221; de la programmation fonctionnelle dans le sens où elles sont présentes  dans quasiment  tous les langages qui s&#8217;en revendiquent.</p>
<p>Elles sont présentes également dans Python mais, dans la pratique, <em>map</em> et <em>filter</em> perdent du terrain en faveur des listes en intension et des générateurs-expression</p>
<ul class="simple">
<li><strong>map(f, iterable1, iterable2,...)</strong> : applique la fonction <em>f</em> sur chaque item résultat d&#8217;une itération:<ul>
<li>le nombre d&#8217;arguments de la fonction doit correspondre avec le nombre d&#8217;itérables à traiter</li>
<li>les itérables seront traités parallèlement : la fonction recevra en argument, lors d&#8217;une itération <em>i</em>, le i-ème élément de chaque</li>
<li>le processus s&#8217;arrête lorsque la fin de l&#8217;itérable le plus court est atteinte</li>
</ul>
</li>
<li><strong>filter(f, iterable_in)</strong> : applique la fonction <em>f</em> à tous les éléments de <em>iterable_in</em> et renvoie un nouvel itérable construit à partir des éléments du premier pour lesquels <em>f</em> renvoie <em>True</em></li>
<li><strong>reduce(f, iterable_in[,init])</strong> : applique la fonction <em>f</em> (à deux arguments) à tous les items de <em>iterable_in</em> de manière cumulative, de gauche à droite:<ul>
<li>pour [1,2,3,4] le résultat sera équivalent à  <tt class="docutils literal"><span class="pre">f(f(f(1,2),3),4)</span></tt></li>
<li>Si init est fourni, il sera utilisé dans le processus comme l&#8217;élément le plus à gauche. pour init=99 l&#8217;équivalent en terme de résultat sera <tt class="docutils literal"><span class="pre">f(f(f(f(99,1),2),3),4)</span></tt></li>
<li><strong>NB:</strong> En version 3, la fonction <em>reduce</em> a été déplacée dans le module <em>functools</em> (cf. <a class="reference external" href="http://docs.python.org/3.0/whatsnew/3.0.html">http://docs.python.org/3.0/whatsnew/3.0.html</a>)</li>
</ul>
</li>
</ul>
<p>Le même document <a class="reference external" href="http://docs.python.org/3.0/whatsnew/3.0.html">WHATSNEW</a> préconise l&#8217;utilisation des listes en intension à la place de <em>map</em> et <em>filter</em> quand le résultat souhaité est une liste (car en version 3 ces deux fonctions fournissent des itérateurs en sortie)</p>
<p><strong>NB :</strong> Les fonctions <em>map()</em> et <em>filter()</em> renvoient une liste en version 2 et un itérateur en version 3.</p>
<div class="section" id="avant-d-entrer-dans-les-details">
<h4>Avant d&#8217;entrer dans les détails...<a class="headerlink" href="#avant-d-entrer-dans-les-details" title="Permalink to this headline">¶</a></h4>
<p>On va mentionner l&#8217;existence du module <strong>operator</strong> qui peut être décrit en quelques mots: il rend accessible tous les opérateurs sous forme de fonction : ( &#8220;add&#8221; pour &#8220;+&#8221;, &#8220;sub&#8221; pour &#8220;-&#8221;, &#8220;mul&#8221; pour &#8220;*&#8221; etc.)</p>
</div>
<div class="section" id="la-fonction-map">
<h4>La fonction <em>map</em><a class="headerlink" href="#la-fonction-map" title="Permalink to this headline">¶</a></h4>
<p>Illustrée via un exemple simple et mise en perspective avec une écriture équivalente avec des itérables en intension :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">lst</span><span class="o">=</span><span class="p">[</span>
    <span class="p">{</span><span class="s">&#39;gn&#39;</span><span class="p">:</span><span class="s">&#39;George&#39;</span><span class="p">,</span><span class="s">&#39;sn&#39;</span><span class="p">:</span><span class="s">&#39;Washington&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s">&#39;gn&#39;</span><span class="p">:</span><span class="s">&#39;John&#39;</span><span class="p">,</span><span class="s">&#39;sn&#39;</span><span class="p">:</span><span class="s">&#39;Adams&#39;</span><span class="p">},</span>
    <span class="p">{</span><span class="s">&#39;gn&#39;</span><span class="p">:</span><span class="s">&#39;Thomas&#39;</span><span class="p">,</span><span class="s">&#39;sn&#39;</span><span class="p">:</span><span class="s">&#39;Jefferson&#39;</span><span class="p">}</span>
    <span class="p">]</span>

<span class="k">def</span> <span class="nf">full_name</span><span class="p">(</span><span class="n">entry</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    nom prénom</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="s">&quot;{0[gn]} {0[sn]}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">entry</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">full_name</span><span class="p">,</span><span class="n">lst</span><span class="p">);</span> <span class="nb">list</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="go">[&#39;George Washington&#39;, &#39;John Adams&#39;, &#39;Thomas Jefferson&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># même traitement avec des listes en intension et générateurs-expression:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">full_name</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">]</span>
<span class="go">[&#39;George Washington&#39;, &#39;John Adams&#39;, &#39;Thomas Jefferson&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="p">(</span><span class="n">full_name</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">);</span> <span class="nb">list</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="go">[&#39;George Washington&#39;, &#39;John Adams&#39;, &#39;Thomas Jefferson&#39;]</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Les fonctions anonymes sont souvent employées pour définir des transformations à appliquer sur tous les items d&#8217;un itérable, via une fonction d&#8217;ordre supérieur comme <em>map()</em> :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="s">&quot;{0[gn]} {0[sn]}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">),</span> <span class="n">lst</span><span class="p">);</span> <span class="nb">list</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="go">[&#39;George Washington&#39;, &#39;John Adams&#39;, &#39;Thomas Jefferson&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># même traitement avec des listes en intension (pas besoin de lambda):</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="s">&quot;{0[gn]} {0[sn]}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">]</span>
<span class="go">[&#39;George Washington&#39;, &#39;John Adams&#39;, &#39;Thomas Jefferson&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># générateur-expression</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="p">(</span><span class="s">&quot;{0[gn]} {0[sn]}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">lst</span><span class="p">);</span> <span class="nb">list</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="go">[&#39;George Washington&#39;, &#39;John Adams&#39;, &#39;Thomas Jefferson&#39;]</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p><strong>Important :</strong> Nous remarquerons dans l&#8217;exemple précédent que la fonction anonyme devient inutile dans l&#8217;écriture &#8220;en intension&#8221; !</p>
<p><strong>Remarque:</strong> <em>map()</em> permet de travailler en parallèle sur plusieurs itérables. Pour faire la même chose avec les itérables en intension on va utiliser la fonction <strong>zip()</strong>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">prod</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">x</span><span class="o">*</span><span class="n">y</span>

<span class="n">lst1</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">)</span>
<span class="n">lst2</span> <span class="o">=</span> <span class="nb">range</span><span class="p">(</span><span class="mi">7</span><span class="p">,</span><span class="mi">12</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">prod</span><span class="p">,</span> <span class="n">lst1</span><span class="p">,</span> <span class="n">lst2</span><span class="p">);</span> <span class="nb">list</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="go">[7, 16, 27, 40, 55]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># grace au module &quot;operator&quot; on évite d&#39;écrire des fonctions superflues (comme &quot;prod&quot;) :</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">operator</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">mul</span><span class="p">,</span> <span class="n">lst1</span><span class="p">,</span> <span class="n">lst2</span><span class="p">);</span> <span class="nb">list</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="go">[7, 16, 27, 40, 55]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># avec des listes en intension:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">prod</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="ow">in</span>  <span class="nb">zip</span><span class="p">(</span><span class="n">lst1</span><span class="p">,</span> <span class="n">lst2</span><span class="p">)]</span>
<span class="go">[7, 16, 27, 40, 55]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># ou encore:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">x</span><span class="o">*</span><span class="n">y</span> <span class="k">for</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="ow">in</span>  <span class="nb">zip</span><span class="p">(</span><span class="n">lst1</span><span class="p">,</span> <span class="n">lst2</span><span class="p">)]</span>
<span class="go">[7, 16, 27, 40, 55]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># générateur-expression</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="p">(</span><span class="n">prod</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="k">for</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span> <span class="ow">in</span>  <span class="nb">zip</span><span class="p">(</span><span class="n">lst1</span><span class="p">,</span> <span class="n">lst2</span><span class="p">));</span> <span class="nb">list</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="go">[7, 16, 27, 40, 55]</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="la-fonction-filter">
<h3>La fonction <em>filter</em><a class="headerlink" href="#la-fonction-filter" title="Permalink to this headline">¶</a></h3>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">lst</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span><span class="mi">8</span><span class="p">));</span> <span class="n">lst</span>
<span class="go">[-5, -4, -3, -2, -1, 0, 1, 2, 3, 4, 5, 6, 7]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">res</span> <span class="o">=</span> <span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">,</span> <span class="n">lst</span><span class="p">);</span> <span class="nb">list</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="go">[1, 2, 3, 4, 5, 6, 7]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># avec des listes en intension:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">lst</span> <span class="k">if</span> <span class="n">x</span><span class="o">&gt;</span><span class="mi">0</span><span class="p">]</span>
<span class="go">[1, 2, 3, 4, 5, 6, 7]</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="la-fonction-reduce">
<h3>La fonction <em>reduce</em><a class="headerlink" href="#la-fonction-reduce" title="Permalink to this headline">¶</a></h3>
<p><strong>Rappel :</strong> cette fonction à été déplacée dans le module <strong>functools</strong> dans <strong>Python 3.x</strong></p>
<dl class="docutils">
<dt>::</dt>
<dd><div class="first last highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="nb">reduce</span> <span class="c"># en Python 3.x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="go">[1, 2, 3, 4]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">sum</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">x</span><span class="o">+</span><span class="n">y</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">reduce</span><span class="p">(</span><span class="nb">sum</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">5</span><span class="p">))</span>
<span class="go">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># factorielle de 5:</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="nb">reduce</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">reduce</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">:</span><span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">6</span><span class="p">))</span>
<span class="go">120</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</dd>
</dl>
<p>La même chose, avec les fonctions du module <em>operator</em> :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">operator</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">reduce</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">add</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>
<span class="go">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">reduce</span><span class="p">(</span><span class="n">operator</span><span class="o">.</span><span class="n">mul</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="go">120</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<div class="section" id="autres-fonctions-d-ordre-superieur">
<h4>Autres fonctions d&#8217;ordre supérieur<a class="headerlink" href="#autres-fonctions-d-ordre-superieur" title="Permalink to this headline">¶</a></h4>
<p>Les deux fonctions suivantes font également partie du module <strong>functools</strong> qui en contient bien d&#8217;autres.
On les a choisi pour les présenter brièvement car elles sont un peu &#8220;emblématiques&#8221; pour la programmation fonctionnelle.</p>
<div class="section" id="l-application-partielle-d-une-fonction">
<h5>L&#8217;application partielle d&#8217;une fonction<a class="headerlink" href="#l-application-partielle-d-une-fonction" title="Permalink to this headline">¶</a></h5>
<p><strong>Exemple :</strong> dans la fonction suivante, de variable <strong>x</strong> et paramètre <strong>k</strong> :</p>
<div class="math">
\[f_{k}(x) = kx^2 + (2k + 1)x + 5\]</div>
<p>on souhaite fixer le paramètre <strong>k</strong> à <strong>3</strong> pour obtenir :</p>
<div class="math">
\[f_{3}(x) = 3x^2 + 7x + 5\]</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">functools</span>
<span class="go">&gt;&gt;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">def</span> <span class="nf">fk</span><span class="p">(</span><span class="n">k</span><span class="p">,</span> <span class="n">x</span><span class="p">):</span>
<span class="gp">... </span>    <span class="k">return</span> <span class="n">k</span> <span class="o">*</span> <span class="n">x</span><span class="o">**</span><span class="mi">2</span> <span class="o">+</span> <span class="p">(</span><span class="mi">2</span><span class="o">*</span><span class="n">k</span> <span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="n">x</span> <span class="o">+</span> <span class="mi">5</span>
<span class="gp">...</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f3</span> <span class="o">=</span> <span class="n">functools</span><span class="o">.</span><span class="n">partial</span><span class="p">(</span><span class="n">fk</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f3</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="go">115</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="fonctions-generiques-single-dispatch-generic-functions">
<h5>Fonctions génériques (single-dispatch generic functions)<a class="headerlink" href="#fonctions-generiques-single-dispatch-generic-functions" title="Permalink to this headline">¶</a></h5>
<div class="highlight-python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">singledispatch</span>

<span class="nd">@singledispatch</span>
<span class="k">def</span> <span class="nf">fun</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;What is this? &quot;</span><span class="p">,</span><span class="n">arg</span> <span class="p">)</span>

<span class="nd">@fun.register</span><span class="p">(</span><span class="nb">list</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">elt</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;i: &quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="s">&quot; elt: &quot;</span><span class="p">,</span> <span class="n">elt</span><span class="p">)</span>

<span class="nd">@fun.register</span><span class="p">(</span><span class="nb">dict</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">_</span><span class="p">(</span><span class="n">arg</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">k</span><span class="p">,</span> <span class="n">val</span> <span class="ow">in</span> <span class="n">arg</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
        <span class="k">print</span><span class="p">(</span><span class="s">&quot;key: &quot;</span><span class="p">,</span> <span class="n">k</span><span class="p">,</span> <span class="s">&quot; value: &quot;</span><span class="p">,</span> <span class="n">val</span><span class="p">)</span>

<span class="n">fun</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="s">&quot;Python&quot;</span><span class="p">))</span>

<span class="n">fun</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">6</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">fun</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="s">&quot;Python&quot;</span><span class="p">))</span>
<span class="go">i:  0  elt:  P</span>
<span class="go">i:  1  elt:  y</span>
<span class="go">i:  2  elt:  t</span>
<span class="go">i:  3  elt:  h</span>
<span class="go">i:  4  elt:  o</span>
<span class="go">i:  5  elt:  n</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fun</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">b</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">c</span><span class="o">=</span><span class="mi">6</span><span class="p">))</span>
<span class="go">key:  b  value:  5</span>
<span class="go">key:  a  value:  1</span>
<span class="go">key:  c  value:  6</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">fun</span><span class="p">(</span><span class="s">&quot;abc&quot;</span><span class="p">)</span>
<span class="go">What is this?  abc</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="le-module-itertools">
<h3>Le module <em>itertools</em><a class="headerlink" href="#le-module-itertools" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://docs.python.org/3/library/itertools.html">itertools</a> fournit des itérables très utiles, en programmation fonctionnelle ou impérative.</p>
<p>Ils sont nombreux, l&#8217;utilisation de deux d&#8217;entre eux est illustrée ici sur un exemple. Soit le générateur suivant implémentant une série:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">series</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    U0=-5 et Un+1=Un + 2*n+9 pour n illimité</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">u</span> <span class="o">=</span> <span class="o">-</span><span class="mi">5</span>
    <span class="n">n</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">yield</span> <span class="n">u</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">u</span> <span class="o">=</span> <span class="n">u</span> <span class="o">+</span> <span class="mi">2</span><span class="o">*</span><span class="n">n</span> <span class="o">+</span><span class="mi">9</span>
        <span class="n">n</span> <span class="o">+=</span> <span class="mi">1</span>
        <span class="k">yield</span> <span class="n">u</span>
</pre></div>
</div>
<p>On souhaite implémenter un itérable &#8220;paresseux&#8221; qui fournit à chaque itération, le terme courant de la série et la somme des éléments déjà générés. On va utiliser:</p>
<ul class="simple">
<li><strong>itertools.tee</strong> qui produit <strong>n</strong> itérateurs indépendants à partir d&#8217;un itérable unique</li>
<li><strong>itertools.accumulate</strong> renvoie les résultats partiels de l&#8217;opération fournie en 2ème position (par défaut, la somme) appliquée aux éléments de l&#8217;itérateur en entrée</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">itertools</span> <span class="kn">import</span> <span class="n">accumulate</span><span class="p">,</span> <span class="n">tee</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">crt</span><span class="p">,</span> <span class="n">acc</span> <span class="o">=</span> <span class="n">tee</span><span class="p">(</span><span class="n">series</span><span class="p">(),</span> <span class="n">n</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">crt_acc</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span><span class="n">crt</span><span class="p">,</span> <span class="n">accumulate</span><span class="p">(</span><span class="n">acc</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">for</span> <span class="n">res</span><span class="p">,</span> <span class="n">_</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">crt_acc</span><span class="p">,</span> <span class="nb">range</span><span class="p">(</span><span class="mi">5</span><span class="p">)):</span>
<span class="gp">... </span>    <span class="k">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
<span class="gp">...</span>
<span class="go">(-5, -5)</span>
<span class="go">(4, -1)</span>
<span class="go">(15, 14)</span>
<span class="go">(28, 42)</span>
<span class="go">(43, 85)</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="la-manipulation-des-fichiers">
<h2>La manipulation des fichiers<a class="headerlink" href="#la-manipulation-des-fichiers" title="Permalink to this headline">¶</a></h2>
<p>Le type <strong>file</strong> est un des types prédéfinis en Python, déjà évoqué précédemment pour illustrer la structure <strong>with</strong>. Pour ouvrir un fichier, on utilise le plus souvent la fonction prédéfinie <em>open()</em>  à la place du constructeur <em>file()</em>. Il y a des différences notables entre les versions 2 et 3 au niveau de la signature de <em>open()</em>.</p>
<p>En Python 2.7.x:</p>
<div class="highlight-python"><div class="highlight"><pre>open(name[, mode[, buffering]])
</pre></div>
</div>
<ul class="simple">
<li>name : nom du fichier (absolut ou relatif au répertoire courant)</li>
<li>mode :<ul>
<li><strong>r</strong> : lecture (par défaut)</li>
<li><strong>w</strong> : écriture (en début du fichier). <strong>Avertissement:</strong> Si le fichier existe le contenu courant sera perdu.</li>
<li><strong>a</strong> : ajout (append) L&#8217;écriture se fera à la fin du fichier, s&#8217;il existe, sinon il sera créé.</li>
<li><strong>r+</strong>, <strong>w+</strong>, <strong>a+</strong> : ouverture en mise à jour(lecture/écriture). <strong>Avertissement:</strong> tout comme le <em>w</em>, le <em>w+</em> tronque le fichier, le contenu existant sera perdu.</li>
<li><strong>b</strong> : il s&#8217;additionne à un des flags précédents (ex: <em>rb</em>) et il signifie <em>binary</em> pour les systèmes qui en font la distinction par rapport au mode text.</li>
</ul>
</li>
<li>buffering : gestion de la zone mémoire &#8220;tampon&#8221;:<ul>
<li>0 : pas de mémoire tampon</li>
<li>1 : mode &#8220;ligne&#8221;</li>
<li>&gt; 1 : taille du tampon (en octets)</li>
<li>&lt; 0 : taille par défaut prévue par le système (et comportement par défaut de la fonction)</li>
</ul>
</li>
</ul>
<p>En Python 3.x:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="nb">open</span><span class="p">(</span><span class="nb">file</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s">&#39;r&#39;</span><span class="p">,</span> <span class="n">buffering</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">errors</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">closefd</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">opener</span><span class="o">=</span><span class="bp">None</span><span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li>file : peut être un chemin (comme précédemment) ou un descripteur de fichier. Si <em>file</em> est un descripteur, le fichier correspondant sera fermé par <em>close()</em>, sauf si <em>closefd=False</em></li>
<li>mode :<ul>
<li><strong>r</strong>, <strong>w</strong>, <strong>a</strong>, <strong>+</strong> : avec les significations décrites précédemment</li>
<li><strong>x</strong> création uniquement, erreur si le fichier existe déjà.  <em>(nouveauté Python 3.3)</em></li>
<li><strong>b</strong> : signification nouvelle car il implique que le résultat rendu sera de type <strong>bytes</strong> alors que par défaut (mode &#8220;texte&#8221;) le résultat est de type <strong>str</strong> ce qui signifie <strong>unicode</strong> en Python 3.x. En mode &#8220;texte&#8221;, l&#8217;encodage sera:<ul>
<li>celui prévu par <em>encoding</em> s&#8217;il est défini</li>
<li>celui fourni par <tt class="docutils literal"><span class="pre">locale.getpreferredencoding(False)</span></tt> dans le cas contraire</li>
</ul>
</li>
<li><strong>t</strong> mode &#8220;texte&#8221; (par défaut)</li>
</ul>
</li>
<li>encoding : encodage</li>
<li>errors : peut contenir une des chaînes:<ul>
<li>&#8216;strict&#8217; provoque une <em>ValueError</em> en cas de caractère non supportée (valeur par défaut)</li>
<li>&#8216;ignore&#8217; ignore les erreurs d&#8217;encodage avec le risque de perte de données</li>
<li>&#8216;replace&#8217; remplace les caractères en erreur par un marqueur (&#8216;?&#8217;)</li>
<li>&#8216;surrogateescape&#8217; représente les octets non reconnus par un point code dans la plage U+DC80 - U+DCFF</li>
<li>&#8216;xmlcharrefreplace&#8217; remplace les caractères non supportés  par l&#8217;encodage avec l&#8217;entité XML <em>&amp;#nn;</em> (en écriture seulement)</li>
<li>&#8216;backslashreplace&#8217;  remplace les caractères non supportés  par l&#8217;encodage avec les séquence d&#8217;échapement nnn</li>
</ul>
</li>
<li>newline : valeurs possibles None, &#8216;&#8217;, &#8216;\n&#8217;, &#8216;\r&#8217;, et &#8216;\r\n&#8217;</li>
<li>closefd : déjà évoqué pour &#8220;file&#8221;. Si &#8220;file&#8221; est un nom il est sans effet et il doit contenir la valeur par défaut.</li>
<li>opener : fonction utilisateur destiné à l&#8217;ouverture du fichier <em>(nouveauté Python 3.3)</em></li>
</ul>
<p><strong>Rappel:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&quot;/tmp/fich.txt&quot;</span><span class="p">,</span><span class="s">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fd</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">fd</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;some text&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Est l&#8217;équivalent de:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">fd</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&quot;/tmp/fich.txt&quot;</span><span class="p">,</span><span class="s">&quot;w&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">fd</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;some text&quot;</span><span class="p">)</span>
<span class="gp">... </span><span class="k">finally</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">fd</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</pre></div>
</div>
<div class="section" id="les-autres-methodes-sur-les-fichiers">
<h3>Les autres méthodes sur les fichiers<a class="headerlink" href="#les-autres-methodes-sur-les-fichiers" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li>read(size) : <em>size</em> exprime la quantité de données à lire : s&#8217;il est négatif ou absent tout le fichier sera lu</li>
<li>seek(offset,from_what) positionnement dans le fichier. <em>from_what</em> représente l&#8217;origine par rapport à laquelle l&#8217;offset est exprimé et peut prendre trois valeurs:<ul>
<li>0 : début du fichier</li>
<li>1 : la position courante dans le fichier</li>
<li>2 : fin du fichier</li>
</ul>
</li>
<li>tell() fournit la position courante dans le fichier</li>
</ul>
<p>Exemple:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">=</span><span class="nb">open</span><span class="p">(</span><span class="s">&quot;/tmp/testfile.txt&quot;</span><span class="p">,</span><span class="s">&quot;r+&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="go">&#39;01234567890123456789\n&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="go">&#39;34567890123456789\n&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="go">&#39;89\n&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">tell</span><span class="p">()</span>
<span class="go">21</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="go">&#39;&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="o">-</span><span class="mi">3</span><span class="p">,</span><span class="mi">2</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;xy&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;ab&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">seek</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="go">&#39;01234ab78901234567xy\n&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="le-module-sys">
<h2>Le module <strong>sys</strong><a class="headerlink" href="#le-module-sys" title="Permalink to this headline">¶</a></h2>
<p>C&#8217;est le module, déjà évoqué dans les chapitres précédents, joue principalement deux rôles:</p>
<ul class="simple">
<li>il fournit au programme les moyens de base d&#8217;interagir avec son environnement d&#8217;exécution (entrées/sorties, arguments de la ligne de commande)</li>
<li>il donne au programme l&#8217;accès aux paramètres de l&#8217;interpréteur</li>
</ul>
<p>Le script suivant affiche les arguments de la ligne de commande:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="c">#!/usr/bin/env python</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">for</span> <span class="n">pos</span><span class="p">,</span> <span class="n">arg</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s">&quot;{}: {}&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">pos</span><span class="p">,</span> <span class="n">arg</span><span class="p">))</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>$ ./print_argv.py 66 abc
0: ./print_argv.py
1: 66
2: abc
</pre></div>
</div>
<p>Quelques autres attributs et fonctions de ce module, illustrés par des exemples:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">executable</span>
<span class="go">&#39;/usr/bin/python&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">platform</span>
<span class="go">&#39;linux2&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">version</span>
<span class="go">&#39;2.7.3 (default, Sep 26 2013, 20:03:06) \n[GCC 4.6.3]&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">getdefaultencoding</span><span class="p">()</span>
<span class="go">&#39;ascii&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">modules</span> <span class="c"># les modules chargés par l&#39;interpréteur</span>
<span class="go">{&#39;copy_reg&#39;: &lt;module &#39;copy_reg&#39; from &#39;/usr/lib/python2.7/copy_reg.pyc&#39;&gt;, ....}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">path</span>
<span class="go">[&#39;&#39;, &#39;/usr/lib/python2.7&#39;, &#39;/usr/lib/python2.7/plat-linux2&#39;, &#39;/usr/lib/python2.7/lib-tk&#39;, &#39;/usr/lib/python2.7/lib-old&#39;, &#39;/usr/lib/python2.7/lib-dynload&#39;, &#39;/usr/local/lib/python2.7/dist-packages&#39;, &#39;/usr/lib/python2.7/dist-packages&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;Un message&quot;</span><span class="p">)</span>
<span class="go">Un message&gt;&gt;&gt; sys.stdout.write(&quot;Un autre message \n&quot;)</span>
<span class="go">Un autre message</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">stderr</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&quot;Une erreur</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">)</span>
<span class="go">Une erreur</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c"># fin de l&#39;exécution</span>
</pre></div>
</div>
</div>
<div class="section" id="l-interface-avec-le-systeme-d-exploitation">
<h2>L&#8217;interface avec le système d&#8217;exploitation<a class="headerlink" href="#l-interface-avec-le-systeme-d-exploitation" title="Permalink to this headline">¶</a></h2>
<p id="file-management">Il s&#8217;agit des fonctionnalités souvent équivalentes aux commandes système usuelles. Elles se retrouvent dans plusieurs modules dont <strong>os</strong>, <strong>shutil</strong> et <strong>glob</strong></p>
<div class="section" id="le-module-os">
<h3>Le module <strong>os</strong><a class="headerlink" href="#le-module-os" title="Permalink to this headline">¶</a></h3>
<p>Ce module contient un grand nombre de fonctions permettant l&#8217;interaction avec le système d&#8217;exploitation.</p>
<div class="warning admonition">
<p class="first admonition-title">Avertissement</p>
<p class="last">Il est vivement déconseillé d&#8217;importer ce module par <tt class="docutils literal"><span class="pre">from</span> <span class="pre">os</span> <span class="pre">import</span> <span class="pre">*</span></tt> car la fonction <em>os.open()</em> va se substituer à la primitive <em>open()</em>, avec un comportement différent. L&#8217;utilisation de l&#8217;importation simple <tt class="docutils literal"><span class="pre">import</span> <span class="pre">os</span></tt> évite ce problème.</p>
</div>
<p>Pour illustrer quelques unes des fonctionnalités de ce module, une mise en perspective  d&#8217;opérations équivalentes réalisés en <em>shell</em> (bash) et en Python:</p>
<p>Accès à l&#8217;environnement (variable <em>PATH</em>) en <em>bash</em>:</p>
<div class="highlight-python"><div class="highlight"><pre>$ echo $PATH
/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/bin/X11:/usr/games
</pre></div>
</div>
<p>En Python:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="p">[</span><span class="s">&#39;PATH&#39;</span><span class="p">]</span>
<span class="go">&#39;/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/bin/X11:/usr/games&#39;</span>
</pre></div>
</div>
<p>Manipulation de répertoires en bash:</p>
<div class="highlight-python"><div class="highlight"><pre>poli@host:~$ cd /tmp
poli@host:/tmp$ mkdir testpy
poli@host:/tmp$ cd testpy/
poli@host:/tmp/testpy$ pwd
/tmp/testpy
poli@host:/tmp/testpy$ cd ..
poli@host:/tmp$ pwd
/tmp
poli@host:/tmp$ rmdir testpy
poli@host:/tmp$
</pre></div>
</div>
<p>L&#8217;équivalent en Python:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s">&#39;/tmp/&#39;</span><span class="p">)</span> <span class="c"># &#39;cd /tmp&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">mkdir</span><span class="p">(</span><span class="s">&#39;testpy&#39;</span><span class="p">)</span> <span class="c"># &#39;mkdir testpy&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s">&#39;testpy&#39;</span><span class="p">)</span> <span class="c"># &#39;cd testpy&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>        <span class="c"># &#39;pwd&#39;</span>
<span class="go">&#39;/tmp/testpy&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">chdir</span><span class="p">(</span><span class="s">&#39;..&#39;</span><span class="p">)</span>     <span class="c"># &#39;cd ..&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>        <span class="c"># &#39;pwd&#39;</span>
<span class="go">&#39;/tmp&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">rmdir</span><span class="p">(</span><span class="s">&#39;testpy&#39;</span><span class="p">)</span> <span class="c"># &#39;rmdir testpy&#39;</span>
</pre></div>
</div>
<p>Autres manipulations simples sur des fichiers en bash :</p>
<div class="highlight-python"><div class="highlight"><pre>$ ls /tmp/test/
testpy.txt
$ mv /tmp/test/testpy.txt /tmp/test/testpy2.txt
$ ls /tmp/test/
testpy2.txt
$ rm /tmp/test/testpy2.txt
$ ls /tmp/test/
</pre></div>
</div>
<p>Et leur équivalent en Python:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s">&quot;/tmp/test&quot;</span><span class="p">)</span> <span class="c"># &#39;ls /tmp/test/&#39; (&#39;ls&#39; -A plus précisément)</span>
<span class="go">[&#39;testpy.txt&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">rename</span><span class="p">(</span><span class="s">&quot;/tmp/test/testpy.txt&quot;</span><span class="p">,</span> <span class="s">&quot;/tmp/test/testpy2.txt&quot;</span><span class="p">)</span> <span class="c"># &#39;mv /tmp/test/testpy.txt /tmp/test/testpy2.txt&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s">&quot;/tmp/test/&quot;</span><span class="p">)</span> <span class="c"># &#39;ls /tmp/test/&#39;</span>
<span class="go">&#39;testpy2.txt&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s">&quot;/tmp/test/testpy2.txt&quot;</span><span class="p">)</span> <span class="c"># &#39;rm /tmp/test/testpy2.txt&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="s">&quot;/tmp/test/&quot;</span><span class="p">)</span>
<span class="go">[]</span>
</pre></div>
</div>
<p>Autres fonctions utiles:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="s">&quot;dir1/dir2/.../cible&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>L&#8217;effet de cette fonction est équivalent à celui de la commande (Linux/Unix) <tt class="docutils literal"><span class="pre">mkdir</span> <span class="pre">-p</span> <span class="pre">...</span></tt> : elle crée le répertoire cible ainsi que tous les répertoires intermédiaires s&#8217;ils n&#8217;existent pas:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s">&quot;/tmp/&quot;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s">&quot;/tmp/dir1&quot;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="s">&quot;/tmp/dir1/dir2/cible&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s">&quot;/tmp/dir1&quot;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s">&quot;/tmp/dir1/dir2&quot;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s">&quot;/tmp/dir1/dir2/cible&quot;</span><span class="p">)</span>
<span class="go">True</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="n">top</span><span class="p">,</span> <span class="n">topdown</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">onerror</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">followlinks</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
</pre></div>
</div>
<p>Cette fonction permet de parcourir une arborescence de fichiers ayant pour racine le répertoire <em>top</em>. Elle retourne un générateur qui fournit à chaque itération un triplet de valeurs contenant:</p>
<ul class="simple">
<li>le nom du répertoire courant</li>
<li>la liste des sous-répertoires directs</li>
<li>la liste des fichiers membres</li>
</ul>
<p>Les options:</p>
<ul class="simple">
<li>topdown :<ul>
<li>True : l&#8217;itération se fait à partir de la racine (valeur par défaut)</li>
<li>False: l&#8217;itération se fait à partir des &#8220;feuilles&#8221;</li>
</ul>
</li>
<li>onerror : None (par défaut) ou une fonction utilisateur qui sera appelée en cas d&#8217;erreur.</li>
<li>followlinks : suivi des liens symboliques (si <em>True</em>). Peut provoquer une récursion infinie en cas de liens cycliques</li>
</ul>
<p>Exemples:</p>
<ul>
<li><p class="first">top-down :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="s">&quot;/usr/local/lib/python2.7/dist-packages/&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="go">&lt;type &#39;generator&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="go">(&#39;/usr/local/lib/python2.7/dist-packages/&#39;, [&#39;django_http_proxy-0.3.2-py2.7.egg&#39;, &#39;django_guardian-1.0.4-py2.7.egg&#39;, &#39;Whoosh-2.4.1-py2.7.egg&#39;, &#39;vnc2flv&#39;, &#39;codenode-0.02-py2.7.egg&#39;, &#39;django&#39;, &#39;easy_thumbnails-1.0.3-py2.7.egg&#39;, &#39;Twisted-12.3.0-py2.7-linux-x86_64.egg&#39;, &#39;django_userena-1.1.2-py2.7.egg&#39;, &#39;django_compress-1.0.1-py2.7.egg&#39;, &#39;django_passwords-0.2.0-py2.7.egg&#39;], [&#39;vnc2flv-20100207.egg-info&#39;, &#39;flvscreen.so&#39;, &#39;Django-1.5.4.egg-info&#39;, &#39;easy-install.pth&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="go">(&#39;/usr/local/lib/python2.7/dist-packages/django_http_proxy-0.3.2-py2.7.egg&#39;, [&#39;EGG-INFO&#39;, &#39;httpproxy&#39;], [])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="go">(&#39;/usr/local/lib/python2.7/dist-packages/django_http_proxy-0.3.2-py2.7.egg/EGG-INFO&#39;, [], [&#39;zip-safe&#39;, &#39;SOURCES.txt&#39;, &#39;PKG-INFO&#39;, &#39;dependency_links.txt&#39;, &#39;top_level.txt&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># etc...</span>
</pre></div>
</div>
</li>
<li><p class="first">bottom-up :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">g</span><span class="o">=</span><span class="n">os</span><span class="o">.</span><span class="n">walk</span><span class="p">(</span><span class="s">&quot;/usr/local/lib/python2.7/dist-packages/&quot;</span><span class="p">,</span><span class="n">topdown</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="go">(&#39;/usr/local/lib/python2.7/dist-packages/django_http_proxy-0.3.2-py2.7.egg/EGG-INFO&#39;, [], [&#39;zip-safe&#39;, &#39;SOURCES.txt&#39;, &#39;PKG-INFO&#39;, &#39;dependency_links.txt&#39;, &#39;top_level.txt&#39;])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">g</span><span class="p">)</span>
<span class="go">(&#39;/usr/local/lib/python2.7/dist-packages/django_http_proxy-0.3.2-py2.7.egg/httpproxy&#39;, [], [&#39;views.pyc&#39;, &#39;settings.pyc&#39;, &#39;recorder.py&#39;, &#39;__init__.py&#39;, &#39;exceptions.pyc&#39;, &#39;views.py&#39;, &#39;settings.py&#39;, &#39;decorators.py&#39;, &#39;models.pyc&#39;, &#39;recorder.pyc&#39;, &#39;models.py&#39;, &#39;admin.py&#39;, &#39;__init__.pyc&#39;, &#39;admin.pyc&#39;, &#39;decorators.pyc&#39;, &#39;exceptions.py&#39;])</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</li>
</ul>
<div class="warning admonition">
<p class="first admonition-title">A manipuler avec précaution</p>
<blockquote class="last">
<div><ul class="simple">
<li>remove(path) supprime le fichier</li>
<li>rmdir(path) supprime le répertoire s&#8217;il est vide</li>
</ul>
</div></blockquote>
</div>
</div>
<div class="section" id="le-module-os-path">
<h3>Le module <strong>os.path</strong><a class="headerlink" href="#le-module-os-path" title="Permalink to this headline">¶</a></h3>
<p>Ce module est dédié à la manipulation des chemins dans le système de fichiers.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
<span class="go">&#39;/usr/lib/python2.7&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">os.path</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="s">&quot;code.py&quot;</span><span class="p">)</span> <span class="c"># construit le chemin absolue en fonction de l&#39;emplacement courant</span>
<span class="go">&#39;/usr/lib/python2.7/code.py&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="s">&#39;/usr/lib/python2.7/code.py&#39;</span><span class="p">)</span> <span class="c"># ~ basename cmd</span>
<span class="go">&#39;code.py&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="s">&#39;/usr/lib/python2.7/code.py&#39;</span><span class="p">)</span> <span class="c"># ~ dirname cmd</span>
<span class="go">&#39;/usr/lib/python2.7&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s">&#39;/usr/lib/python2.7/code.py&#39;</span><span class="p">)</span> <span class="c"># (dirname, basename)</span>
<span class="go">(&#39;/usr/lib/python2.7&#39;, &#39;code.py&#39;)</span>
</pre></div>
</div>
<p>Les fonction suivantes permettent de tester le type d&#8217;objet (répertoire, fichier, lien etc.) désigné par un chemin:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s">&#39;/usr/lib/python2.7/code.py&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="s">&#39;/usr/lib/python2.7/foobar.py&#39;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isfile</span><span class="p">(</span><span class="s">&#39;/usr/lib/python2.7/code.py&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="s">&#39;/usr/lib/python2.7/code.py&#39;</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">isdir</span><span class="p">(</span><span class="s">&#39;/usr/lib/python2.7&#39;</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">islink</span><span class="p">(</span><span class="s">&#39;/usr/lib/python2.7/code.py&#39;</span><span class="p">)</span>
<span class="go">False</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>Pour la portabilité, il est préférable d&#8217;utiliser <em>os.path.join(...)</em> pour construire des chemins:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">&#39;/tmp&#39;</span><span class="p">,</span><span class="s">&#39;foo&#39;</span><span class="p">,</span><span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="go">&#39;/tmp/foo/bar&#39;</span>
</pre></div>
</div>
<div class="warning admonition">
<p class="first admonition-title">Attention</p>
<p class="last">Si un chemin absolu est fourni, tous les éléments qui le précédent sont ignorés silencieusement:</p>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">&#39;tmp&#39;</span><span class="p">,</span><span class="s">&#39;/foo&#39;</span><span class="p">,</span><span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="go">&#39;/foo/bar&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s">&#39;/tmp&#39;</span><span class="p">,</span><span class="s">&#39;/foo&#39;</span><span class="p">,</span><span class="s">&#39;bar&#39;</span><span class="p">)</span>
<span class="go">&#39;/foo/bar&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p>La fonction <tt class="docutils literal"><span class="pre">os.path.normpath()</span></tt> élimine les redondances pour ramener le chemin au format &#8220;canonique&#8221;:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">normpath</span><span class="p">(</span><span class="s">&#39;/usr/../usr/lib//python2.7/./code.py&#39;</span><span class="p">)</span>
<span class="go">&#39;/usr/lib/python2.7/code.py&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<p><strong>NB:</strong> Sous Windows cette fonction transforme les <strong>/</strong> en <strong>\</strong>. Pour les OS &#8220;case insesitive&#8221; la fonction <em>os.path.normcase()</em> permet de passer les noms en minuscules.</p>
</div>
<div class="section" id="utilisation-du-caractere-joker">
<h3>Utilisation du caractère &#8220;joker&#8221;<a class="headerlink" href="#utilisation-du-caractere-joker" title="Permalink to this headline">¶</a></h3>
<p>La fonction <em>glob.glob()</em> permet de lister le contenu d&#8217;un répertoire avec un filtre:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">glob</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">glob</span><span class="o">.</span><span class="n">glob</span><span class="p">(</span><span class="s">&quot;/usr/lib/python2.7/b*py&quot;</span><span class="p">)</span>
<span class="go">[&#39;/usr/lib/python2.7/binhex.py&#39;, &#39;/usr/lib/python2.7/bdb.py&#39;, &#39;/usr/lib/python2.7/base64.py&#39;, &#39;/usr/lib/python2.7/bisect.py&#39;]</span>
</pre></div>
</div>
</div>
<div class="section" id="le-module-shutil">
<h3>Le module <em>shutil</em><a class="headerlink" href="#le-module-shutil" title="Permalink to this headline">¶</a></h3>
<p>Le module <em>shutil</em> fournit des fonctions de manipulation de fichiers (copie, suppression) d&#8217;un niveau d&#8217;abstraction plus proche des commandes système.</p>
<table border="1" class="docutils">
<colgroup>
<col width="29%" />
<col width="71%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Fonction</th>
<th class="head">Description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>shutil.copy(src, dst)</td>
<td>Copie un fichier avec les permissions. <em>dst</em> peut être un répertoire</td>
</tr>
<tr class="row-odd"><td>shutil.copymode(src, dst)</td>
<td>Copie les permissions <strong>seules</strong> entre <em>src</em> et <em>dst</em></td>
</tr>
<tr class="row-even"><td>shutil.copystat(src, dst)</td>
<td>Copie les permissions+infos temps(dernier accès/modification)+flags</td>
</tr>
<tr class="row-odd"><td>shutil.copy2(src, dst)</td>
<td>Équivalent copy() + copystat()</td>
</tr>
</tbody>
</table>
<p><strong>NB:</strong> shutil contient d&#8217;autres fonctions puissantes, permettant la copie et la suppression d&#8217;arborescences de fichiers, à manipuler avec précaution.</p>
</div>
</div>
<div class="section" id="les-sous-processus">
<h2>Les (sous)processus<a class="headerlink" href="#les-sous-processus" title="Permalink to this headline">¶</a></h2>
<p>Les situations les plus courantes nécessitant le lancement des nouveaux processus sont traitées par quelques fonctions du module <strong>subprocess</strong> :</p>
<div class="highlight-python"><div class="highlight"><pre>subprocess.call(args, *, stdin=None, stdout=None, stderr=None, shell=False, timeout=None) # timeout existe seulement en version 3.x
</pre></div>
</div>
<p>C&#8217;est une signature abrégée, le deuxième paramètre <tt class="docutils literal"><span class="pre">*</span></tt> symbolise des paramètres moins utilisés qui ne seront pas discutés ici.</p>
<ul class="simple">
<li>args : représente la commande à exécuter. Peut être une liste ou une chaîne de caractères</li>
<li>stdin, stdout, stderr : redirection possible des entrées/sorties standard</li>
<li>shell : si <tt class="docutils literal"><span class="pre">shell=True</span></tt> la commande sera exécutée par le <em>shell</em></li>
</ul>
<div class="warning admonition">
<p class="first admonition-title">Avertissement</p>
<p class="last">L&#8217;argument shell=True représente un risque important en terme de sécurité en particulier en présence d&#8217;entrées non fiables. Son utilisation est <em>vivement déconseillée</em>.</p>
</div>
<p>Cette fonction:</p>
<ul class="simple">
<li>exécute la commande exprimée par args</li>
<li>attend la fin de l&#8217;exécution</li>
<li>renvoie le code de retour système</li>
</ul>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">subprocess</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s">&quot;ls&quot;</span><span class="p">)</span>
<span class="go">controller  __init__.py  __init__.pyc  model  view</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">subprocess</span><span class="o">.</span><span class="n">call</span><span class="p">([</span><span class="s">&quot;ls&quot;</span><span class="p">,</span> <span class="s">&quot;view&quot;</span><span class="p">])</span>
<span class="go">admviews.py   appviews1.py   appviews1.pyc  appviews2.pyc  __init__.pyc</span>
<span class="go">admviews.pyc  appviews1.py~  appviews2.py   __init__.py</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">subprocess</span><span class="o">.</span><span class="n">call</span><span class="p">([</span><span class="s">&quot;ls&quot;</span><span class="p">,</span><span class="s">&quot;-l&quot;</span><span class="p">,</span> <span class="s">&quot;/tmp/locked.txt&quot;</span><span class="p">])</span>
<span class="go">---------- 1 poli poli 0 mars  11 15:44 /tmp/locked.txt</span>
<span class="go">0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">subprocess</span><span class="o">.</span><span class="n">call</span><span class="p">([</span><span class="s">&quot;cat&quot;</span><span class="p">,</span> <span class="s">&quot;/tmp/locked.txt&quot;</span><span class="p">])</span>
<span class="go">cat: /tmp/locked.txt: Permission non accordée</span>
<span class="go">1</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>subprocess.check_call(args, *, stdin=None, stdout=None, stderr=None, shell=False, timeout=None) # timeout existe seulement en version 3.x
</pre></div>
</div>
<p>Effectue le même traitement que <em>subprocess.call()</em> mais lève une exception si le code de retour est <em>!=0</em></p>
<div class="highlight-python"><div class="highlight"><pre>&gt;&gt;&gt; subprocess.check_call([&quot;cat&quot;, &quot;/tmp/locked.txt&quot;])
cat: /tmp/locked.txt: Permission non accordée
Traceback (most recent call last):
File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;
File &quot;/usr/lib/python2.7/subprocess.py&quot;, line 511, in check_call
raise CalledProcessError(retcode, cmd)
subprocess.CalledProcessError: Command &#39;[&#39;cat&#39;, &#39;/tmp/locked.txt&#39;]&#39; returned non-zero exit status 1
&gt;&gt;&gt;
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre>subprocess.check_output(args, *, stdin=None, stdout=None, stderr=None, shell=False, timeout=None) # timeout existe seulement en version 3.x
</pre></div>
</div>
<p>Effectue le même traitement que <tt class="docutils literal"><span class="pre">subprocess.check_call()</span></tt> mais retourne la sortie standard:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">result</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">check_output</span><span class="p">([</span><span class="s">&quot;echo&quot;</span><span class="p">,</span> <span class="s">&quot;Hello&quot;</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">result</span>
<span class="go">&#39;Hello\n&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Des utilisation avancées de ce module, qui dépassent le cadre de cette introduction, passent par l&#8217;utilisation directe de la classe <strong>subprocess.Popen</strong></p>
</div>
</div>
<div class="section" id="le-module-platform">
<h2>Le module <strong>platform</strong><a class="headerlink" href="#le-module-platform" title="Permalink to this headline">¶</a></h2>
<p>Comme son nom l&#8217;indique ce module fournit des informations sur la plateforme :</p>
<ul class="simple">
<li>Architecture : platform.architecture(executable=&#8217;/usr/bin/...&#8217;)</li>
<li>Type de matériel : platform.machine()</li>
<li>Nom réseau de l’hôte : platform.node()</li>
<li>Chaîne de caractère contenant système, release, type de machine etc. : platform.platform()</li>
<li>Nom du processeur : platform.processor()</li>
<li>Infos système (nom,version,release) du système : platform.system(), platform.version(), platform.release()</li>
<li>Infos sur l’interpréteur : python_build(), python_compiler(), python_version()</li>
</ul>
</div>
<div class="section" id="l-acces-a-internet-en-http">
<h2>L&#8217;accès à Internet en http<a class="headerlink" href="#l-acces-a-internet-en-http" title="Permalink to this headline">¶</a></h2>
<p>Un module simple permettant de faire des requêtes <em>http</em> est <em>urllib.request</em> (<em>urllib2</em> en <em>Python 2.7.x</em>). Pour une utilisation basique il suffit de passer une <em>url</em> en argument à la fonction <em>urlopen()</em> qui retournera un itérateur qui permet de récupérer le résultat, ligne par ligne:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">urllib.request</span> <span class="kn">import</span> <span class="n">urlopen</span> <span class="c"># for Python 3.x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c">#from import urllib2 import urlopen # for Python 2.7.x</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">i</span> <span class="o">=</span> <span class="n">urlopen</span><span class="p">(</span><span class="s">&quot;http://example.org&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="go">&#39;&lt;!doctype html&gt;\n&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="go">&#39;&lt;html&gt;\n&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">next</span><span class="p">(</span><span class="n">i</span><span class="p">)</span>
<span class="go">&#39;&lt;head&gt;\n&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># ...</span>
</pre></div>
</div>
<p>On peut également récupérer le résultat d&#8217;un coup:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">urlopen</span><span class="p">(</span><span class="s">&quot;http://example.org&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>
<span class="go">&#39;&lt;!doctype html&gt;\n&lt;html&gt;\n&lt;head&gt;\n ...</span>
</pre></div>
</div>
</div>
<div class="section" id="compression-des-donnees">
<h2>Compression des données<a class="headerlink" href="#compression-des-donnees" title="Permalink to this headline">¶</a></h2>
<p>Les formats courants sont supportés:</p>
<ul class="simple">
<li>zlib</li>
<li>gzip</li>
<li>bz2</li>
<li>zipfile</li>
<li>tarfile</li>
</ul>
<p>Illustration  :</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">zlib</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">citation</span> <span class="o">=</span> <span class="n">b</span><span class="s">&quot;Davantage d&#39;avantages avantagent davantage.&quot;</span> <span class="c"># Boby Lapointe</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">citation</span><span class="p">)</span>
<span class="go">43</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">zipped</span> <span class="o">=</span> <span class="n">zlib</span><span class="o">.</span><span class="n">compress</span><span class="p">(</span><span class="n">citation</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">len</span><span class="p">(</span><span class="n">zipped</span><span class="p">)</span>
<span class="go">32</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">zlib</span><span class="o">.</span><span class="n">decompress</span><span class="p">(</span><span class="n">zipped</span><span class="p">)</span>
<span class="go">&quot;Davantage d&#39;avantages avantagent davantage.&quot;</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="configparser-et-json">
<h2><strong>ConfigParser</strong> et <strong>json</strong><a class="headerlink" href="#configparser-et-json" title="Permalink to this headline">¶</a></h2>
<p><em>Configparser</em>, renommé <em>configparser</em> en version 3, permet de créer et parser des fichiers de configuration de type <strong>.ini</strong>, <strong>.cfg</strong> etc., assez répandus dans tous les environnements.</p>
<p>Création d&#8217;un fichier de configuration (pour un logiciel imaginaire):</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">ConfigParser</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span> <span class="o">=</span> <span class="n">ConfigParser</span><span class="o">.</span><span class="n">RawConfigParser</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">add_section</span><span class="p">(</span><span class="s">&quot;ClientSide&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s">&quot;ClientSide&quot;</span><span class="p">,</span><span class="s">&quot;buffer&quot;</span><span class="p">,</span><span class="mi">1000</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s">&quot;ClientSide&quot;</span><span class="p">,</span><span class="s">&quot;timeout&quot;</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">add_section</span><span class="p">(</span><span class="s">&quot;ServerSide&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s">&quot;ServerSide&quot;</span><span class="p">,</span><span class="s">&quot;db&quot;</span><span class="p">,</span><span class="s">&quot;mysql&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="s">&quot;ServerSide&quot;</span><span class="p">,</span><span class="s">&quot;logs&quot;</span><span class="p">,</span><span class="s">&quot;/var/log/mysrv&quot;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s">&quot;myconf.cfg&quot;</span><span class="p">,</span><span class="s">&quot;w&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fd</span><span class="p">:</span>
<span class="gp">... </span>    <span class="n">conf</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">fd</span><span class="p">)</span>
</pre></div>
</div>
<p>Résultat :</p>
<div class="highlight-python"><div class="highlight"><pre>$ cat myconf.cfg
[ClientSide]
buffer = 1000
timeout = 10

[ServerSide]
db = mysql
logs = /var/log/mysrv
</pre></div>
</div>
<p>Pour parser le fichier de configuration précédent:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span> <span class="o">=</span> <span class="n">ConfigParser</span><span class="o">.</span><span class="n">RawConfigParser</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="s">&quot;myconf.cfg&quot;</span><span class="p">)</span>
<span class="go">[&#39;myconf.cfg&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">getint</span><span class="p">(</span><span class="s">&quot;ClientSide&quot;</span><span class="p">,</span><span class="s">&quot;buffer&quot;</span><span class="p">)</span>
<span class="go">1000</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">conf</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s">&quot;ServerSide&quot;</span><span class="p">,</span><span class="s">&quot;db&quot;</span><span class="p">)</span>
<span class="go">&#39;mysql&#39;</span>
</pre></div>
</div>
<p><em>JSON</em>, acronyme de <em>JavaScript Object Notation</em>, est un format d&#8217;échange très utilisé. Les structures de données <em>JavaScript</em> étant assez proches de celles de Python (listes, dictionnaires), l&#8217;utilisation de <em>JSON</em> est très intuitive;</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">json</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">some_data</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;a&#39;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="s">&#39;b&#39;</span><span class="p">:[</span><span class="mi">5</span><span class="p">,</span><span class="s">&#39;xyz&#39;</span><span class="p">]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">some_data</span><span class="p">)</span>
<span class="go">&#39;{&quot;a&quot;: 3, &quot;b&quot;: [5, &quot;xyz&quot;]}&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">txt</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">some_data</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>
<span class="go">&lt;type &#39;str&#39;&gt;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>
<span class="go">{u&#39;a&#39;: 3, u&#39;b&#39;: [5, u&#39;xyz&#39;]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">loads</span><span class="p">(</span><span class="n">txt</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="nb">type</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="mesure-des-performances">
<h2>Mesure des performances<a class="headerlink" href="#mesure-des-performances" title="Permalink to this headline">¶</a></h2>
<p>Le module <em>timeit</em> offre un moyen simple pour comparer des performances entre plusieurs implémentations d&#8217;une fonctionnalités, plusieurs approches d&#8217;un même problème etc.</p>
<p>Par exemple, on peut comparer le temps nécessaire pour la construction d&#8217;une liste de 100 éléments avec le temps pour construire un générateur équivalent:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">timeit</span> <span class="kn">import</span> <span class="n">Timer</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Timer</span><span class="p">(</span><span class="s">&#39;[e**2 for e in xrange(1,100)]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">timeit</span><span class="p">()</span>
<span class="go">9.104944229125977</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">Timer</span><span class="p">(</span><span class="s">&#39;(e**2 for e in xrange(1,100))&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">timeit</span><span class="p">()</span>
<span class="go">0.6118359565734863</span>
</pre></div>
</div>
<p>...et le temps pour fabriquer la liste indirectement, en passant par la fabrication du dit générateur:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">Timer</span><span class="p">(</span><span class="s">&#39;list((e**2 for e in xrange(1,100)))&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">timeit</span><span class="p">()</span>
<span class="go">10.48848009109497</span>
</pre></div>
</div>
</div>
<div class="section" id="le-module-math">
<h2>Le module <strong>math</strong><a class="headerlink" href="#le-module-math" title="Permalink to this headline">¶</a></h2>
<p>Fournit des fonctions de base en théorie des nombres, logarithmes, trigonométrie, conversions d&#8217;angles etc:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">math</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">tan</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">4</span><span class="p">)</span>
<span class="go">0.9999999999999999</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">pi</span>
<span class="go">3.141592653589793</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">e</span>
<span class="go">2.718281828459045</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">e</span><span class="o">**</span><span class="mi">3</span><span class="p">)</span> <span class="c"># logarithme naturel (appel à 1 seul argument)</span>
<span class="go">3.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">log</span><span class="p">(</span><span class="mi">1000</span><span class="p">,</span><span class="mi">10</span><span class="p">)</span> <span class="c"># 2 args, équivalent  log(x)/log(10)</span>
<span class="go">2.9999999999999996</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">log10</span><span class="p">(</span><span class="mi">1000</span><span class="p">)</span> <span class="c"># log décimal, plus précis que log(x,10)</span>
<span class="go">3.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">radians</span><span class="p">(</span><span class="mi">90</span><span class="p">)</span> <span class="c"># pi/2</span>
<span class="go">1.5707963267948966</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">math</span><span class="o">.</span><span class="n">degrees</span><span class="p">(</span><span class="n">math</span><span class="o">.</span><span class="n">pi</span><span class="o">/</span><span class="mi">2</span><span class="p">)</span>
<span class="go">90.0</span>
<span class="gp">&gt;&gt;&gt; </span><span class="c"># etc.</span>
<span class="gp">...</span>
</pre></div>
</div>
</div>
<div class="section" id="le-module-random">
<h2>Le module <strong>random</strong><a class="headerlink" href="#le-module-random" title="Permalink to this headline">¶</a></h2>
<p>Fournit des générateurs de nombres pseudo-aléatoires.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">import</span> <span class="nn">random</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span>
<span class="go">0.28578533604922873</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
<span class="go">15</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">random</span><span class="o">.</span><span class="n">randrange</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span>
<span class="go">10</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="s">&quot;abc&quot;</span><span class="p">)</span>
<span class="go">&#39;c&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="s">&quot;abc&quot;</span><span class="p">)</span>
<span class="go">&#39;a&#39;</span>
<span class="go">&gt;&gt;&gt;</span>
</pre></div>
</div>
</div>
<div class="section" id="les-expressions-rationnelles-ou-regulieres">
<h2>Les expressions rationnelles (ou régulières)<a class="headerlink" href="#les-expressions-rationnelles-ou-regulieres" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">r&#39;\bon[a-z]*&#39;</span><span class="p">,</span> <span class="s">&#39;There should be one-- and preferably only one --obvious way to do it.&#39;</span><span class="p">)</span>
<span class="go">[&#39;one&#39;, &#39;only&#39;, &#39;one&#39;]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prog</span><span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">compile</span><span class="p">(</span><span class="s">r&#39;\bon[a-z]*&#39;</span><span class="p">)</span> <span class="c"># avec un motif compilé</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">prog</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">&#39;There should be one-- and preferably only one --obvious way to do it. (Tim Peters)&#39;</span><span class="p">)</span>
<span class="go">[&#39;one&#39;, &#39;only&#39;, &#39;one&#39;]</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">La bibliothèque standard en bref</a><ul>
<li><a class="reference internal" href="#les-outils-pour-la-programmation-fonctionnelle">Les outils pour la programmation fonctionnelle</a><ul>
<li><a class="reference internal" href="#generalites">Généralités</a></li>
<li><a class="reference internal" href="#les-fonctions-d-ordre-superieur">Les fonctions d&#8217;ordre supérieur</a><ul>
<li><a class="reference internal" href="#avant-d-entrer-dans-les-details">Avant d&#8217;entrer dans les détails...</a></li>
<li><a class="reference internal" href="#la-fonction-map">La fonction <em>map</em></a></li>
</ul>
</li>
<li><a class="reference internal" href="#la-fonction-filter">La fonction <em>filter</em></a></li>
<li><a class="reference internal" href="#la-fonction-reduce">La fonction <em>reduce</em></a><ul>
<li><a class="reference internal" href="#autres-fonctions-d-ordre-superieur">Autres fonctions d&#8217;ordre supérieur</a><ul>
<li><a class="reference internal" href="#l-application-partielle-d-une-fonction">L&#8217;application partielle d&#8217;une fonction</a></li>
<li><a class="reference internal" href="#fonctions-generiques-single-dispatch-generic-functions">Fonctions génériques (single-dispatch generic functions)</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#le-module-itertools">Le module <em>itertools</em></a></li>
</ul>
</li>
<li><a class="reference internal" href="#la-manipulation-des-fichiers">La manipulation des fichiers</a><ul>
<li><a class="reference internal" href="#les-autres-methodes-sur-les-fichiers">Les autres méthodes sur les fichiers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#le-module-sys">Le module <strong>sys</strong></a></li>
<li><a class="reference internal" href="#l-interface-avec-le-systeme-d-exploitation">L&#8217;interface avec le système d&#8217;exploitation</a><ul>
<li><a class="reference internal" href="#le-module-os">Le module <strong>os</strong></a></li>
<li><a class="reference internal" href="#le-module-os-path">Le module <strong>os.path</strong></a></li>
<li><a class="reference internal" href="#utilisation-du-caractere-joker">Utilisation du caractère &#8220;joker&#8221;</a></li>
<li><a class="reference internal" href="#le-module-shutil">Le module <em>shutil</em></a></li>
</ul>
</li>
<li><a class="reference internal" href="#les-sous-processus">Les (sous)processus</a></li>
<li><a class="reference internal" href="#le-module-platform">Le module <strong>platform</strong></a></li>
<li><a class="reference internal" href="#l-acces-a-internet-en-http">L&#8217;accès à Internet en http</a></li>
<li><a class="reference internal" href="#compression-des-donnees">Compression des données</a></li>
<li><a class="reference internal" href="#configparser-et-json"><strong>ConfigParser</strong> et <strong>json</strong></a></li>
<li><a class="reference internal" href="#mesure-des-performances">Mesure des performances</a></li>
<li><a class="reference internal" href="#le-module-math">Le module <strong>math</strong></a></li>
<li><a class="reference internal" href="#le-module-random">Le module <strong>random</strong></a></li>
<li><a class="reference internal" href="#les-expressions-rationnelles-ou-regulieres">Les expressions rationnelles (ou régulières)</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="objet.html"
                        title="previous chapter">L&#8217;approche objet</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="tests.html"
                        title="next chapter">Les tests</a></p>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="tests.html" title="Les tests"
             >next</a> |</li>
        <li class="right" >
          <a href="objet.html" title="L’approche objet"
             >previous</a> |</li>
        <li><a href="index.html">Introduction à la programmation en Python</a> &raquo;</li> 
      </ul>
    </div>
<div class="footer" style="max-height: 10px">
<a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/fr/"><img alt="Licence Creative Commons" style="border-width:0" src="http://i.creativecommons.org/l/by-nc-nd/3.0/fr/80x15.png" /></a><br /><b>Ce document est mis à disposition selon les termes de la </b><a rel="license" href="http://creativecommons.org/licenses/by-nc-nd/3.0/fr/">licence Creative Commons</a>.
<br/>

</div>
<script type="text/javascript">
  if($(".sphinxsidebar").length){
  console.log("slides_mode=false");
  slides_mode = false;
  } else {
  console.log("slides_mode=true");
  slides_mode = true;
  }
  
  function show_sol(obj,e){
  if($(obj).attr('title')=='Show'){
  $('#tohide'+e).show();
  $(obj).attr('title','Hide');
  $(obj).text('Cacher la solution');
  } else {
  $('#tohide'+e).hide();
  $(obj).attr('title','Show');
  $(obj).text('Voir la solution');
  
  }
     
  my_obj=obj;
  
  };
  function show_py(obj,e){
  if($(obj).attr('title')=='Show'){
      if(! $("#pyterm"+e).length){
  //$("#pybtn"+e).after("<div id='pyterm"+e+"' ><iframe src=http://brython.info/console.html width=800 height=350></iframe><div>");
  $("#pybtn"+e).after("<div id='pyterm"+e+"' ><iframe src='brython/www/console.html' width=800 height=350></iframe><div>");
      } else {
          $('#pyterm'+e).show();
      }
      $(obj).attr('title','Hide');
      $(obj).text('Cacher la console');
   } else {
      $('#pyterm'+e).hide();
      $(obj).attr('title','Show');
      $(obj).text('Console');
   }
  }


      ///////////////////
          function hasPrompts(e){
          return $("#pycode"+e+" pre span.gp").length >0;
          }
          function hasDollars(e){
             return $("#pycode"+e).text().contains('$');
          }
         function showHidePrompts(obj, i){
         if($(obj).attr('title')=='Show'){
         $("#pycode"+i+" pre span.gp").each(function(j){$(this).show()});
         $("#pycode"+i+" pre span.go").each(function(j){$(this).show()});
         $(obj).attr('title','Hide');
         $(obj).html('<del>&gt;&gt;&gt;</del>');         
         
         } else {
         $("#pycode"+i+" pre span.gp").each(function(j){$(this).hide()});
         $("#pycode"+i+" pre span.go").each(function(j){$(this).hide()});         
         $(obj).attr('title','Show');
         $(obj).html('&gt;&gt;&gt;');
         }
         }
         ////////////////////
          (function(){//websafe palette http://som.csudh.edu/fac/lpress/471/links/color/websafecolor.htm
          //$(".nogood.container pre").css("backgroundImage","url('_static/xrouge.jpg')");
          //$(".nogood.container pre").css({"background-color":"#eeffcc", "background-image":"url('_static/xrouge.png')", "background-repeat":"no-repeat"});
     if(slides_mode) {
     $(".myexercice.container pre").css('background-color','#F0FFFF'); //#ffff66
     $(".tohide.container pre").css('background-color','#FFE4E1'); //#ffcc99
     $(".tohide.container").hide().each(function(e){$(this).attr("id","tohide"+e);$(this).before("<button title='Show' class='sollink' onclick='show_sol(this,"+e+")'>Voir la solution</button><br/>");})
         } else {
     $(".myexercice.container pre").css('background-color','#ffff66')
     $(".tohide.container pre").css('background-color','#ffcc99')
     $(".tohide.container").hide().each(function(e){$(this).attr("id","tohide"+e);$(this).before("<button title='Show' class='sollink' onclick='show_sol(this,"+e+")'>Voir la solution</button><br/>");})

         }


          $(".highlight-python").each(function(e){$(this).attr("id","pycode"+e);
          if(hasDollars(e)) return;
      var buttons = (hasPrompts(e) ? "<button title='Hide' class='sollink'  onclick=\"showHidePrompts(this, '"+e+"')\"><del>&gt;&gt;&gt;</del></button>" : "") +
      "<button class='btn' data-clipboard-action='copy' data-clipboard-target='#pycode"+e+"'>Copy</button>"+
      "<button title='Show' class='sollink' id='pybtn"+e+"' onclick='show_py(this,"+e+")'>Console</button>";
             $(this).after(buttons);/*$("#pyterm"+e).hide()*/});       
      //$(".highlight-python").each(function(e){$(this).attr("id","pycode"+e);$(this).after("<button title='Show' class='sollink' id='pybtn"+e+"' onclick='show_py(this,"+e+")'>Console</button>");});                      
     /*setTimeout(function(){
     $(".highlight-python").each(function(e){$("#pyterm"+e).hide()})},500);
     */
     if(slides_mode){        
     $('body').keydown(function(e){
     var code=e.keyCode? e.keyCode : e.charCode;
     console.log(code);
     if(code==33){
      console.log($("link[rel='prev']").attr('href'))
     window.location.href =$("link[rel='prev']").attr('href');
      } else if(code==34){
      console.log($("link[rel='next']").attr('href'))
     window.location.href =$("link[rel='next']").attr('href');
      }
             });//keydown
             }
     var min_h = parseInt(window.innerHeight*0.85)+'px';
     $('div.body').css('min-height',min_h);
             })();

    var clipboard = new Clipboard('.btn');

    clipboard.on('success', function(e) {
        console.log(e);
    });

    clipboard.on('error', function(e) {
        console.log(e);
    });
          
   </script>

  </body>
</html>